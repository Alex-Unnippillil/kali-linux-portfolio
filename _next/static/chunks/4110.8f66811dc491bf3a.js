(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4110],{37603:(e,t,a)=>{"use strict";var l=a(99742);a(72552);var n=a(14232),r=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(n),s=void 0!==l&&l.env&&!0,i=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,a=t.name,l=void 0===a?"stylesheet":a,n=t.optimizeForSpeed,r=void 0===n?s:n;c(i(l),"`name` must be a string"),this._name=l,this._deletedRulePlaceholder="#"+l+"-deleted-rule____{}",c("boolean"==typeof r,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=r,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var o=document.querySelector('meta[property="csp-nonce"]');this._nonce=o?o.getAttribute("content"):null}var t,a=e.prototype;return a.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},a.isOptimizeForSpeed=function(){return this._optimizeForSpeed},a.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(s||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,a){return"number"==typeof a?e._serverSheet.cssRules[a]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),a},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},a.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},a.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},a.insertRule=function(e,t){if(c(i(e),"`insertRule` accepts only strings"),this._optimizeForSpeed){var a=this.getSheet();"number"!=typeof t&&(t=a.cssRules.length);try{a.insertRule(e,t)}catch(t){return s||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var l=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,l))}return this._rulesCount++},a.replaceRule=function(e,t){if(this._optimizeForSpeed){var a=this.getSheet();if(t.trim()||(t=this._deletedRulePlaceholder),!a.cssRules[e])return e;a.deleteRule(e);try{a.insertRule(t,e)}catch(l){s||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),a.insertRule(this._deletedRulePlaceholder,e)}}else{var l=this._tags[e];c(l,"old rule at index `"+e+"` not found"),l.textContent=t}return e},a.deleteRule=function(e){if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},a.flush=function(){this._injected=!1,this._rulesCount=0,this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]},a.cssRules=function(){var e=this;return this._tags.reduce(function(t,a){return a?t=t.concat(Array.prototype.map.call(e.getSheetForTag(a).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},a.makeStyleTag=function(e,t,a){t&&c(i(t),"makeStyleTag accepts only strings as second parameter");var l=document.createElement("style");this._nonce&&l.setAttribute("nonce",this._nonce),l.type="text/css",l.setAttribute("data-"+e,""),t&&l.appendChild(document.createTextNode(t));var n=document.head||document.getElementsByTagName("head")[0];return a?n.insertBefore(l,a):n.appendChild(l),l},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}(e.prototype,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var u=function(e){for(var t=5381,a=e.length;a;)t=33*t^e.charCodeAt(--a);return t>>>0},d={};function f(e,t){if(!t)return"jsx-"+e;var a=String(t),l=e+a;return d[l]||(d[l]="jsx-"+u(e+"-"+a)),d[l]}function h(e,t){var a=e+t;return d[a]||(d[a]=t.replace(/__jsx-style-dynamic-selector/g,e)),d[a]}var p=function(){function e(e){var t=void 0===e?{}:e,a=t.styleSheet,l=void 0===a?null:a,n=t.optimizeForSpeed,r=void 0!==n&&n;this._sheet=l||new o({name:"styled-jsx",optimizeForSpeed:r}),this._sheet.inject(),l&&"boolean"==typeof r&&(this._sheet.setOptimizeForSpeed(r),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var a=this.getIdAndRules(e),l=a.styleId,n=a.rules;if(l in this._instancesCounts){this._instancesCounts[l]+=1;return}var r=n.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[l]=r,this._instancesCounts[l]=1},t.remove=function(e){var t=this,a=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(a in this._instancesCounts,"styleId: `"+a+"` not found"),this._instancesCounts[a]-=1,this._instancesCounts[a]<1){var l=this._fromServer&&this._fromServer[a];l?(l.parentNode.removeChild(l),delete this._fromServer[a]):(this._indices[a].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[a]),delete this._instancesCounts[a]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],a=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return a[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,a;return t=this.cssRules(),void 0===(a=e)&&(a={}),t.map(function(e){var t=e[0],l=e[1];return r.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:a.nonce?a.nonce:void 0,dangerouslySetInnerHTML:{__html:l}})})},t.getIdAndRules=function(e){var t=e.children,a=e.dynamic,l=e.id;if(a){var n=f(l,a);return{styleId:n,rules:Array.isArray(t)?t.map(function(e){return h(n,e)}):[h(n,t)]}}return{styleId:f(l),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),g=n.createContext(null);g.displayName="StyleSheetContext";var b=r.default.useInsertionEffect||r.default.useLayoutEffect,m=new p;function x(e){var t=m||n.useContext(g);return t&&b(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)]),null}x.dynamic=function(e){return e.map(function(e){return f(e[0],e[1])}).join(" ")},t.style=x},44110:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var l=a(37876),n=a(49096),r=a.n(n),s=a(14232),i=a(72082),o=a(90209);let c=["♠","♥","♦","♣"],u={"♠":"black","♣":"black","♥":"red","♦":"red"},d=e=>{let t=[];c.forEach(e=>{for(let a=1;a<=13;a+=1)t.push({suit:e,value:a,color:u[e],faceUp:!1})});let a=void 0!==e?(e=>()=>{let t=e+=0x6d2b79f5;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/0x100000000})(e):Math.random;for(let e=t.length-1;e>0;e-=1){let l=Math.floor(a()*(e+1));[t[e],t[l]]=[t[l],t[e]]}return t},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,n=t||d(a),r=Array.from({length:7},()=>[]);for(let e=0;e<7;e+=1){for(let t=0;t<=e;t+=1){let t=n.pop();if(!t)break;r[e].push(t)}let t=r[e][r[e].length-1];t&&(t.faceUp=!0)}return{tableau:r,stock:n,waste:[],foundations:Array.from({length:4},()=>[]),draw:e,score:0,redeals:l}},h=e=>{if(0===e.stock.length){if(0===e.waste.length||0===e.redeals)return e;let t=e.waste.slice().reverse().map(e=>({...e,faceUp:!1}));return{...e,stock:t,waste:[],redeals:e.redeals-1,score:e.score-100}}let t=Math.min(e.draw,e.stock.length),a=e.stock.slice(0,e.stock.length-t),l=e.stock.slice(-t).map(e=>({...e,faceUp:!0}));return{...e,stock:a,waste:[...e.waste,...l]}},p=e=>{if(!e.length||!e.every(e=>e.faceUp))return!1;for(let t=0;t<e.length-1;t+=1){let a=e[t],l=e[t+1];if(a.value!==l.value+1||a.color===l.color)return!1}return!0},g=(e,t)=>{if(0===t.length)return 13===e.value;let a=t[t.length-1];return a.faceUp&&a.color!==e.color&&a.value===e.value+1},b=(e,t,a)=>{if("tableau"===t.source){if(t.pile===a)return!1;let l=e.tableau[t.pile];if(!l||t.index<0||t.index>=l.length)return!1;let n=l.slice(t.index);return!!p(n)&&g(n[0],e.tableau[a])}let l=e.waste[e.waste.length-1];return!!l&&g(l,e.tableau[a])},m=(e,t,a)=>{if("tableau"===t.source){let l=e.tableau[t.pile];if(!l||t.index<0||t.index>=l.length||t.index!==l.length-1)return!1;let n=l[l.length-1];if(!n||!n.faceUp||c.indexOf(n.suit)!==a)return!1;let r=e.foundations[a];return 0===r.length?1===n.value:r[r.length-1].value+1===n.value}let l=e.waste[e.waste.length-1];if(!l||c.indexOf(l.suit)!==a)return!1;let n=e.foundations[a];return 0===n.length?1===l.value:n[n.length-1].value+1===l.value},x=(e,t)=>{if(0===e.waste.length)return e;let a=e.waste[e.waste.length-1];if(!g(a,e.tableau[t]))return e;let l=e.waste.slice(0,-1),n=e.tableau.map((e,l)=>l===t?[...e,a]:e);return{...e,waste:l,tableau:n}},v=(e,t,a,l)=>{var n;let r=e.tableau[t].slice(a);if(!p(r)||!g(r[0],e.tableau[l]))return e;let s=e.tableau.map((e,n)=>{if(n===t){let t=e.slice(0,a);return t.length&&!t[t.length-1].faceUp&&(t[t.length-1]={...t[t.length-1],faceUp:!0}),t}return n===l?[...e,...r]:e}),i=!(e.tableau[t].length-r.length>0)||(null==(n=e.tableau[t][e.tableau[t].length-r.length-1])?void 0:n.faceUp)?e.score:e.score+5;return{...e,tableau:s,score:i}},y=(e,t,a)=>{let l,n=e.foundations.map(e=>e.slice());if("waste"===t){if(!(l=e.waste[e.waste.length-1]))return e;let t=n[c.indexOf(l.suit)];if(0===t.length&&1!==l.value||t.length>0&&t[t.length-1].value+1!==l.value)return e;let a=e.waste.slice(0,-1);return t.push(l),{...e,waste:a,foundations:n,score:e.score+10}}let r=e.tableau[a];if(!(l=r[r.length-1])||!l.faceUp)return e;let s=n[c.indexOf(l.suit)];if(0===s.length&&1!==l.value||s.length>0&&s[s.length-1].value+1!==l.value)return e;let i=e.tableau.map((e,t)=>{if(t===a){let t=e.slice(0,-1);return t.length&&!t[t.length-1].faceUp&&(t[t.length-1]={...t[t.length-1],faceUp:!0}),t}return e});return s.push(l),{...e,tableau:i,foundations:n,score:e.score+10}},j=e=>e.foundations.every(e=>13===e.length),w=e=>1===e?"A":11===e?"J":12===e?"Q":13===e?"K":String(e),k=e=>{if(e.waste.length){let t=e.waste[e.waste.length-1],a=e.foundations[c.indexOf(t.suit)];if(0===a.length&&1===t.value||a.length>0&&a[a.length-1].value+1===t.value)return{source:"waste",pile:-1,index:e.waste.length-1};for(let a=0;a<e.tableau.length;a+=1)if(g(t,e.tableau[a]))return{source:"waste",pile:-1,index:e.waste.length-1}}for(let t=0;t<e.tableau.length;t+=1){let a=e.tableau[t];if(!a.length)continue;let l=a[a.length-1];if(!l.faceUp)continue;let n=e.foundations[c.indexOf(l.suit)];if(0===n.length&&1===l.value||n.length>0&&n[n.length-1].value+1===l.value)return{source:"tableau",pile:t,index:a.length-1};for(let n=0;n<e.tableau.length;n+=1)if(t!==n&&g(l,e.tableau[n]))return{source:"tableau",pile:t,index:a.length-1}}for(let t=0;t<e.tableau.length;t+=1){let a=e.tableau[t];if(a.length)for(let l=0;l<a.length;l+=1){let n=a.slice(l);if(p(n)){for(let a=0;a<e.tableau.length;a+=1)if(t!==a&&g(n[0],e.tableau[a]))return{source:"tableau",pile:t,index:l}}}}return null},S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=[],l=e;for(let e=0;e<t&&!j(l);e+=1){let e=y(l,"waste",null);if(e!==l){a.push({type:"wasteToFoundation"}),l=e;continue}let t=!1;for(let n=0;n<l.tableau.length;n+=1)if((e=y(l,"tableau",n))!==l){a.push({type:"tableauToFoundation",from:n}),l=e,t=!0;break}if(!t){for(let n=0;n<l.tableau.length;n+=1)if((e=x(l,n))!==l){a.push({type:"wasteToTableau",to:n}),l=e,t=!0;break}if(!t){for(let n=0;n<l.tableau.length&&!t;n+=1){let r=l.tableau[n];for(let s=0;s<r.length;s+=1)if(r[s].faceUp){for(let r=0;r<l.tableau.length;r+=1)if(r!==n&&(e=v(l,n,s,r))!==l){a.push({type:"tableauToTableau",from:n,index:s,to:r}),l=e,t=!0;break}if(t)break}}if(!t){if((e=h(l))===l)break;a.push({type:"draw"}),l=e}}}}return a},_="group relative rounded-md border border-kali-border/60 bg-[color:color-mix(in_srgb,var(--color-surface-muted)_80%,rgba(9,34,52,0.92)_20%)] px-3 py-1.5 text-sm font-semibold text-kali-text shadow-[0_3px_6px_rgba(0,0,0,0.35)] transition-all duration-200 hover:-translate-y-[1px] hover:border-kali-accent/70 hover:bg-[color:color-mix(in_srgb,var(--color-surface)_75%,rgba(25,116,186,0.35)_25%)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus disabled:cursor-not-allowed disabled:opacity-60",N={"♠":"spades","♥":"hearts","♦":"diamonds","♣":"clubs"},C=e=>{let{card:t,faceDown:a=!1,reducedMotion:n,style:r,className:i="",disableFlip:o=!1}=e,[c,u]=(0,s.useState)(!a),d=(0,s.useRef)(!a);return(0,s.useEffect)(()=>{if(o||n){u(!a),d.current=!a;return}let e=!a;d.current!==e&&(requestAnimationFrame(()=>{u(e)}),d.current=e)},[a,o,n]),(0,l.jsx)("div",{className:"sol-card ".concat(c?"sol-card-front":"sol-card-back"," ").concat("red"===t.color?"sol-card-red":"sol-card-black"," ").concat(i),style:r,children:(0,l.jsxs)("div",{className:"sol-card-inner",children:[(0,l.jsxs)("div",{className:"sol-card-face sol-card-face-front",children:[(0,l.jsxs)("div",{className:"sol-card-corner sol-card-corner--top",children:[(0,l.jsx)("span",{children:w(t.value)}),(0,l.jsx)("span",{"aria-hidden":"true",children:t.suit})]}),(0,l.jsx)("div",{className:"sol-card-suit","aria-hidden":"true",children:t.suit}),(0,l.jsxs)("div",{className:"sol-card-corner sol-card-corner--bottom",children:[(0,l.jsx)("span",{children:w(t.value)}),(0,l.jsx)("span",{"aria-hidden":"true",children:t.suit})]})]}),(0,l.jsx)("div",{className:"sol-card-face sol-card-face-back"})]})})},E=()=>{let[e,t]=(0,s.useState)(1),[a,n]=(0,s.useState)(3),[u,g]=(0,s.useState)("klondike"),[j,E]=(0,s.useState)(()=>f(e,void 0,void 0,a)),[R,F]=(0,s.useState)(null),[T,D]=(0,s.useState)(!1),[z,I]=(0,s.useState)(0),[A,U]=(0,s.useState)(0),[M,O]=(0,s.useState)(!1),[L,P]=(0,s.useState)({gamesPlayed:0,gamesWon:0,bestScore:0,bestTime:0,dailyStreak:0,lastDaily:null,totalHints:0,totalUndos:0,autoFinishes:0}),B=(0,o.default)(),[W,H]=(0,s.useState)([]),[K,q]=(0,s.useState)(""),Y=(0,s.useRef)(null),[J,X]=(0,s.useState)(B),[Q,V]=(0,s.useState)(1),G=(0,s.useRef)([]),Z=(0,s.useRef)([]),$=(0,s.useRef)(null),ee=(0,s.useRef)(null),et=(0,s.useRef)(null),ea=(0,s.useRef)(null),el=(0,s.useRef)(null),en=(0,s.useRef)(null),er=(0,s.useRef)(!1),es=(0,s.useRef)(null),[ei,eo]=(0,s.useState)(null),ec=(0,s.useRef)(null),[eu,ed]=(0,s.useState)(null),[ef,eh]=(0,s.useState)([]),[ep,eg]=(0,s.useState)(!1),[eb,em]=(0,s.useState)(!1),[ex,ev]=(0,s.useState)(null),[ey,ej]=(0,s.useState)(0),[ew,ek]=(0,s.useState)(!1),eS=(0,s.useRef)(0),[e_,eN]=(0,s.useState)([]),eC=(0,s.useRef)(!1),[eE,eR]=(0,s.useState)(!1),[eF,eT]=(0,s.useState)(0),eD=(0,s.useMemo)(()=>((e,t,a)=>"solitaireStats-".concat(e,"-d").concat(t,"-p").concat(a===1/0?"u":a))(u,e,a),[u,e,a]),ez=(0,s.useMemo)(()=>"undefined"!=typeof document&&"draggable"in document.createElement("div"),[]),eI=(0,s.useMemo)(()=>Q<.7?18:Q<.85?24:Q<.95?28:32,[Q]),eA=(0,s.useMemo)(()=>{if(B)return[];let e=[];for(let t=0;t<24;t+=1)e.push({id:"".concat(eF,"-").concat(t),left:(19*eF+37*t)%90+5,delay:90*t%900,hue:(11*eF+23*t)%360});return e},[eF,B]),eU=(0,s.useCallback)(e=>{P(t=>{let a=e(t);return localStorage.setItem(eD,JSON.stringify(a)),a})},[eD]),eM=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{countMove:a=!0,trackHistory:l=!0}=t,n=!1;return E(t=>{let r=e(t);return r!==t&&(n=!0,!eC.current&&l&&eN(e=>[...e.slice(-99),t]),a&&!eC.current&&U(e=>e+1)),eC.current=!1,r}),n},[]),eO=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;eN(t=>[...t.slice(-99),e]),U(e=>e+t)},[]);(0,s.useEffect)(()=>{ej(Number(localStorage.getItem("solitaireBankroll")||"0")),ek(!0)},[]),(0,s.useEffect)(()=>{P({gamesPlayed:0,gamesWon:0,bestScore:0,bestTime:0,dailyStreak:0,lastDaily:null,totalHints:0,totalUndos:0,autoFinishes:0,...JSON.parse(localStorage.getItem(eD)||"{}")})},[eD]),(0,s.useEffect)(()=>{let e=()=>{let e=ee.current;if(!e)return;let t=e.scrollWidth;V(Math.max(Math.min(1,window.innerWidth/t),.375))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{let e=()=>{"hidden"===document.visibilityState&&X(!0)};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]),(0,s.useEffect)(()=>{B&&X(!0)},[B]);let eL=(0,s.useCallback)(()=>X(!1),[]),eP=(0,s.useCallback)(function(){let t,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:eb,s=n?Number(new Date().toISOString().slice(0,10).replace(/-/g,"")):void 0;if(r&&!n)for(let e=0;e<1e3;e+=1){let e=d();if(k(f(l,e.slice(),void 0,a))){t=e;break}}B||(eR(!0),window.setTimeout(()=>eR(!1),900)),eC.current=!0,E(f(l,t,s,a)),D(!1),H([]),eT(e=>e+1),I(0),U(0),eN([]),ev(null),eg(!1),O(n),q("New game started"),ej(e=>{let t=e-52;return localStorage.setItem("solitaireBankroll",String(t)),t}),eS.current=0,eU(e=>({...e,gamesPlayed:e.gamesPlayed+1}))},[e,u,eb,a,B,eU]);(0,s.useEffect)(()=>{ew&&"klondike"===u&&eP(e,u)},[e,u,eP,ew]);let eB=5*j.foundations.reduce((e,t)=>e+t.length,0)-52;(0,s.useEffect)(()=>{T&&(Y.current&&clearInterval(Y.current),eU(e=>{let t=eB>e.bestScore?eB:e.bestScore,a=0===e.bestTime||z<e.bestTime?z:e.bestTime,{dailyStreak:l,lastDaily:n}=e;if(M){let e=new Date().toISOString().slice(0,10),t=new Date(Date.now()-864e5).toISOString().slice(0,10);n===e||(n===t?l+=1:l=1),n=e}return{...e,gamesWon:e.gamesWon+1,bestScore:t,bestTime:a,dailyStreak:l,lastDaily:n}}),eT(e=>e+1))},[T,M,z,eB,eU]),(0,s.useEffect)(()=>{if(J||T){Y.current&&clearInterval(Y.current);return}return Y.current=setInterval(()=>I(e=>e+1),1e3),()=>{Y.current&&clearInterval(Y.current)}},[J,T]),(0,s.useEffect)(()=>{j.foundations.every(e=>13===e.length)&&(D(!0),(0,i.logEvent)({category:"Solitaire",action:"win"}))},[j]),(0,s.useEffect)(()=>{let e=j.foundations.reduce((e,t)=>e+t.length,0);if(e>eS.current){let t=e-eS.current;ej(e=>{let a=e+5*t;return localStorage.setItem("solitaireBankroll",String(a)),a})}eS.current=e},[j.foundations]),(0,s.useEffect)(()=>{if(T&&!B){let e=j.foundations.flat(),t=window.innerWidth/2/Q,a=window.innerHeight/2/Q,l=.8*Math.min(t,a);H(e.map((n,r)=>{let s=r/e.length*Math.PI*2;return{...n,x:t,y:a,angle:0,tx:t+l*Math.cos(s),ty:a+l*Math.sin(s),finalAngle:180*s/Math.PI}})),requestAnimationFrame(()=>{H(e=>e.map(e=>({...e,x:e.tx,y:e.ty,angle:e.finalAngle})))})}},[T,B,j.foundations,Q]),(0,s.useEffect)(()=>{if(ex){let e=setTimeout(()=>ev(null),2e3);return()=>clearTimeout(e)}},[ex]),(0,s.useEffect)(()=>{q("Score ".concat(eB,", time ").concat(z," seconds, redeals ").concat(j.redeals===1/0?"infinite":j.redeals))},[eB,z,j.redeals]),(0,s.useEffect)(()=>{T&&q("You win!")},[T]);let eW=()=>{eM(e=>h(e))?((0,i.logEvent)({category:"Solitaire",action:"move",label:"draw"}),q("Drew cards from stock")):j.stock.length||0!==j.redeals||q("No redeals remaining")},eH=(0,s.useCallback)(e=>{let t=w(e.value);return"".concat({A:"Ace",J:"Jack",Q:"Queen",K:"King"}[t]||t," of ").concat(N[e.suit])},[]),eK=(0,s.useCallback)(e=>{en.current=e,F(e),e||(er.current=!1,eo(null),ec.current=null)},[]),eq=(0,s.useCallback)(()=>{et.current&&(document.body.removeChild(et.current),et.current=null),el.current&&(document.body.removeChild(el.current),el.current=null),ea.current&&(ea.current.style.opacity="",ea.current=null)},[]),eY=(0,s.useCallback)(e=>{let t=Date.now();ed({id:t,payload:e}),setTimeout(()=>{ed(e=>(null==e?void 0:e.id)===t?null:e)},500),q("Invalid move")},[]),eJ=(0,s.useCallback)(()=>{eq(),es.current=null,eK(null)},[eq,eK]),eX=(0,s.useCallback)((e,t,a)=>t>=e.left&&t<=e.right&&a>=e.top&&a<=e.bottom,[]),eQ=(0,s.useCallback)((e,t)=>{let a=G.current.findIndex(a=>a&&eX(a.getBoundingClientRect(),e,t));if(-1!==a)return{type:"foundation",index:a};let l=Z.current.findIndex(a=>a&&eX(a.getBoundingClientRect(),e,t));return -1!==l?{type:"tableau",index:l}:null},[eX]),eV=(e,t,a,l)=>{if("tableau"===e){if(!p(j.tableau[t].slice(a)))return;eK({source:e,pile:t,index:a})}else"waste"===e&&j.waste.length&&eK({source:e,pile:-1,index:j.waste.length-1});er.current=!1;let n=l.currentTarget.cloneNode(!0);n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.style.pointerEvents="none",n.style.boxShadow="0 8px 16px rgba(0,0,0,0.3)",document.body.appendChild(n),l.dataTransfer.setDragImage(n,32,48),et.current=n,ea.current=l.currentTarget,ea.current.style.opacity="0"},eG=e=>{e.preventDefault(),eJ()},eZ=(0,s.useCallback)(function(e,t,a,l){var n,r,s;let i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{},u=ee.current;if(!u){eC.current=!0,E(t),o();return}let d=u.getBoundingClientRect(),f=0,h=0;if("waste"===a){i=e.waste[e.waste.length-1];let t=null==(r=$.current)?void 0:r.getBoundingClientRect();t&&(f=(t.left-d.left)/Q,h=(t.top-d.top)/Q)}else{i=e.tableau[l][e.tableau[l].length-1];let t=null==(s=Z.current[l])?void 0:s.getBoundingClientRect();t&&(f=(t.left-d.left)/Q,h=(t.top-d.top)/Q+(e.tableau[l].length-1)*eI)}let p=c.indexOf(i.suit),g=null==(n=G.current[p])?void 0:n.getBoundingClientRect(),b=g?(g.left-d.left)/Q:f,m=g?(g.top-d.top)/Q:h,x=t.foundations.map((e,t)=>t===p?e.slice(0,-1):e),v={...t,foundations:x,score:t.score-10};eC.current=!0,E(v);let y={...i,x:f,y:h,angle:0,tx:b,ty:m};eh(e=>[...e,y]),requestAnimationFrame(()=>{eh(e=>e.map(e=>e===y?{...e,x:b,y:m}:e))}),setTimeout(()=>{eh(e=>e.filter(e=>e!==y)),eC.current=!0,E(t),o()},300)},[G,Z,$,ee,Q,eI]),e$=(0,s.useCallback)(()=>{let e=S(j),t=(a,l)=>{if(a>=e.length)return;let n=e[a],r=l;if("draw"===n.type){r=h(l),eC.current=!0,E(r),setTimeout(()=>t(a+1,r),300);return}if("wasteToTableau"===n.type){r=x(l,n.to),eC.current=!0,E(r),setTimeout(()=>t(a+1,r),300);return}if("tableauToTableau"===n.type){r=v(l,n.from,n.index,n.to),eC.current=!0,E(r),setTimeout(()=>t(a+1,r),300);return}if("wasteToFoundation"===n.type){r=y(l,"waste",null),eZ(l,r,"waste",null,()=>t(a+1,r));return}"tableauToFoundation"===n.type&&(r=y(l,"tableau",n.from),eZ(l,r,"tableau",n.from,()=>t(a+1,r)))};t(0,j)},[j,eZ]),e0=(e,t)=>{if(t&&!er.current){if(er.current=!0,!b(j,t,e)){eY(t),eJ();return}("tableau"===t.source?eM(a=>v(a,t.pile,t.index,e)):eM(t=>x(t,e)))&&((0,i.logEvent)({category:"Solitaire",action:"move",label:"tableau"}),q("Moved cards to tableau")),eJ()}},e1=(e,t)=>{if(t&&!er.current){if(er.current=!0,!m(j,t,e)){eY(t),eJ();return}if("tableau"===t.source){let e=y(j,"tableau",t.pile);e!==j&&(eO(j),(0,i.logEvent)({category:"Solitaire",action:"move",label:"foundation"}),eZ(j,e,"tableau",t.pile,()=>q("Moved card to foundation")))}else{let e=y(j,"waste",null);e!==j&&(eO(j),(0,i.logEvent)({category:"Solitaire",action:"move",label:"foundation"}),eZ(j,e,"waste",null,()=>q("Moved card to foundation")))}eJ()}},e4=(0,s.useCallback)(e=>{if(!es.current||e.pointerId!==es.current.pointerId)return;if(el.current){let{offsetX:t,offsetY:a}=es.current;el.current.style.transform="translate(".concat(e.clientX-t,"px, ").concat(e.clientY-a,"px)")}let t=eQ(e.clientX,e.clientY);ec.current=t,eo(t)},[eQ]),e8=(0,s.useCallback)(e=>{if(!es.current||e.pointerId!==es.current.pointerId)return;window.removeEventListener("pointermove",e4),window.removeEventListener("pointerup",e8),window.removeEventListener("pointercancel",e8);let t=ec.current||eQ(e.clientX,e.clientY);return(null==t?void 0:t.type)==="foundation"?void e1(t.index,en.current):(null==t?void 0:t.type)==="tableau"?void e0(t.index,en.current):void eJ()},[e1,e0,eJ,e4,eQ]),e9=(e,t,a)=>l=>{if(!("touch"===l.pointerType||!ez))return;if("tableau"===e){if(!p(j.tableau[t].slice(a)))return;eK({source:e,pile:t,index:a})}else{if(!j.waste.length)return;eK({source:e,pile:-1,index:j.waste.length-1})}er.current=!1;let n=l.currentTarget;ea.current=n,ea.current.style.opacity="0";let r=n.getBoundingClientRect(),s=l.clientX-r.left,i=l.clientY-r.top,o=n.cloneNode(!0);o.style.position="fixed",o.style.pointerEvents="none",o.style.top="0",o.style.left="0",o.style.zIndex="9999",o.style.transform="translate(".concat(l.clientX-s,"px, ").concat(l.clientY-i,"px)"),document.body.appendChild(o),el.current=o,es.current={pointerId:l.pointerId,offsetX:s,offsetY:i},l.currentTarget.setPointerCapture(l.pointerId),window.addEventListener("pointermove",e4),window.addEventListener("pointerup",e8),window.addEventListener("pointercancel",e8),l.preventDefault()},e5=(e,t)=>{let a=y(j,e,"tableau"===e?t:null);a!==j&&((0,i.logEvent)({category:"Solitaire",action:"move",label:"auto"}),eO(j),eZ(j,a,e,"tableau"===e?t:null))},e3=(0,s.useCallback)(()=>{eN(e=>{if(!e.length)return q("Nothing to undo"),e;let t=e[e.length-1];return eC.current=!0,E(t),U(e=>e>0?e-1:0),D(!1),H([]),eT(e=>e+1),eU(e=>({...e,totalUndos:e.totalUndos+1})),q("Undid last move"),e.slice(0,-1)})},[eU]),e2=L.bestScore?"".concat(L.bestScore," (").concat(L.bestTime||0,"s)"):"N/A",e6=[{label:"Score",value:eB},{label:"Bankroll",value:ey},{label:"Redeals",value:j.redeals===1/0?"∞":j.redeals},{label:"Mode",value:eb?"Winnable deals":"Random deals"},{label:"Best",value:e2},{label:"Wins",value:"".concat(L.gamesWon,"/").concat(L.gamesPlayed)},{label:"Daily Streak",value:L.dailyStreak},{label:"Hints",value:L.totalHints},{label:"Undos",value:L.totalUndos},{label:"Auto-finish",value:L.autoFinishes}],e7=(0,s.useCallback)(e=>{let t=y(e,"waste",null);if(t!==e){(0,i.logEvent)({category:"Solitaire",action:"move",label:"auto"}),eO(e),eZ(e,t,"waste",null,()=>e7(t));return}for(let a=0;a<e.tableau.length;a+=1)if((t=y(e,"tableau",a))!==e){(0,i.logEvent)({category:"Solitaire",action:"move",label:"auto"}),eO(e),eZ(e,t,"tableau",a,()=>e7(t));return}eg(!1)},[eZ,eO]),te=(0,s.useCallback)((e,t)=>{if(!ep){if(B){let a=(e=>{let t,a=e;do{let e=y(t=a,"waste",null);if(e!==t){a=e;continue}for(let e=0;e<t.tableau.length;e+=1){let l=y(t,"tableau",e);if(l!==t){a=l;break}}}while(a!==t);return a})(e);if(a!==e){let l=a.foundations.reduce((e,t)=>e+t.length,0)-e.foundations.reduce((e,t)=>e+t.length,0);l>0&&eO(e,l),t&&eU(e=>({...e,autoFinishes:e.autoFinishes+1})),eC.current=!0,E(a),q("Auto-complete finished the game")}return}t&&eU(e=>({...e,autoFinishes:e.autoFinishes+1})),eg(!0),q("Auto-completing remaining moves"),e7(e)}},[ep,B,eO,eU,e7]),tt=(0,s.useCallback)(()=>{te(j,!0)},[j,te]);return((0,s.useEffect)(()=>{!ep&&0===j.stock.length&&j.tableau.every(e=>e.every(e=>e.faceUp))&&te(j,!1)},[ep,j,te]),"klondike"!==u)?(0,l.jsxs)("div",{className:"h-full w-full select-none bg-[color:color-mix(in_srgb,var(--color-surface-muted)_88%,rgba(8,16,24,0.9)_12%)] p-3 text-kali-text",children:[(0,l.jsx)("div",{className:"mb-4 flex justify-end",children:(0,l.jsxs)("select",{className:"".concat(_," px-3 py-1"),"aria-label":"Change solitaire variant",value:u,onChange:e=>{g(e.target.value)},children:[(0,l.jsx)("option",{value:"klondike",children:"Klondike"}),(0,l.jsx)("option",{value:"spider",children:"Spider"}),(0,l.jsx)("option",{value:"freecell",children:"FreeCell"})]})}),(0,l.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-4 text-center",children:[(0,l.jsx)("p",{className:"text-xl font-semibold text-kali-accent",children:"".concat(u.charAt(0).toUpperCase()+u.slice(1)," is loading soon.")}),(0,l.jsx)("button",{type:"button",className:_,onClick:()=>g("klondike"),children:"Return to Klondike"})]})]}):(0,l.jsxs)("div",{ref:ee,style:{transform:"scale(".concat(Q,")"),transformOrigin:"top left",backgroundImage:"linear-gradient(120deg, rgba(4,10,18,0.88), rgba(9,40,62,0.85)), url(".concat("/apps/solitaire/felt-texture.svg",")"),backgroundSize:"cover",backgroundPosition:"center"},className:"jsx-889a974a6a3c4c5 relative h-full w-full overflow-hidden text-kali-text",children:[(0,l.jsxs)("div",{className:"jsx-889a974a6a3c4c5 pointer-events-none absolute inset-x-0 top-0 flex justify-between px-4 py-2 text-xs font-semibold sm:text-sm",children:[(0,l.jsxs)("span",{className:"jsx-889a974a6a3c4c5 rounded-full bg-black/35 px-3 py-1 shadow-sm",children:["Moves: ",A]}),(0,l.jsxs)("span",{className:"jsx-889a974a6a3c4c5 rounded-full bg-black/35 px-3 py-1 shadow-sm",children:["Time: ",z,"s"]})]}),(0,l.jsx)("div",{"aria-live":"polite",className:"jsx-889a974a6a3c4c5 sr-only",children:K}),J&&(0,l.jsx)("div",{role:"dialog","aria-modal":"true",className:"jsx-889a974a6a3c4c5 absolute inset-0 z-50 flex items-center justify-center bg-kali-overlay/90 backdrop-blur-sm",children:(0,l.jsx)("button",{type:"button",onClick:eL,autoFocus:!0,className:"jsx-889a974a6a3c4c5 rounded border border-kali-border/60 bg-kali-dark px-4 py-2 text-sm font-semibold text-kali-text shadow transition-colors hover:bg-[color:color-mix(in_srgb,var(--color-surface)_70%,rgba(15,148,210,0.2)_30%)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus",children:"Resume"})}),ef.map((e,t)=>(0,l.jsx)("div",{style:{transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")},className:"jsx-889a974a6a3c4c5 absolute transition-transform duration-300",children:(0,l.jsx)(C,{card:e,reducedMotion:B,disableFlip:!0})},"fly-".concat(t))),T&&!B&&W.map((e,t)=>(0,l.jsx)("div",{style:{transform:"translate(".concat(e.x,"px, ").concat(e.y,"px) rotate(").concat(e.angle,"deg)")},className:"jsx-889a974a6a3c4c5 absolute transition-transform duration-[1200ms] ease-[cubic-bezier(0.22,1,0.36,1)]",children:(0,l.jsx)(C,{card:e,reducedMotion:B,disableFlip:!0})},"cascade-".concat(t))),T&&!B&&eA.map(e=>(0,l.jsx)("span",{style:{left:"".concat(e.left,"%"),animationDelay:"".concat(e.delay,"ms"),background:"linear-gradient(135deg, hsl(".concat(e.hue," 85% 65%), hsl(").concat((e.hue+40)%360," 85% 55%))")},className:"jsx-889a974a6a3c4c5 sol-confetti"},e.id)),T&&(0,l.jsx)("div",{role:"alert","aria-live":"assertive",className:"jsx-889a974a6a3c4c5 sol-victory-overlay",children:(0,l.jsxs)("div",{className:"jsx-889a974a6a3c4c5 sol-victory-card",children:[(0,l.jsx)("h2",{className:"jsx-889a974a6a3c4c5 text-2xl font-semibold text-kali-accent",children:"You win!"}),(0,l.jsxs)("p",{className:"jsx-889a974a6a3c4c5 mt-2 text-sm text-kali-subtle",children:["Vegas score ",eB," • ",z,"s • ",A," moves"]}),(0,l.jsxs)("div",{className:"jsx-889a974a6a3c4c5 mt-4 flex flex-wrap justify-center gap-3",children:[(0,l.jsx)("button",{type:"button",onClick:()=>eP(e,u,M),className:"jsx-889a974a6a3c4c5 "+(_||""),children:"New Deal"}),(0,l.jsx)("button",{type:"button",onClick:()=>eP(e,u,!0),className:"jsx-889a974a6a3c4c5 "+(_||""),children:"Daily Deal"})]})]})}),(0,l.jsxs)("div",{className:"jsx-889a974a6a3c4c5 relative flex h-full flex-col gap-4 pt-12",children:[(0,l.jsxs)("div",{className:"jsx-889a974a6a3c4c5 rounded-xl bg-black/30 p-4 shadow-[inset_0_1px_0_rgba(255,255,255,0.08)] backdrop-blur-sm",children:[(0,l.jsx)("div",{className:"jsx-889a974a6a3c4c5 flex flex-wrap items-center gap-2 text-xs sm:text-sm",children:e6.map(e=>(0,l.jsxs)("div",{className:"jsx-889a974a6a3c4c5 rounded-full bg-black/35 px-3 py-1 font-semibold shadow-inner shadow-black/60",children:[e.label,":"," ",(0,l.jsx)("span",{className:"jsx-889a974a6a3c4c5 text-kali-accent",children:e.value})]},e.label))}),(0,l.jsxs)("div",{className:"jsx-889a974a6a3c4c5 mt-3 flex flex-wrap items-center gap-2",children:[(0,l.jsxs)("select",{"aria-label":"Set solitaire variant",value:u,onChange:e=>{let t=e.target.value;(0,i.logEvent)({category:"Solitaire",action:"variant_select",label:t}),g(t)},className:"jsx-889a974a6a3c4c5 "+"".concat(_," px-3 py-1"),children:[(0,l.jsx)("option",{value:"klondike",className:"jsx-889a974a6a3c4c5",children:"Klondike"}),(0,l.jsx)("option",{value:"spider",className:"jsx-889a974a6a3c4c5",children:"Spider"}),(0,l.jsx)("option",{value:"freecell",className:"jsx-889a974a6a3c4c5",children:"FreeCell"})]}),(0,l.jsx)("button",{type:"button",onClick:()=>eP(e,u,!0),title:"Deal the daily seed",className:"jsx-889a974a6a3c4c5 "+(_||""),children:"Daily Deal"}),(0,l.jsx)("button",{type:"button",onClick:()=>{let e=k(j);e?(ev(e),eU(e=>({...e,totalHints:e.totalHints+1})),q("Hint highlighted a possible move")):q("No hints available")},title:"Highlight a playable move",className:"jsx-889a974a6a3c4c5 "+(_||""),children:"Hint"}),(0,l.jsx)("button",{type:"button",onClick:e3,disabled:!e_.length,title:"Undo the last move",className:"jsx-889a974a6a3c4c5 "+(_||""),children:"Undo"}),(0,l.jsx)("button",{type:"button",onClick:tt,disabled:ep,title:"Move all remaining cards to the foundations",className:"jsx-889a974a6a3c4c5 "+(_||""),children:"Auto-complete"}),(0,l.jsx)("button",{type:"button",onClick:e$,title:"Let the solver demonstrate a win",className:"jsx-889a974a6a3c4c5 "+(_||""),children:"Solve"}),(0,l.jsxs)("button",{type:"button",onClick:()=>{let a=1===e?3:1;(0,i.logEvent)({category:"Solitaire",action:"variant_select",label:1===a?"draw1":"draw3"}),t(a)},title:"Toggle draw mode",className:"jsx-889a974a6a3c4c5 "+(_||""),children:["Draw ",1===e?"1":"3"]}),(0,l.jsxs)("button",{type:"button",onClick:()=>{let e=[3,1,1/0],t=e[(e.indexOf(a)+1)%e.length];(0,i.logEvent)({category:"Solitaire",action:"variant_select",label:"passes_".concat(t===1/0?"unlimited":t)}),n(t)},title:"Cycle redeal limit",className:"jsx-889a974a6a3c4c5 "+(_||""),children:["Passes ",a===1/0?"∞":a]}),(0,l.jsxs)("label",{className:"jsx-889a974a6a3c4c5 flex items-center space-x-1 text-xs font-semibold uppercase tracking-wider text-kali-subtle",children:[(0,l.jsx)("input",{type:"checkbox",checked:eb,onChange:e=>em(e.target.checked),"aria-label":"Toggle winnable deals only",className:"jsx-889a974a6a3c4c5"}),(0,l.jsx)("span",{className:"jsx-889a974a6a3c4c5 select-none",children:"Winnable Only"})]}),(0,l.jsx)("button",{type:"button",onClick:()=>eP(e,u,M),title:"Restart this deal",className:"jsx-889a974a6a3c4c5 "+(_||""),children:"Restart"})]})]}),(0,l.jsxs)("div",{className:"jsx-889a974a6a3c4c5 flex flex-wrap items-start gap-4 rounded-xl bg-black/25 p-4 shadow-inner shadow-black/70",children:[(0,l.jsxs)("div",{className:"jsx-889a974a6a3c4c5 flex flex-col items-center gap-2",children:[(0,l.jsx)("span",{className:"jsx-889a974a6a3c4c5 text-[0.7rem] uppercase tracking-widest text-kali-subtle",children:"Stock"}),(0,l.jsx)("div",{role:"button",tabIndex:0,onClick:eW,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),eW())},"aria-label":j.stock.length?"".concat(j.stock.length," cards in stock"):"Empty stock pile",className:"jsx-889a974a6a3c4c5 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus",children:j.stock.length?(0,l.jsx)(C,{card:{...j.stock[j.stock.length-1],faceUp:!1},faceDown:!0,reducedMotion:B,disableFlip:!0,className:eE?"sol-card-shuffle":""}):(0,l.jsx)("div",{"aria-hidden":"true",className:"jsx-889a974a6a3c4c5 sol-slot"})})]}),(0,l.jsxs)("div",{className:"jsx-889a974a6a3c4c5 flex flex-col items-center gap-2",children:[(0,l.jsx)("span",{className:"jsx-889a974a6a3c4c5 text-[0.7rem] uppercase tracking-widest text-kali-subtle",children:"Waste"}),(0,l.jsx)("div",{ref:$,role:"button",tabIndex:j.waste.length?0:-1,"aria-label":j.waste.length?"Waste card ".concat(eH(j.waste[j.waste.length-1])):"Empty waste pile",onKeyDown:e=>{if(j.waste.length){if("Enter"===e.key||" "===e.key){e.preventDefault(),e5("waste",0);return}if("ArrowRight"===e.key||"ArrowDown"===e.key){e.preventDefault();for(let e=0;e<j.tableau.length;e+=1)if(eM(t=>x(t,e))){(0,i.logEvent)({category:"Solitaire",action:"move",label:"keyboard"}),q("Moved waste card to tableau");return}}"ArrowUp"===e.key&&(e.preventDefault(),e5("waste",0))}},onDoubleClick:()=>e5("waste",0),draggable:!!j.waste.length&&ez,onDragStart:e=>eV("waste",-1,j.waste.length-1,e),onDragEnd:eG,onPointerDown:j.waste.length?e9("waste",-1,j.waste.length-1):void 0,className:"jsx-889a974a6a3c4c5 "+"focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus ".concat(R&&"waste"===R.source?"opacity-0":""," ").concat(ex&&"waste"===ex.source?"ring-4 ring-yellow-400/80":""," ").concat(eu&&"waste"===eu.payload.source?"sol-invalid":""),children:j.waste.length?(0,l.jsx)(C,{card:j.waste[j.waste.length-1],reducedMotion:B}):(0,l.jsx)("div",{"aria-hidden":"true",className:"jsx-889a974a6a3c4c5 sol-slot"})})]}),(0,l.jsx)("div",{className:"jsx-889a974a6a3c4c5 ml-auto flex flex-wrap gap-4",children:j.foundations.map((e,t)=>{let a=!!R&&m(j,R,t),n=(null==ei?void 0:ei.type)==="foundation"&&ei.index===t;return(0,l.jsxs)("div",{className:"jsx-889a974a6a3c4c5 flex flex-col items-center gap-2",children:[(0,l.jsxs)("span",{className:"jsx-889a974a6a3c4c5 text-[0.7rem] uppercase tracking-widest text-kali-subtle",children:["Foundation ",t+1]}),(0,l.jsx)("div",{ref:e=>{G.current[t]=e},onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault(),e1(t,en.current)},className:"jsx-889a974a6a3c4c5 "+"focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus ".concat(a?"sol-drop-target":""," ").concat(n?"sol-drop-target-active":""),children:e.length?(0,l.jsx)(C,{card:e[e.length-1],reducedMotion:B,disableFlip:!0}):(0,l.jsx)("div",{"aria-label":"Empty foundation slot ".concat(t+1),className:"jsx-889a974a6a3c4c5 sol-slot"})})]},"f-".concat(t))})})]}),(0,l.jsx)("div",{className:"jsx-889a974a6a3c4c5 flex flex-1 flex-wrap items-start gap-4 rounded-xl bg-black/20 p-4 shadow-inner shadow-black/70",children:j.tableau.map((e,t)=>{let a=!!R&&b(j,R,t),n=(null==ei?void 0:ei.type)==="tableau"&&ei.index===t;return(0,l.jsxs)("div",{ref:e=>{Z.current[t]=e},onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault(),e0(t,en.current)},className:"jsx-889a974a6a3c4c5 "+"relative flex-1 rounded-xl border border-white/5 bg-black/25 px-1 pb-4 pt-2 shadow-[0_18px_30px_rgba(0,0,0,0.45)] ".concat(a?"sol-drop-target":""," ").concat(n?"sol-drop-target-active":""),children:[0===e.length&&(0,l.jsx)("div",{"aria-label":"Empty tableau pile ".concat(t+1),className:"jsx-889a974a6a3c4c5 sol-slot mx-auto"}),e.map((a,n)=>{let r=n===e.length-1,s=p(e.slice(n)),o=ex&&"tableau"===ex.source&&ex.pile===t&&ex.index===n,c=eu&&"tableau"===eu.payload.source&&eu.payload.pile===t&&n>=eu.payload.index;return(0,l.jsx)("div",{style:{top:n*eI,filter:"drop-shadow(0 12px 18px rgba(0,0,0,0.45))"},draggable:s&&ez,onDoubleClick:r?()=>e5("tableau",t):void 0,onDragStart:e=>eV("tableau",t,n,e),onDragEnd:eG,onPointerDown:e9("tableau",t,n),role:a.faceUp&&r?"button":void 0,tabIndex:a.faceUp&&r?0:-1,onKeyDown:a.faceUp&&r?(e=>t=>{let a=j.tableau[e];if(a.length&&a[a.length-1].faceUp){if("Enter"===t.key||" "===t.key||"ArrowUp"===t.key){t.preventDefault(),e5("tableau",e);return}if("ArrowDown"===t.key){t.preventDefault();for(let t=0;t<j.tableau.length;t+=1)if(t!==e&&eM(a=>{let l=a.tableau[e].length;return 0===l?a:v(a,e,l-1,t)})){(0,i.logEvent)({category:"Solitaire",action:"move",label:"keyboard"}),q("Moved tableau card to another pile");return}}}})(t):void 0,"aria-label":a.faceUp&&r?"Tableau ".concat(t+1," card ").concat(eH(a)):void 0,className:"jsx-889a974a6a3c4c5 "+"absolute ".concat(!B?"transition-transform duration-300":""," ").concat(R&&"tableau"===R.source&&R.pile===t&&n>=R.index?"opacity-0":""," ").concat(o?"ring-4 ring-yellow-400/80":""," ").concat(c?"sol-invalid":""),children:(0,l.jsx)(C,{card:a,faceDown:!a.faceUp,reducedMotion:B})},"".concat(a.suit,"-").concat(a.value,"-").concat(n))})]},"t-".concat(t))})})]}),(0,l.jsx)(r(),{id:"889a974a6a3c4c5",children:".sol-card.jsx-889a974a6a3c4c5{width:4.5rem;height:6.5rem;perspective:1200px}.sol-card-inner.jsx-889a974a6a3c4c5{position:relative;width:100%;height:100%;border-radius:.65rem;transform-style:preserve-3d;transition:transform.6s cubic-bezier(.22,1,.36,1);box-shadow:0 18px 36px rgba(0,0,0,.45);background:transparent}.sol-card-back.jsx-889a974a6a3c4c5 .sol-card-inner.jsx-889a974a6a3c4c5{transform:rotatey(180deg)}.sol-card-face.jsx-889a974a6a3c4c5{position:absolute;inset:0;border-radius:.65rem;backface-visibility:hidden;display:flex;flex-direction:column;justify-content:space-between;padding:.55rem}.sol-card-face-front.jsx-889a974a6a3c4c5{background:linear-gradient(145deg,rgba(255,255,255,.95),rgba(234,241,250,.9)),url(".concat("/apps/solitaire/card-front.svg",");background-size:cover}.sol-card-red.jsx-889a974a6a3c4c5 .sol-card-face-front.jsx-889a974a6a3c4c5{color:#fca5a5}.sol-card-black.jsx-889a974a6a3c4c5 .sol-card-face-front.jsx-889a974a6a3c4c5{color:#e2e8f0}.sol-card-face-back.jsx-889a974a6a3c4c5{background:url(").concat("/apps/solitaire/card-back.svg",");background-size:cover;transform:rotatey(180deg)}.sol-card-corner.jsx-889a974a6a3c4c5{font-size:.95rem;font-weight:700;line-height:1.1;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,.35)}.sol-card-corner.jsx-889a974a6a3c4c5 span.jsx-889a974a6a3c4c5:first-child{display:block}.sol-card-corner--bottom.jsx-889a974a6a3c4c5{transform:rotate(180deg)}.sol-card-suit.jsx-889a974a6a3c4c5{font-size:2.6rem;display:flex;align-items:center;justify-content:center;text-shadow:0 8px 16px rgba(0,0,0,.45)}.sol-card-shuffle.jsx-889a974a6a3c4c5 .sol-card-inner.jsx-889a974a6a3c4c5{animation:sol-shuffle.8s ease-in-out}.sol-slot.jsx-889a974a6a3c4c5{width:4.5rem;height:6.5rem;border-radius:.65rem;border:2px dashed rgba(148,210,255,.4);background:rgba(8,16,24,.42);box-shadow:inset 0 0 16px rgba(0,0,0,.5)}.sol-drop-target.jsx-889a974a6a3c4c5{box-shadow:0 0 0 2px rgba(59,130,246,.6),0 0 18px rgba(37,99,235,.55);border-radius:.85rem}.sol-drop-target-active.jsx-889a974a6a3c4c5{box-shadow:0 0 0 2px rgba(250,204,21,.85),0 0 22px rgba(250,204,21,.75)}.sol-invalid.jsx-889a974a6a3c4c5{animation:sol-shake.35s}.sol-confetti.jsx-889a974a6a3c4c5{position:absolute;top:-4%;width:.45rem;height:1.4rem;opacity:0;border-radius:.25rem;animation:sol-confetti-fall 1.8s linear infinite;z-index:45}.sol-victory-overlay.jsx-889a974a6a3c4c5{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,10,18,.78);backdrop-filter:blur(10px);z-index:40}.sol-victory-card.jsx-889a974a6a3c4c5{padding:2rem 2.5rem;border-radius:1.25rem;background:linear-gradient(140deg,rgba(18,52,86,.95),rgba(4,20,36,.95));box-shadow:0 28px 60px rgba(0,0,0,.55);text-align:center;max-width:20rem;border:1px solid rgba(255,255,255,.08)}@keyframes sol-shuffle{0%{transform:rotatey(0deg)translate3d(0,0,0)}30%{transform:rotatey(-12deg)translate3d(-4px,-6px,12px)}60%{transform:rotatey(8deg)translate3d(3px,-10px,-8px)}100%{transform:rotatey(0deg)translate3d(0,0,0)}}@keyframes sol-confetti-fall{0%{opacity:0;transform:translate3d(0,-10vh,0)rotatez(0deg)}10%{opacity:1}100%{opacity:0;transform:translate3d(0,90vh,0)rotatez(360deg)}}@keyframes sol-shake{0%{transform:translate3d(0,0,0)}25%{transform:translate3d(-4px,0,0)}50%{transform:translate3d(4px,0,0)}75%{transform:translate3d(-2px,0,0)}100%{transform:translate3d(0,0,0)}}")})]})}},49096:(e,t,a)=>{"use strict";e.exports=a(37603).style},72552:()=>{},90209:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});var l=a(14232),n=a(74273);function r(){let{reducedMotion:e}=(0,n.useSettings)(),[t,a]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=window.matchMedia("(prefers-reduced-motion: reduce)"),t=()=>a(e.matches);return(t(),"function"==typeof e.addEventListener)?(e.addEventListener("change",t),()=>e.removeEventListener("change",t)):(e.addListener(t),()=>e.removeListener(t))},[]),e||t}}}]);