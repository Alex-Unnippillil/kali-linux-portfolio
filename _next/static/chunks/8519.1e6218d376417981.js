onmessage=async e=>{let{file:t,text:s="",rules:l=[]}=e.data;try{let e=0,a=[];if(t){let s=0,l="";for(;s<t.size;){let r=t.slice(s,s+1048576),o=await r.text(),i=(l+o).split(/\r?\n/);for(let t of(l=i.pop()||"",i))t&&(e++,a.length<10&&a.push(t));s+=1048576}l&&(e++,a.length<10&&a.push(l))}else{let t=s.split(/\r?\n/).filter(Boolean);e=t.length,a=t.slice(0,10)}let r=l.length||1,o=e*r;postMessage({count:o,time:o/1e6,preview:a})}catch(e){postMessage({error:e.message})}},_N_E={};