"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5888],{25888:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c,displayFiglet:()=>u});var l=a(37876),r=a(14232),n=a(63115),s=a(67983);let i=e=>{let{fonts:t,value:a,onChange:n}=e,[s,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)(0),u=(0,r.useRef)(null),g=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(s){let e=e=>{u.current&&!u.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[s]),(0,r.useEffect)(()=>{var e;if(!s)return;let t=null==(e=g.current)?void 0:e.children[o];null==t||t.scrollIntoView({block:"nearest"})},[s,o]),(0,r.useEffect)(()=>{let e=t.findIndex(e=>e.name===a);e>=0&&c(e)},[a,t]);let d=e=>{if(!s){["ArrowDown","ArrowUp","Enter"," "].includes(e.key)&&(i(!0),e.preventDefault());return}"ArrowDown"===e.key?(c(e=>(e+1)%t.length),e.preventDefault()):"ArrowUp"===e.key?(c(e=>(e-1+t.length)%t.length),e.preventDefault()):"Enter"===e.key?(n(t[o].name),i(!1),e.preventDefault()):"Escape"===e.key&&(i(!1),e.preventDefault())};return(0,l.jsxs)("div",{className:"relative",ref:u,children:[(0,l.jsx)("button",{type:"button",className:"px-1 bg-gray-700 text-white min-w-[6rem] text-left","aria-haspopup":"listbox","aria-expanded":s,onClick:()=>i(e=>!e),onKeyDown:d,children:a||"Select font"}),s&&(0,l.jsx)("ul",{role:"listbox",ref:g,tabIndex:-1,className:"absolute z-10 bg-gray-800 text-white max-h-60 overflow-auto w-full",onKeyDown:d,children:t.map((e,t)=>(0,l.jsxs)("li",{role:"option","aria-selected":a===e.name,className:"cursor-pointer px-2 ".concat(t===o?"bg-blue-600":""),style:{height:"24px",lineHeight:"24px",fontFamily:"monospace"},onMouseEnter:()=>c(t),onMouseDown:t=>{t.preventDefault(),n(e.name),i(!1)},children:[(0,l.jsx)("span",{className:"mr-2",children:e.name}),(0,l.jsx)("span",{className:"text-gray-400",children:e.preview.split("\n")[0]})]},e.name))})]})},o=()=>{let[e,t]=(0,r.useState)(""),[o,c]=(0,r.useState)([]),[u,g]=(0,r.useState)(""),[d,p]=(0,r.useState)(!1),[m,x]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[b,v]=(0,r.useState)("dark"),[w,N]=(0,r.useState)(16),[y,j]=(0,r.useState)(1),[k,S]=(0,r.useState)(80),[C,E]=(0,r.useState)("default"),[D,R]=(0,r.useState)(0),[T,A]=(0,r.useState)(0),[F,L]=(0,r.useState)("left"),[U,M]=(0,r.useState)(0),[P,G]=(0,r.useState)(!1),[W,z]=(0,r.useState)(""),I=(0,r.useRef)(null),_=(0,r.useRef)(null),B=(0,r.useRef)(null),K=(0,r.useRef)(null),O=(0,r.useRef)({}),[H,J]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=new URLSearchParams(window.location.search),a=e.get("text");a&&t(a);let l=e.get("font");l&&g(l);let r=Number(e.get("size"));Number.isNaN(r)||N(r);let n=Number(e.get("line"));Number.isNaN(n)||j(n);let s=Number(e.get("width"));Number.isNaN(s)||S(s);let i=e.get("layout");i&&E(i);let o=e.get("align");o&&L(o);let c=Number(e.get("gradient"));Number.isNaN(c)||A(c);let u=Number(e.get("kerning"));Number.isNaN(u)||R(u);let d=Number(e.get("pad"));Number.isNaN(d)||M(d)},[]),(0,r.useEffect)(()=>{if("function"==typeof Worker)return I.current=new Worker(a.tu(new URL(a.p+a.u(2726),a.b))),I.current.onmessage=e=>{var t,a;(null==(t=e.data)?void 0:t.type)==="font"?c(t=>[...t,{name:e.data.font,preview:e.data.preview,mono:e.data.mono}]):(null==(a=e.data)?void 0:a.type)==="render"&&(f(e.data.output),z("Preview updated"),clearTimeout(B.current),B.current=setTimeout(()=>z(""),2e3))},(async()=>{try{var e,t;if(null==(t=navigator)||null==(e=t.storage)?void 0:e.getDirectory){let e=await navigator.storage.getDirectory(),t=await e.getFileHandle("figlet-last-font.json"),a=await t.getFile(),l=JSON.parse(await a.text());l.data&&(O.current[l.font]=l.data,I.current.postMessage({type:"load",name:l.font,data:l.data})),l.font&&g(l.font)}}catch(e){}try{let e=await fetch("/api/figlet/fonts");if(e.ok){let{fonts:t}=await e.json(),a=[];t.forEach(e=>{let{name:t,data:l}=e;a.push(t),O.current[t]=l,I.current.postMessage({type:"load",name:t,data:l})}),a.length&&J(a)}}catch(e){}})(),()=>{var e;null==(e=I.current)||e.terminate(),_.current&&cancelAnimationFrame(_.current),clearTimeout(B.current)}},[]);let $=(0,r.useCallback)(()=>{I.current&&u&&I.current.postMessage({type:"render",text:e,font:u,width:k,layout:C})},[e,u,k,C]);(0,r.useEffect)(()=>(_.current&&cancelAnimationFrame(_.current),_.current=requestAnimationFrame($),()=>cancelAnimationFrame(_.current)),[$]),(0,r.useEffect)(()=>{if(!h)return void x("");let e=h.split("\n").map(e=>e.replace(/\s+$/,"")),t=e.reduce((e,t)=>Math.max(e,t.length),0);x(e.map(e=>{let a=e;if("right"===F)a=" ".repeat(t-e.length)+e;else if("center"===F){let l=Math.floor((t-e.length)/2);a=" ".repeat(l)+e}else if("justify"===F){let l=e.trim().split(/ +/);if(l.length>1){let e=t-l.reduce((e,t)=>e+t.length,0),r=l.length-1,n=Math.floor(e/r),s=e%r;a=l.map((e,t)=>e+(t<r?" ".repeat(n+ +(t<s)):"")).join("")}}return" ".repeat(U)+a}).join("\n"))},[h,F,U]);let q=async e=>{var t,a;let l=null==(t=e.target.files)?void 0:t[0];if(!l)return;let r=l.name.replace(/\.flf$/i,""),n=await l.text();O.current[r]=n,null==(a=I.current)||a.postMessage({type:"load",name:r,data:n}),g(r),e.target.value=""},V=o.filter(e=>!d||e.mono);return(0,r.useEffect)(()=>{o.length&&!u&&g(o[0].name)},[o,u]),(0,r.useEffect)(()=>{u&&o.find(e=>e.name===u)&&$()},[o,u,$]),(0,r.useEffect)(()=>{let t=new URLSearchParams;e&&t.set("text",e),u&&t.set("font",u),16!==w&&t.set("size",String(w)),1!==y&&t.set("line",String(y)),80!==k&&t.set("width",String(k)),"default"!==C&&t.set("layout",C),"left"!==F&&t.set("align",F),0!==U&&t.set("pad",String(U)),0!==T&&t.set("gradient",String(T)),0!==D&&t.set("kerning",String(D));let a=t.toString();history.replaceState(null,"","".concat(location.pathname).concat(a?"?".concat(a):""))},[e,u,w,y,k,C,F,T,D,U]),(0,r.useEffect)(()=>{var e,t;u&&(null==(t=navigator)||null==(e=t.storage)?void 0:e.getDirectory)&&(async()=>{try{let e=await navigator.storage.getDirectory(),t=await e.getFileHandle("figlet-last-font.json",{create:!0}),a=await t.createWritable(),l=O.current[u]?{font:u,data:O.current[u]}:{font:u};await a.write(JSON.stringify(l)),await a.close()}catch(e){}})()},[u]),(0,l.jsxs)("div",{className:"flex flex-col h-full w-full bg-ub-cool-grey text-white font-mono",children:[(0,l.jsxs)("div",{className:"p-2 flex flex-wrap gap-2 bg-ub-gedit-dark items-center",children:[(0,l.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:[(0,l.jsx)("input",{type:"checkbox",checked:d,onChange:()=>p(e=>!e),"aria-label":"Show monospace fonts only"}),"Monospace only"]}),(0,l.jsx)(i,{fonts:V,value:u,onChange:g}),(0,l.jsx)("input",{type:"file",accept:".flf",onChange:q,className:"text-sm","aria-label":"Upload font"}),H.length>0&&(0,l.jsxs)("select",{value:"",onChange:e=>g(e.target.value),className:"px-1 bg-gray-700 text-white","aria-label":"Select uploaded font",children:[(0,l.jsx)("option",{value:"",disabled:!0,children:"Uploaded Fonts"}),H.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]}),(0,l.jsx)("input",{type:"text",className:"flex-1 px-2 bg-gray-700 text-white",placeholder:"Type here",value:e,onChange:e=>t(e.target.value),"aria-label":"Text to convert"}),(0,l.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:["Size",(0,l.jsx)("input",{type:"range",min:"8",max:"72",value:w,onChange:e=>N(Number(e.target.value)),"aria-label":"Font size"})]}),(0,l.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:["Line",(0,l.jsx)("input",{type:"range",min:"0.8",max:"2",step:"0.1",value:y,onChange:e=>j(Number(e.target.value)),"aria-label":"Line height"})]}),(0,l.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:["Width",(0,l.jsx)("input",{type:"number",min:"20",max:"200",value:k,onChange:e=>S(Number(e.target.value)),className:"w-16 px-1 bg-gray-700 text-white","aria-label":"Width"})]}),(0,l.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:["Layout",(0,l.jsxs)("select",{value:C,onChange:e=>E(e.target.value),className:"px-1 bg-gray-700 text-white","aria-label":"Layout",children:[(0,l.jsx)("option",{value:"default",children:"Default"}),(0,l.jsx)("option",{value:"full",children:"Full"}),(0,l.jsx)("option",{value:"fitted",children:"Fitted"}),(0,l.jsx)("option",{value:"smush",children:"Smush"})]})]}),(0,l.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:["Gradient",(0,l.jsx)("input",{type:"range",min:"0",max:"360",value:T,onChange:e=>A(Number(e.target.value)),"aria-label":"Gradient hue"})]}),(0,l.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:["Kerning",(0,l.jsx)("input",{type:"range",min:"-2",max:"10",step:"0.1",value:D,onChange:e=>R(Number(e.target.value)),"aria-label":"Kerning"})]}),(0,l.jsx)(s.default,{align:F,setAlign:L,padding:U,setPadding:M}),(0,l.jsx)("button",{onClick:()=>G(e=>!e),className:"px-2 bg-gray-700 hover:bg-gray-600 rounded text-white","aria-label":"Toggle wrap",children:P?"No Wrap":"Wrap"}),(0,l.jsx)("button",{onClick:()=>{K.current&&((()=>{if(!K.current)return;let e=window.getSelection();if(!e)return;let t=document.createRange();t.selectNodeContents(K.current),e.removeAllRanges(),e.addRange(t)})(),navigator.clipboard.writeText(K.current.textContent||""),z("Copied to clipboard"),clearTimeout(B.current),B.current=setTimeout(()=>z(""),2e3))},className:"px-2 bg-blue-700 hover:bg-blue-600 rounded text-white","aria-label":"Copy all",children:"Copy All"}),(0,l.jsx)("button",{onClick:()=>{K.current&&(0,n.toPng)(K.current).then(e=>{let t=document.createElement("a");t.download="figlet.png",t.href=e,t.click(),z("Downloaded PNG"),clearTimeout(B.current),B.current=setTimeout(()=>z(""),2e3)}).catch(()=>{})},className:"px-2 bg-green-700 hover:bg-green-600 rounded text-white","aria-label":"Export PNG",children:"PNG"}),(0,l.jsx)("button",{onClick:()=>{if(!m)return;let e=new Blob([m],{type:"text/plain"}),t=URL.createObjectURL(e),a=document.createElement("a");a.download="figlet.txt",a.href=t,a.click(),URL.revokeObjectURL(t),z("Downloaded text"),clearTimeout(B.current),B.current=setTimeout(()=>z(""),2e3)},className:"px-2 bg-purple-700 hover:bg-purple-600 rounded text-white","aria-label":"Export text file",children:"TXT"}),(0,l.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:["Theme",(0,l.jsxs)("select",{value:b,onChange:e=>v(e.target.value),className:"px-1 bg-gray-700 text-white","aria-label":"Theme",children:[(0,l.jsx)("option",{value:"dark",children:"Green on Black"}),(0,l.jsx)("option",{value:"light",children:"Black on Green"})]})]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-auto",children:(0,l.jsx)("pre",{ref:K,className:"min-w-full p-2 font-mono transition-colors motion-reduce:transition-none ".concat(P?"whitespace-pre-wrap break-words":"whitespace-pre"),style:{fontSize:"".concat(w,"px"),lineHeight:y,letterSpacing:"".concat(D,"px"),..."light"===b?{backgroundColor:"#0f0",color:"#000"}:{backgroundColor:"#000",backgroundImage:"linear-gradient(to right, hsl(".concat(T,",100%,50%), hsl(").concat((T+120)%360,",100%,50%))"),WebkitBackgroundClip:"text",color:"transparent"}},children:m})}),(0,l.jsxs)("div",{className:"p-2 text-xs text-right",children:["About this feature:"," ",(0,l.jsx)("a",{href:"http://www.figlet.org/",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"FIGlet"})]}),(0,l.jsx)("div",{"aria-live":"polite",className:"sr-only",children:W})]})},c=o,u=()=>(0,l.jsx)(o,{})},67983:(e,t,a)=>{a.d(t,{default:()=>r});var l=a(37876);a(14232);let r=e=>{let{align:t,setAlign:a,padding:r,setPadding:n}=e;return(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide",children:["Align",(0,l.jsxs)("select",{value:t,onChange:e=>a(e.target.value),className:"rounded border border-black/40 bg-gray-800 px-2 py-1 text-white","aria-label":"Alignment",children:[(0,l.jsx)("option",{value:"left",children:"Left"}),(0,l.jsx)("option",{value:"center",children:"Center"}),(0,l.jsx)("option",{value:"right",children:"Right"}),(0,l.jsx)("option",{value:"justify",children:"Justify"})]}),(0,l.jsxs)("label",{className:"flex items-center gap-2",children:["Padding",(0,l.jsx)("input",{type:"number",min:"0",value:r,onChange:e=>n(Number(e.target.value)),className:"w-16 rounded border border-black/40 bg-gray-800 px-2 py-1 text-white","aria-label":"Padding"})]})]})}}}]);