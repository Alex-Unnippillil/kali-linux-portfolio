"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1885],{27528:(e,a,t)=>{t.d(a,{safeLocalStorage:()=>l});let l=t(57613).hasStorage?localStorage:void 0},31730:(e,a,t)=>{t.d(a,{hasIndexedDB:()=>r,isBrowser:()=>l});let l="undefined"!=typeof document,r=l&&"undefined"!=typeof indexedDB},56187:(e,a,t)=>{t.d(a,{default:()=>n});var l=t(37876);t(14232);let r={background:"radial-gradient(circle at 20% 20%, rgba(16, 80, 122, 0.9) 0%, rgba(3, 20, 33, 0.94) 45%, rgba(0, 7, 14, 0.98) 100%)"},s={background:"radial-gradient(circle at center, rgba(23, 147, 209, 0.4) 0%, rgba(3, 20, 33, 0) 60%)",mixBlendMode:"screen"},i={backgroundImage:"linear-gradient(120deg, rgba(23,147,209,0.15) 25%, transparent 25%), linear-gradient(240deg, rgba(23,147,209,0.08) 25%, transparent 25%)",backgroundSize:"60px 60px",opacity:.18};function c(e){let{className:a=""}=e;return(0,l.jsx)("svg",{className:"pointer-events-none text-cyan-300/80 drop-shadow-[0_0_25px_rgba(23,147,209,0.55)] ".concat(a),viewBox:"0 0 512 512",role:"img","aria-label":"Stylized Kali dragon",focusable:"false",children:(0,l.jsx)("path",{fill:"currentColor",d:"M256 62c-63 0-117 31-152 80 69-21 121 12 150 38 23 21 29 44 12 79-22 41-85 41-132 19 19 63 86 112 166 112 101 0 178-77 178-178 0-14-1-29-5-43 25 20 42 49 50 81 18 76-29 163-113 208l50 26-14 36-112-60c-101-12-187-84-212-174-28-102 26-216 132-246 34-10 70-14 102-4l-36 74c-4-1-9-2-14-2z"})})}let n=function(e){let{className:a="",showDragon:t=!0}=e;return(0,l.jsxs)("div",{className:"relative h-full w-full overflow-hidden ".concat(a),"aria-hidden":"true",children:[(0,l.jsx)("div",{className:"absolute inset-0",style:r}),(0,l.jsx)("div",{className:"absolute inset-0",style:i}),(0,l.jsx)("div",{className:"absolute inset-0",style:s}),t&&(0,l.jsx)(c,{className:"absolute left-1/2 top-1/2 h-[55%] max-h-[420px] w-auto -translate-x-1/2 -translate-y-1/2"}),(0,l.jsx)("div",{className:"absolute inset-0",style:{background:"linear-gradient(to bottom, rgba(3, 8, 15, 0.35) 0%, rgba(3, 8, 15, 0.75) 100%)"}})]})}},57613:(e,a,t)=>{t.d(a,{hasStorage:()=>r,isBrowser:()=>l.isBrowser});var l=t(31730);let r="undefined"!=typeof localStorage},71885:(e,a,t)=>{t.r(a),t.d(a,{Settings:()=>o,default:()=>d,displaySettings:()=>u});var l=t(37876),r=t(14232),s=t(74273),i=t(49276),c=t(79746),n=t(56187);function o(){let{accent:e,setAccent:a,wallpaper:t,setWallpaper:o,useKaliWallpaper:d,setUseKaliWallpaper:u,density:f,setDensity:x,reducedMotion:m,setReducedMotion:p,largeHitAreas:b,setLargeHitAreas:g,fontScale:h,setFontScale:k,highContrast:v,setHighContrast:y,pongSpin:j,setPongSpin:N,allowNetwork:w,setAllowNetwork:S,haptics:C,setHaptics:A,theme:I,setTheme:L}=(0,s.useSettings)(),[R,E]=(0,r.useState)(0),O=(0,r.useRef)(null),F=(0,r.useRef)(null),B=e=>{let a=parseInt(e=e.replace("#",""),16);return{r:a>>16&255,g:a>>8&255,b:255&a}},M=e=>{let{r:a,g:t,b:l}=e,r=[a,t,l].map(e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4));return .2126*r[0]+.7152*r[1]+.0722*r[2]},_=(0,r.useCallback)((e,a)=>{let t=M(B(e))+.05,l=M(B(a))+.05;return t>l?t/l:l/t},[]),z=(0,r.useCallback)(()=>_(e,"#000000")>_(e,"#ffffff")?"#000000":"#ffffff",[e,_]);return(0,r.useEffect)(()=>{let a=requestAnimationFrame(()=>{let a=_(e,z());if(E(a),O.current){let e="Contrast ratio ".concat(a.toFixed(2),":1 ").concat(a>=4.5?"passes":"fails");O.current.textContent=e}});return()=>cancelAnimationFrame(a)},[e,z,_]),(0,l.jsxs)("div",{className:"w-full flex-col flex-grow z-20 max-h-full overflow-y-auto windowMainScreen select-none bg-kali-surface text-kali-text",children:[(0,l.jsx)("div",{className:"md:w-2/5 w-2/3 h-1/3 m-auto my-4 relative overflow-hidden rounded-lg shadow-inner",children:d?(0,l.jsx)(n.default,{}):(0,l.jsx)("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url(/wallpapers/".concat(t,".webp)")},"aria-hidden":"true"})}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-3 my-4",children:[(0,l.jsx)("label",{className:"text-kali-text/80 text-sm",children:"Theme"}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["default","dark","neon","matrix"].map(e=>(0,l.jsxs)("button",{type:"button",onClick:()=>L(e),className:"flex flex-col items-center gap-2 rounded-lg border px-3 py-3 text-xs uppercase tracking-wide transition-colors ".concat(I===e?"border-kali-primary/80 bg-kali-surface-raised text-kali-primary":"border-kali-border/60 bg-kali-surface-muted text-kali-text/70 hover:border-kali-focus/60"),"aria-pressed":I===e,children:[(0,l.jsx)("span",{className:"h-10 w-16 rounded-md border ".concat("default"===e?"bg-gray-100 border-gray-200":"dark"===e?"bg-gray-900 border-gray-700":"neon"===e?"bg-black border-fuchsia-500/60":"bg-black border-green-500/60")}),(0,l.jsx)("span",{children:e})]},e))})]}),(0,l.jsx)("div",{className:"flex justify-center my-4",children:(0,l.jsxs)("label",{className:"mr-2 text-kali-text/80 flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:d,onChange:e=>u(e.target.checked),className:"mr-2","aria-label":"Enable Kali gradient wallpaper"}),"Kali Gradient Wallpaper"]})}),d&&(0,l.jsx)("p",{className:"text-center text-xs text-kali-text/70 px-6 -mt-2 mb-4",children:"Your previous wallpaper selection is preserved for when you turn this off."}),(0,l.jsxs)("div",{className:"flex justify-center my-4",children:[(0,l.jsx)("label",{className:"mr-2 text-kali-text/80",id:"accent-picker-label",children:"Accent:"}),(0,l.jsx)("div",{"aria-labelledby":"accent-picker-label",role:"radiogroup",className:"flex gap-2",children:s.ACCENT_OPTIONS.map(t=>(0,l.jsx)("button",{"aria-label":"select-accent-".concat(t),role:"radio","aria-checked":e===t,onClick:()=>a(t),className:"w-8 h-8 rounded-full border-2 ".concat(e===t?"border-white":"border-transparent"),style:{backgroundColor:t}},t))})]}),(0,l.jsxs)("div",{className:"flex justify-center my-4",children:[(0,l.jsx)("label",{htmlFor:"density-select",className:"mr-2 text-kali-text/80",children:"Density:"}),(0,l.jsxs)("select",{id:"density-select",value:f,onChange:e=>x(e.target.value),className:"bg-kali-surface-muted text-kali-text px-2 py-1 rounded-md border border-kali-border/70 transition-colors hover:border-kali-focus/60 focus-visible:ring-2 focus-visible:ring-kali-focus focus-visible:ring-offset-2 focus-visible:ring-offset-kali-surface",children:[(0,l.jsx)("option",{value:"regular",children:"Regular"}),(0,l.jsx)("option",{value:"compact",children:"Compact"})]})]}),(0,l.jsxs)("div",{className:"flex justify-center my-4",children:[(0,l.jsx)("label",{htmlFor:"font-scale-slider",className:"mr-2 text-kali-text/80",children:"Font Size:"}),(0,l.jsx)("input",{id:"font-scale-slider",type:"range",min:"0.75",max:"1.5",step:"0.05",value:h,onChange:e=>k(parseFloat(e.target.value)),className:"kali-slider focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-kali-focus focus-visible:ring-offset-2 focus-visible:ring-offset-kali-surface","aria-label":"Adjust font scale"})]}),(0,l.jsx)("div",{className:"flex justify-center my-4",children:(0,l.jsxs)("label",{className:"mr-2 text-kali-text/80 flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:m,onChange:e=>p(e.target.checked),className:"mr-2","aria-label":"Enable reduced motion"}),"Reduced Motion"]})}),(0,l.jsx)("div",{className:"flex justify-center my-4",children:(0,l.jsxs)("label",{className:"mr-2 text-kali-text/80 flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:b,onChange:e=>g(e.target.checked),className:"mr-2","aria-label":"Enable large hit areas"}),"Large Hit Areas"]})}),(0,l.jsx)("div",{className:"flex justify-center my-4",children:(0,l.jsxs)("label",{className:"mr-2 text-kali-text/80 flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:v,onChange:e=>y(e.target.checked),className:"mr-2","aria-label":"Enable high contrast mode"}),"High Contrast"]})}),(0,l.jsx)("div",{className:"flex justify-center my-4",children:(0,l.jsxs)("label",{className:"mr-2 text-kali-text/80 flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:w,onChange:e=>S(e.target.checked),className:"mr-2","aria-label":"Allow simulated network requests"}),"Allow Network Requests"]})}),(0,l.jsx)("div",{className:"flex justify-center my-4",children:(0,l.jsxs)("label",{className:"mr-2 text-kali-text/80 flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:C,onChange:e=>A(e.target.checked),className:"mr-2","aria-label":"Enable haptics"}),"Haptics"]})}),(0,l.jsx)("div",{className:"flex justify-center my-4",children:(0,l.jsxs)("label",{className:"mr-2 text-kali-text/80 flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:j,onChange:e=>N(e.target.checked),className:"mr-2","aria-label":"Enable pong spin"}),"Pong Spin"]})}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-3 my-4 border-t border-kali-border/60 pt-4",children:[(0,l.jsx)("p",{className:"text-sm text-kali-text/70",children:"Launcher"}),(0,l.jsx)("button",{onClick:()=>{window.confirm("Clear launcher suggested apps?")&&(0,c.writeRecentAppIds)([])},className:"px-4 py-2 rounded-md bg-kali-surface-raised text-kali-text/80 transition-colors hover:bg-kali-surface-muted focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus",children:"Clear Suggested Apps"})]}),(0,l.jsx)("div",{className:"flex justify-center my-4",children:(0,l.jsxs)("div",{className:"p-4 rounded-lg border border-kali-border/60 bg-kali-surface-raised text-kali-text transition-colors duration-300 motion-reduce:transition-none",children:[(0,l.jsx)("p",{className:"mb-2 text-center",children:"Preview"}),(0,l.jsx)("button",{className:"px-2 py-1 rounded",style:{backgroundColor:e,color:z()},children:"Accent"}),(0,l.jsx)("p",{className:"mt-2 text-sm text-center ".concat(R>=4.5?"text-kali-primary":"text-kali-error"),children:"Contrast ".concat(R.toFixed(2),":1 ").concat(R>=4.5?"Pass":"Fail")}),(0,l.jsx)("span",{ref:O,role:"status","aria-live":"polite",className:"sr-only"})]})}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4 border-t border-kali-border/60 pt-6",children:[(0,l.jsx)("p",{className:"text-sm text-kali-text/70",children:"Wallpaper Selector"}),(0,l.jsx)("div",{className:"flex flex-wrap justify-center items-center",children:["wall-1","wall-2","wall-3","wall-4","wall-5","wall-6","wall-7","wall-8"].map(e=>(0,l.jsx)("button",{type:"button","aria-label":"Select ".concat(e.replace("wall-","wallpaper ")),"aria-pressed":e===t,onClick:()=>{o(e)},className:"md:m-3 m-2 outline-none border-4 rounded-lg transition-colors duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus ".concat(e===t?"border-kali-primary/80 ring-2 ring-kali-primary/40 ring-offset-2 ring-offset-kali-surface":"border-transparent hover:border-kali-focus/40"),children:(0,l.jsx)("img",{src:"/wallpapers/".concat(e,".webp"),alt:e.replace("wall-","Wallpaper "),className:"h-24 w-36 object-cover rounded"})},e))})]}),(0,l.jsxs)("div",{className:"flex justify-center my-4 border-t border-kali-border/60 pt-4 space-x-4",children:[(0,l.jsx)("button",{onClick:async()=>{let e=new Blob([await (0,i.exportSettings)()],{type:"application/json"}),a=URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download="settings.json",t.click(),URL.revokeObjectURL(a)},className:"px-4 py-2 rounded-md bg-kali-primary text-kali-inverse transition-colors hover:bg-kali-primary/90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus",children:"Export Settings"}),(0,l.jsx)("button",{onClick:()=>F.current&&F.current.click(),className:"px-4 py-2 rounded-md bg-kali-primary text-kali-inverse transition-colors hover:bg-kali-primary/90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus",children:"Import Settings"}),(0,l.jsx)("button",{onClick:async()=>{window.confirm("Reset desktop personalization and settings?")&&(await (0,i.resetSettings)(),a(i.defaults.accent),o(i.defaults.wallpaper),u(i.defaults.useKaliWallpaper),x(i.defaults.density),p(i.defaults.reducedMotion),g(i.defaults.largeHitAreas),k(i.defaults.fontScale),y(i.defaults.highContrast),N(i.defaults.pongSpin),S(i.defaults.allowNetwork),A(i.defaults.haptics),L("default"))},className:"px-4 py-2 rounded-md bg-kali-primary text-kali-inverse transition-colors hover:bg-kali-primary/90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus",children:"Reset Desktop"})]}),(0,l.jsx)("input",{type:"file",accept:"application/json",ref:F,onChange:async e=>{let t=e.target.files&&e.target.files[0];if(!t)return;let l=await t.text();await (0,i.importSettings)(l);try{let e=JSON.parse(l);void 0!==e.accent&&a(e.accent),void 0!==e.wallpaper&&o(e.wallpaper),void 0!==e.useKaliWallpaper&&u(e.useKaliWallpaper),void 0!==e.density&&x(e.density),void 0!==e.reducedMotion&&p(e.reducedMotion),void 0!==e.largeHitAreas&&g(e.largeHitAreas),void 0!==e.pongSpin&&N(e.pongSpin),void 0!==e.allowNetwork&&S(e.allowNetwork),void 0!==e.haptics&&A(e.haptics),void 0!==e.highContrast&&y(e.highContrast),void 0!==e.theme&&L(e.theme)}catch(e){console.error("Invalid settings",e)}e.target.value=""},className:"hidden","aria-label":"Import settings JSON file"})]})}let d=o,u=()=>(0,l.jsx)(o,{children:" "})},79746:(e,a,t)=>{t.d(a,{addRecentApp:()=>d,readRecentAppIds:()=>n,writeRecentAppIds:()=>o});var l=t(27528);let r="kali-recent",s="recentApps",i=e=>{if(!e)return[];try{let a=JSON.parse(e);if(!Array.isArray(a))return[];return a.filter(e=>"string"==typeof e)}catch(e){return[]}},c=()=>{if(!l.safeLocalStorage)return[];let e=l.safeLocalStorage.getItem(r);if(null!==e)return i(e);let a=l.safeLocalStorage.getItem(s);if(null===a)return[];let t=i(a).slice(0,20);try{l.safeLocalStorage.setItem(r,JSON.stringify(t)),l.safeLocalStorage.removeItem(s)}catch(e){}return t},n=()=>{if(!l.safeLocalStorage)return[];let e=c();return e.length>0||null!==l.safeLocalStorage.getItem(r)?e:[]},o=e=>{if(l.safeLocalStorage)try{l.safeLocalStorage.setItem(r,JSON.stringify(e.filter(e=>"string"==typeof e).slice(0,20)))}catch(e){}},d=e=>{if(!l.safeLocalStorage||!e)return[];let a=[e,...c().filter(a=>a!==e)].slice(0,20);try{l.safeLocalStorage.setItem(r,JSON.stringify(a))}catch(e){}return a}}}]);