"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7966],{27966:(e,t,r)=>{r.r(t),r.d(t,{default:()=>P});var a=r(37876),n=r(14232),l=r(69241),s=r(70994),c=r(95220),i=r(90209),o=r(67817),d=r(41058);let u=()=>Array.from({length:6},()=>Array(7).fill(null)),f=(e,t)=>{for(let r=5;r>=0;r--)if(!e[r][t])return r;return -1},x=(e,t)=>{let r=[{dr:0,dc:1},{dr:1,dc:0},{dr:1,dc:1},{dr:1,dc:-1}];for(let a=0;a<6;a++)for(let n=0;n<7;n++)if(e[a][n]===t)for(let{dr:l,dc:s}of r){let r=0;for(let c=0;c<4;c++){let i=a+l*c,o=n+s*c;if(i<0||i>=6||o<0||o>=7||e[i][o]!==t)break;r++}if(4===r)return!0}return!1},y=(e,t)=>{let r="red"===t?"yellow":"red",a=0,n=e.filter(e=>e===t).length,l=e.filter(e=>e===r).length,s=e.filter(e=>null===e).length;return 4===n?a+=100:3===n&&1===s?a+=5:2===n&&2===s&&(a+=2),3===l&&1===s&&(a-=4),a},h=(e,t)=>{let r,a=Math.floor(3.5);r=0+3*e.map(e=>e[a]).filter(e=>e===t).length;for(let a=0;a<6;a++)for(let n=0;n<4;n++)r+=y(e[a].slice(n,n+4),t);for(let a=0;a<7;a++)for(let n=0;n<3;n++)r+=y([e[n][a],e[n+1][a],e[n+2][a],e[n+3][a]],t);for(let a=0;a<3;a++)for(let n=0;n<4;n++)r+=y([e[a][n],e[a+1][n+1],e[a+2][n+2],e[a+3][n+3]],t);for(let a=3;a<6;a++)for(let n=0;n<4;n++)r+=y([e[a][n],e[a-1][n+1],e[a-2][n+2],e[a-3][n+3]],t);return r},g=e=>{let t=[];for(let r=0;r<7;r++)e[0][r]||t.push(r);return t},p=e=>{let t=Math.floor(3.5);return[...e].sort((e,r)=>Math.abs(e-t)-Math.abs(r-t)||e-r)},m=function(e,t,r,a,n){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Map,s="".concat(n?"M":"m",":").concat(t,":").concat(e.map(e=>e.map(e=>"red"===e?"r":"yellow"===e?"y":"_").join("")).join("|")),c=l.get(s);if(c&&c.depth>=t)return{column:c.column,score:c.score};let i=g(e),o=x(e,"red")||x(e,"yellow")||0===i.length;if(0===t||o){let r=h(e,"red");return x(e,"red")&&(r=1e6),x(e,"yellow")&&(r=-1e6),l.set(s,{depth:t,score:r}),{score:r}}if(n){let n=-1/0,c=i[0];for(let s of p(i)){let i=f(e,s),o=e.map(e=>[...e]);o[i][s]="red";let d=m(o,t-1,r,a,!1,l).score;if(d>n&&(n=d,c=s),(r=Math.max(r,n))>=a)break}let o={column:c,score:n};return l.set(s,{depth:t,score:n,column:c}),o}let d=1/0,u=i[0];for(let n of p(i)){let s=f(e,n),c=e.map(e=>[...e]);c[s][n]="yellow";let i=m(c,t-1,r,a,!0,l).score;if(i<d&&(d=i,u=n),r>=(a=Math.min(a,d)))break}let y={column:u,score:d};return l.set(s,{depth:t,score:d,column:u}),y};var b=r(65422);let w={default:{label:"Blue/Orange",tokens:{red:{label:"Blue",primary:"#3b82f6",secondary:"#1d4ed8",highlight:"#93c5fd"},yellow:{label:"Orange",primary:"#fb923c",secondary:"#c2410c",highlight:"#fed7aa"}},hints:{positive:[34,197,94],negative:[239,68,68]}},protanopia:{label:"Teal/Gold",tokens:{red:{label:"Teal",primary:"#14b8a6",secondary:"#0f766e",highlight:"#99f6e4"},yellow:{label:"Gold",primary:"#f59e0b",secondary:"#b45309",highlight:"#fde68a"}},hints:{positive:[20,184,166],negative:[245,158,11]}},deuteranopia:{label:"Purple/Sand",tokens:{red:{label:"Purple",primary:"#8b5cf6",secondary:"#5b21b6",highlight:"#ddd6fe"},yellow:{label:"Sand",primary:"#fbbf24",secondary:"#b45309",highlight:"#fef3c7"}},hints:{positive:[139,92,246],negative:[251,191,36]}},tritanopia:{label:"Magenta/Cyan",tokens:{red:{label:"Magenta",primary:"#ec4899",secondary:"#9d174d",highlight:"#fbcfe8"},yellow:{label:"Cyan",primary:"#06b6d4",secondary:"#0e7490",highlight:"#cffafe"}},hints:{positive:[6,182,212],negative:[236,72,153]}}},v={red:0,yellow:0,draws:0,games:0,matchWinner:null},j={cpu:{easy:{wins:0,losses:0,draws:0,streak:0},normal:{wins:0,losses:0,draws:0,streak:0},hard:{wins:0,losses:0,draws:0,streak:0}},local:{redWins:0,yellowWins:0,draws:0}},k=e=>"red"===e?"yellow":"red",N=e=>e.map(e=>e.slice()),C=e=>"cpu"===e||"local"===e,M=e=>"red"===e||"yellow"===e,S=e=>"boolean"==typeof e,E=e=>"single"===e||"best_of_3"===e,_=e=>!!(e&&"object"==typeof e&&"number"==typeof e.red&&"number"==typeof e.yellow&&"number"==typeof e.draws&&"number"==typeof e.games),R=e=>!!(e&&"object"==typeof e&&e.cpu&&e.local),W={red:"radial-gradient(circle at 25% 25%, rgba(255,255,255,0.7) 0 18%, transparent 20%)",yellow:"repeating-linear-gradient(45deg, rgba(255,255,255,0.6) 0 4px, transparent 4px 8px)"};function A(e){var t;let{windowMeta:x}=e,y=null==(t=null==x?void 0:x.isFocused)||t,A=(0,i.default)(),P=(0,o.default)(),{difficulty:z,assists:O,setDifficulty:L,setAssists:F,palette:G,setPalette:T,highContrast:K,setHighContrast:B,quality:D,setQuality:H}=(0,d.useSettings)(),I=Number.isFinite(D)?D:1,[U,q]=(0,c.default)("connect_four:mode","cpu",C),[Y,J]=(0,c.default)("connect_four:human_token","yellow",M),[Q,V]=(0,c.default)("connect_four:human_starts",!0,S),[X,Z]=(0,c.default)("connect_four:match_mode","single",E),[$,ee]=(0,c.default)("connect_four:match_state",v,_),[et,er]=(0,c.default)("connect_four:stats",j,R),[ea,en]=(0,c.default)("connect_four:confirm_move",P,S),[el,es]=(0,c.default)("connect_four:show_patterns",!1,S),ec=(0,n.useMemo)(()=>k(Y),[Y]),ei=(0,n.useMemo)(()=>{var e;return null!=(e=w[G])?e:w.default},[G]),eo=(0,n.useMemo)(()=>({red:ei.tokens.red.label,yellow:ei.tokens.yellow.label}),[ei]),ed=(0,n.useCallback)(()=>"local"===U?"red":Q?Y:ec,[ec,Q,Y,U]),[eu,ef]=(0,n.useState)(()=>u()),[ex,ey]=(0,n.useState)(()=>ed()),[eh,eg]=(0,n.useState)(null),[ep,em]=(0,n.useState)([]),[eb,ew]=(0,n.useState)([]),[ev,ej]=(0,n.useState)(3),[ek,eN]=(0,n.useState)(null),[eC,eM]=(0,n.useState)(()=>Array(7).fill(null)),[eS,eE]=(0,n.useState)(!1),[e_,eR]=(0,n.useState)(null),[eW,eA]=(0,n.useState)(!1),[eP,ez]=(0,n.useState)(""),eO=(0,n.useRef)(eu),eL=(0,n.useRef)(ex),eF=(0,n.useRef)(eh),eG=(0,n.useRef)(ep),eT=(0,n.useRef)(0),eK=(0,n.useRef)(null),eB=(0,n.useRef)(null),eD=(0,n.useRef)(0),eH=(0,n.useRef)(null),eI=(0,n.useRef)(null),eU=(0,n.useRef)({cellSize:44,gap:6,slot:50,boardWidth:344,boardHeight:294}),[eq,eY]=(0,n.useState)(eU.current),eJ=(0,n.useId)(),eQ=(0,n.useId)(),eV=(0,n.useRef)(!1);(0,n.useEffect)(()=>{eO.current=eu},[eu]),(0,n.useEffect)(()=>{eL.current=ex},[ex]),(0,n.useEffect)(()=>{eF.current=eh},[eh]),(0,n.useEffect)(()=>{eG.current=ep},[ep]),(0,n.useEffect)(()=>{eU.current=eq},[eq]),(0,n.useEffect)(()=>{if(!eI.current)return;let e=()=>{if(!eI.current)return;let e=eI.current.getBoundingClientRect().width;if(!e)return;let t=Math.min(Math.max(Math.floor((Math.max(0,e-16)-36)/7),32),64);eY({cellSize:t,gap:6,slot:t+6,boardWidth:7*t+36,boardHeight:6*t+30})};e();let t=null;return"undefined"!=typeof ResizeObserver?(t=new ResizeObserver(e)).observe(eI.current):window.addEventListener("resize",e),()=>{t?t.disconnect():window.removeEventListener("resize",e)}},[]),(0,n.useEffect)(()=>{y||eN(null)},[y]);let eX=(0,n.useCallback)(()=>{eD.current&&cancelAnimationFrame(eD.current),eD.current=0,eB.current=null,eH.current=null,eR(null)},[]),eZ=(0,n.useCallback)(()=>{eT.current+=1,eX(),ef(u()),ey(ed()),eg(null),em([]),ew([]),ej(3),eN(null),eE(!1),eA(!1)},[eX,ed]),e$=(0,n.useCallback)(()=>{ee(v),eZ()},[eZ,ee]);(0,n.useEffect)(()=>{eZ()},[U,Y,Q,eZ]);let e0=(0,n.useCallback)(e=>{Z(e),ee(v)},[Z,ee]),e1=(0,n.useCallback)((e,t,r)=>{let a=N(eO.current);a[t][e]=r,ef(a);let n=((e,t)=>{let r=[{dr:0,dc:1},{dr:1,dc:0},{dr:1,dc:1},{dr:1,dc:-1}];for(let a=0;a<6;a++)for(let n=0;n<7;n++)if(e[a][n]===t)for(let{dr:l,dc:s}of r){let r=[];for(let c=0;c<4;c++){let i=a+l*c,o=n+s*c;if(i<0||i>=6||o<0||o>=7||e[i][o]!==t)break;r.push({r:i,c:o})}if(4===r.length)return r}return null})(a,r);if(n){eg(r),em(n);return}if(a[0].every(Boolean)){eg("draw"),em([]);return}em([]),ey(k(r))},[]),e2=(0,n.useCallback)(e=>{var t;let r=eB.current;if(!r){eD.current=0,eH.current=null;return}let a=null!=(t=eH.current)?t:e,n=Math.min(.032,(e-a)/1e3);if(eH.current=e,r.vy+=5200*n,r.y+=r.vy*n,r.y>=r.target){e1(r.col,r.row,r.token),eB.current=null,eR(null),eD.current=0,eH.current=null;return}eR({col:r.col,token:r.token,y:r.y,size:r.size}),eD.current=requestAnimationFrame(e2)},[e1]),e3=(0,n.useCallback)(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"player";if(eF.current||eB.current)return;let a=f(eO.current,e);if(-1===a){"player"===r&&ez("Column ".concat(e+1," is full."));return}eE(!1),ew(e=>[...e,{board:N(eO.current),currentPlayer:eL.current,winner:eF.current,winningCells:eG.current}]);let{slot:n,cellSize:l}=eU.current;if(A||I<=0)return void e1(e,a,t);eB.current={col:e,row:a,token:t,y:-n,vy:0,target:a*n,slot:n,size:l},eR({col:e,token:t,y:-n,size:l}),eH.current=null,eD.current=requestAnimationFrame(e2)},[e1,I,A,e2]);(0,n.useEffect)(()=>{if("function"==typeof Worker)return eK.current=new Worker(r.tu(new URL(r.p+r.u(3778),r.b))),eK.current.onmessage=e=>{let{taskId:t,column:r}=e.data||{};if(eT.current===t)eA(!1),eF.current||eB.current||eL.current!==ec||"number"==typeof r&&e3(r,ec,"ai")},()=>{var e;return null==(e=eK.current)?void 0:e.terminate()}},[ec,e3]);let e4=(0,n.useCallback)(()=>{eB.current||(eT.current+=1,eA(!1),ew(e=>{let t;if(0===e.length)return e;let r=e=>({nextArr:e.slice(0,-1),state:e[e.length-1]}),a=e;if({nextArr:a,state:t}=r(a),"cpu"===U)for(;t&&t.currentPlayer!==Y&&a.length;)({nextArr:a,state:t}=r(a));return t?(eX(),ef(t.board),ey(t.currentPlayer),eg(t.winner),em(t.winningCells||[]),eE(!1),a):e}))},[eX,Y,U]),e6="single"!==X&&!!$.matchWinner,e7=!eh&&!e_&&!e6&&("local"===U||ex===Y),e5=null!=ek?ek:ev,e9=(0,n.useCallback)((e,t)=>{if(e7&&!(e<0)&&!(e>=7)){if("pointer"===t&&ea){if(ev===e&&eS){eE(!1),e3(e,ex);return}ej(e),eE(!0),ez("Column ".concat(e+1," selected. Tap again to drop."));return}if("keyboard"===t){eE(!1),ej(e);return}e3(e,ex)}},[e7,ea,ex,eS,ev,e3]),e8=(0,n.useCallback)(e=>{if((0,b.shouldHandleGameKey)(e.nativeEvent,{isFocused:y})){if("ArrowLeft"===e.key){(0,b.consumeGameKey)(e.nativeEvent),ej(e=>(e+7-1)%7),eE(!1);return}if("ArrowRight"===e.key){(0,b.consumeGameKey)(e.nativeEvent),ej(e=>(e+1)%7),eE(!1);return}if("Home"===e.key){(0,b.consumeGameKey)(e.nativeEvent),ej(0),eE(!1);return}if("End"===e.key){(0,b.consumeGameKey)(e.nativeEvent),ej(6),eE(!1);return}if("Enter"===e.key||" "===e.key){if((0,b.consumeGameKey)(e.nativeEvent),!e7)return;e3(e5,ex);return}if("u"===e.key.toLowerCase()){(0,b.consumeGameKey)(e.nativeEvent),e4();return}"r"===e.key.toLowerCase()&&((0,b.consumeGameKey)(e.nativeEvent),eZ())}},[e7,ex,e5,eZ,y,e3,e4]);(0,n.useEffect)(()=>{if(!O)return void eM(Array(7).fill(null));eM(((e,t)=>{let r=h(e,t),a=Array(7).fill(null);for(let n=0;n<7;n++){let l=f(e,n);if(-1===l)continue;let s=e.map(e=>[...e]);s[l][n]=t,a[n]=h(s,t)-r}return a})(eu,ex))},[O,eu,ex]),(0,n.useEffect)(()=>{eE(!1)},[ea,ex,U,eh]),(0,n.useEffect)(()=>{if("cpu"!==U||eh||eB.current||ex!==ec)return;let e=eT.current+1;eT.current=e;let t="easy"===z?2:"hard"===z?6:4;if(eK.current){eA(!0),eK.current.postMessage({taskId:e,board:eO.current,depth:t,player:ec});return}eA(!0);let r=setTimeout(()=>{let{column:r}=((e,t,r)=>{var a;let n=p(g(e)),l=Array(7).fill(null),s=null!=(a=n[0])?a:0,c="red"===r?-1/0:1/0,i=new Map;for(let a of n){let n=f(e,a),o=e.map(e=>[...e]);o[n][a]=r;let d=m(o,t-1,-1/0,1/0,"yellow"===r,i).score;l[a]=d,"red"===r?d>c&&(c=d,s=a):d<c&&(c=d,s=a)}return{column:s,scores:l}})(eO.current,t,ec);eT.current!==e||eF.current||eB.current||eL.current===ec&&(eA(!1),e3(r,ec,"ai"))},30);return()=>clearTimeout(r)},[ec,ex,z,U,e3,eh]),(0,n.useEffect)(()=>()=>eX(),[eX]),(0,n.useEffect)(()=>eh?void ez("draw"===eh?"Draw.":"".concat(eo[eh]," wins.")):"cpu"===U&&ex===ec?void ez("".concat(eo[ec]," is thinking...")):void ez("Turn: ".concat(eo[ex],".")),[ec,ex,U,eo,eh]),(0,n.useEffect)(()=>{if(!eh){eV.current=!1;return}if(!eV.current){if(eV.current=!0,"cpu"===U){let e={...et,cpu:{...et.cpu}},t={...e.cpu[z]};"draw"===eh?(t.draws+=1,t.streak=0):eh===Y?(t.wins+=1,t.streak+=1):(t.losses+=1,t.streak=0),e.cpu[z]=t,er(e)}if("local"===U){let e={...et,local:{...et.local}};"draw"===eh?e.local.draws+=1:"red"===eh?e.local.redWins+=1:"yellow"===eh&&(e.local.yellowWins+=1),er(e)}"single"!==X&&ee(e=>{let t={...e};"draw"===eh?t.draws+=1:"red"===eh?t.red+=1:"yellow"===eh&&(t.yellow+=1),t.games+=1;let r="best_of_3"===X?2:3;return!t.matchWinner&&(t.red>=r&&(t.matchWinner="red"),t.yellow>=r&&(t.matchWinner="yellow")),t})}},[z,Y,X,U,ee,er,et,eh]);let te=(0,n.useMemo)(()=>"draw"===eh?"Draw.":"red"===eh||"yellow"===eh?"".concat(eo[eh]," wins."):"cpu"===U&&(ex===ec||eW)?"".concat(eo[ec]," is thinking..."):"Turn: ".concat(eo[ex],"."),[eW,ec,ex,U,eo,eh]),tt=(0,a.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:"Mode"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border ".concat("cpu"===U?"border-gray-200 text-white":"border-gray-600 text-gray-300"),onClick:()=>q("cpu"),children:"vs CPU"}),(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border ".concat("local"===U?"border-gray-200 text-white":"border-gray-600 text-gray-300"),onClick:()=>q("local"),children:"2 Players"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:"Match"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border ".concat("single"===X?"border-gray-200 text-white":"border-gray-600 text-gray-300"),onClick:()=>e0("single"),children:"Single"}),(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border ".concat("best_of_3"===X?"border-gray-200 text-white":"border-gray-600 text-gray-300"),onClick:()=>e0("best_of_3"),children:"Best of 3"})]}),"single"!==X&&(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-400",children:"First to 2 wins takes the match."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:"Difficulty"}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:["easy","normal","hard"].map(e=>(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border ".concat(z===e?"border-gray-200 text-white":"border-gray-600 text-gray-300"),onClick:()=>L(e),children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:"Assists"}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border ".concat(O?"border-gray-200 text-white":"border-gray-600 text-gray-300"),onClick:()=>F(!O),children:O?"On":"Off"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Shows column hints."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:"Palette"}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:Object.keys(w).map(e=>(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border ".concat(G===e?"border-gray-200 text-white":"border-gray-600 text-gray-300"),onClick:()=>T(e),children:w[e].label},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:"Contrast"}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border ".concat(K?"border-gray-200 text-white":"border-gray-600 text-gray-300"),onClick:()=>B(!K),children:K?"High":"Standard"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Boosts outlines and focus."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:"Quality"}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:[0,1,2].map(e=>(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border ".concat(D===e?"border-gray-200 text-white":"border-gray-600 text-gray-300"),onClick:()=>H(e),children:0===e?"Low":1===e?"Standard":"High"},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:"Confirm move"}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border ".concat(ea?"border-gray-200 text-white":"border-gray-600 text-gray-300"),onClick:()=>en(!ea),children:ea?"On":"Off"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Tap twice to drop."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:"Token patterns"}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border ".concat(el?"border-gray-200 text-white":"border-gray-600 text-gray-300"),onClick:()=>es(!el),children:el?"On":"Off"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Adds dots/stripes to discs."})]})]}),"cpu"===U&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:"You play as"}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:["red","yellow"].map(e=>(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border ".concat(Y===e?"border-gray-200 text-white":"border-gray-600 text-gray-300"),onClick:()=>J(e),children:eo[e]},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:"First move"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border ".concat(Q?"border-gray-200 text-white":"border-gray-600 text-gray-300"),onClick:()=>V(!0),children:"You"}),(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border ".concat(Q?"border-gray-600 text-gray-300":"border-gray-200 text-white"),onClick:()=>V(!1),children:"CPU"})]})]})]}),(0,a.jsxs)("div",{className:"rounded border border-gray-700/60 p-3 text-xs text-gray-400",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-200",children:"Stats"}),"cpu"===U?(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,a.jsxs)("div",{children:["Difficulty ",z,":"," ",et.cpu[z].wins,"W / ",et.cpu[z].losses,"L /"," ",et.cpu[z].draws,"D"]}),(0,a.jsxs)("div",{children:["Win streak: ",et.cpu[z].streak]})]}):(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,a.jsxs)("div",{children:[eo.red,": ",et.local.redWins," wins"]}),(0,a.jsxs)("div",{children:[eo.yellow,": ",et.local.yellowWins," wins"]}),(0,a.jsxs)("div",{children:["Draws: ",et.local.draws]})]})]}),(0,a.jsxs)("div",{className:"pt-2 border-t border-gray-700 space-y-2",children:[(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border border-gray-600",onClick:eZ,children:"New Game"}),"single"!==X&&(0,a.jsx)("button",{type:"button",className:"px-3 py-1 rounded border border-gray-600",onClick:e$,children:"New Match"})]})]}),tr=(0,n.useMemo)(()=>{let e=new Set;for(let t of ep)e.add("".concat(t.r,":").concat(t.c));return e},[ep]),ta=(0,n.useMemo)(()=>e7&&null!=e5?f(eu,e5):-1,[eu,e7,e5]),tn=(0,n.useMemo)(()=>{if(-1===ta||null==e5)return null;let{slot:e,cellSize:t}=eq;return{left:e5*e,top:ta*e,width:t,height:t}},[e5,ta,eq]),tl=function(e,t){let r,n,s,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=ei.tokens[e],o=(r=i.primary,n=i.secondary,s=i.highlight,"radial-gradient(circle at 30% 30%, ".concat(s,", ").concat(r," 45%, ").concat(n," 100%)"));return(0,a.jsx)("div",{className:(0,l.default)("relative rounded-full transition-transform",I>0&&"shadow-lg",K?"ring-2 ring-white/70":"ring-1 ring-black/30"),style:{width:t,height:t,backgroundImage:o,opacity:c?.45:1,filter:c?"saturate(0.9)":"none"},children:el&&(0,a.jsx)("div",{className:"absolute inset-0 rounded-full",style:{backgroundImage:W[e],opacity:c?.4:.55,mixBlendMode:"screen"}})})};return(0,a.jsx)(s.default,{gameId:"connect-four",onRestart:eZ,settingsPanel:tt,isFocused:y,children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 p-4 text-white",children:[(0,a.jsx)("div",{className:"w-full max-w-2xl",ref:eI,children:(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-200",id:eJ,children:te}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"cpu"===U?"You: ".concat(eo[Y]," | CPU: ").concat(eo[ec]):"Local match"}),"single"!==X&&(0,a.jsxs)("div",{className:"mt-1 text-xs text-gray-400",children:["Match: ",$.red,"-",$.yellow,$.draws?" (".concat($.draws," draws)"):""]})]}),(0,a.jsxs)("div",{className:"text-right text-xs text-gray-400",id:eQ,children:[(0,a.jsx)("div",{children:"Arrows: select column"}),(0,a.jsx)("div",{children:"Enter/Space: drop"}),(0,a.jsx)("div",{children:"U: undo, R: restart"})]})]})}),(0,a.jsx)("div",{className:"sr-only","aria-live":"polite",children:eP}),(0,a.jsx)("div",{className:(0,l.default)("outline-none rounded-xl",K?"ring-2 ring-cyan-300/80":"ring-1 ring-transparent"),tabIndex:0,onKeyDown:e8,"aria-label":"Connect Four board","aria-describedby":"".concat(eJ," ").concat(eQ),children:(0,a.jsxs)("div",{className:(0,l.default)("relative rounded-2xl p-3",I>0?"shadow-xl":"shadow-none",K?"border-2 border-gray-100/80":"border border-gray-700/70"),style:{width:eq.boardWidth+24,background:I>0?"linear-gradient(145deg, rgba(15,23,42,0.95), rgba(30,41,59,0.95))":"rgba(15,23,42,0.9)"},children:[(0,a.jsxs)("div",{className:"relative grid grid-rows-6 grid-cols-7",style:{width:eq.boardWidth,height:eq.boardHeight,gap:"".concat(eq.gap,"px")},role:"grid","aria-rowcount":6,"aria-colcount":7,children:[eu.map((e,t)=>e.map((e,r)=>{let n=tr.has("".concat(t,":").concat(r));return(0,a.jsx)("div",{className:(0,l.default)("rounded-full flex items-center justify-center",K?"border-2 border-white/60":"border border-slate-700",n&&(A?"ring-2 ring-cyan-400":"ring-2 ring-cyan-300 animate-pulse")),style:{width:eq.cellSize,height:eq.cellSize,backgroundColor:"rgba(2,6,23,0.65)"},"aria-label":"Row ".concat(t+1," column ").concat(r+1,". ").concat(e?eo[e]:"Empty","."),role:"gridcell","data-testid":"connect-four-cell-".concat(t,"-").concat(r),"data-token":null!=e?e:"",children:e&&tl(e,Math.max(10,eq.cellSize-12))},"".concat(t,"-").concat(r))})),tn&&-1!==ta&&ex&&(0,a.jsx)("div",{className:"absolute pointer-events-none",style:tn,children:tl(ex,eq.cellSize,!0)}),e_&&(0,a.jsx)("div",{className:"absolute pointer-events-none",style:{left:e_.col*eq.slot,top:e_.y,width:e_.size,height:e_.size},children:tl(e_.token,e_.size)})]}),(0,a.jsx)("div",{className:"absolute inset-0 grid grid-cols-7",style:{gap:"".concat(eq.gap,"px")},children:Array.from({length:7},(e,t)=>{let r=-1===f(eu,t),n=e5===t,s=eC[t],c=r||!e7,i=["Column ".concat(t+1)];r&&i.push("Full"),ea&&i.push("Tap twice to drop"),O&&"number"==typeof s&&i.push("Hint score ".concat(Math.round(s)));let o=i.join(". ");return(0,a.jsx)("button",{type:"button","aria-label":o,"aria-pressed":n,disabled:c,onMouseEnter:()=>eN(t),onMouseLeave:()=>eN(null),onFocus:()=>eN(t),onBlur:()=>eN(null),onClick:()=>e9(t,"pointer"),className:(0,l.default)("h-full rounded-xl border border-transparent transition focus:outline-none focus:ring-2",c?"opacity-40 cursor-not-allowed":"hover:border-cyan-300/60 focus:ring-cyan-400",n&&"border-cyan-300",K&&"focus:ring-4"),style:O?((e,t,r)=>{var a;if("number"!=typeof e)return;let n=Math.min(1,Math.abs(e)/12),l=null!=(a=w[t])?a:w.default,s=e>=0?l.hints.positive:l.hints.negative;return{backgroundColor:"rgba(".concat(s[0],", ").concat(s[1],", ").concat(s[2],", ").concat((r?.12:.06)+n*(r?.32:.22),")")}})(s,G,K):void 0,children:(0,a.jsxs)("span",{className:"sr-only",children:["Drop in column ",t+1]})},t)})})]})}),eh&&(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-sm",children:[(0,a.jsx)("div",{className:"text-gray-200",children:te}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{type:"button",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 rounded",onClick:eZ,children:"Play again"}),"single"!==X&&(0,a.jsx)("button",{type:"button",className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",onClick:e$,children:"New match"})]}),e6&&$.matchWinner&&(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["Match winner: ",eo[$.matchWinner],"."]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)("button",{type:"button",className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded disabled:opacity-50 disabled:cursor-not-allowed",onClick:e4,disabled:0===eb.length||!!e_,children:"Undo"}),(0,a.jsx)("button",{type:"button",className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",onClick:eZ,children:"Restart"})]})]})})}function P(e){let{windowMeta:t}=e;return(0,a.jsx)(d.SettingsProvider,{children:(0,a.jsx)(A,{windowMeta:t})})}},33840:(e,t,r)=>{r.d(t,{default:()=>n});var a=r(14232);function n(e,t){let[r,n]=(0,a.useState)(()=>{try{let r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(e){return t}});return(0,a.useEffect)(()=>{try{window.localStorage.setItem(e,JSON.stringify(r))}catch(e){}},[e,r]),[r,n]}},41058:(e,t,r)=>{r.d(t,{SettingsProvider:()=>c,useSettings:()=>i});var a=r(37876),n=r(14232),l=r(33840);let s=(0,n.createContext)(void 0),c=e=>{let{children:t}=e,[r,n]=(0,l.default)("settings:difficulty","normal"),[c,i]=(0,l.default)("settings:assists",!0),[o,d]=(0,l.default)("settings:palette","default"),[u,f]=(0,l.default)("settings:highContrast",!1),[x,y]=(0,l.default)("settings:quality",1);return(0,a.jsx)(s.Provider,{value:{difficulty:r,setDifficulty:n,assists:c,setAssists:i,palette:o,setPalette:d,highContrast:u,setHighContrast:f,quality:x,setQuality:y},children:t})},i=()=>{let e=(0,n.useContext)(s);if(!e)throw Error("useSettings must be used within SettingsProvider");return e}},67817:(e,t,r)=>{r.d(t,{default:()=>l});var a=r(14232);let n=()=>"function"==typeof window.matchMedia?window.matchMedia("(pointer: coarse)").matches:"ontouchstart"in window||navigator.maxTouchPoints>0;function l(){let[e,t]=(0,a.useState)(n);return(0,a.useEffect)(()=>{var e,r,a;let n=null==(e=(r=window).matchMedia)?void 0:e.call(r,"(pointer: coarse)");if(!n)return;let l=e=>{t(e.matches)};return null==(a=n.addEventListener)||a.call(n,"change",l),()=>{var e;null==(e=n.removeEventListener)||e.call(n,"change",l)}},[]),e}}}]);