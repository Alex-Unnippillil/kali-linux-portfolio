"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7614],{10830:(e,t,a)=>{a.d(t,{default:()=>s});var r=a(37876);function s(e){let{onDirection:t,onButton:a}=e,s=(e,a)=>()=>null==t?void 0:t({x:e,y:a}),n=e=>()=>null==a?void 0:a(e);return(0,r.jsxs)("div",{className:"virtual-pad",children:[(0,r.jsxs)("div",{className:"dpad",children:[(0,r.jsx)("button",{className:"up",onPointerDown:s(0,-1)}),(0,r.jsxs)("div",{className:"middle",children:[(0,r.jsx)("button",{className:"left",onPointerDown:s(-1,0)}),(0,r.jsx)("button",{className:"right",onPointerDown:s(1,0)})]}),(0,r.jsx)("button",{className:"down",onPointerDown:s(0,1)})]}),(0,r.jsxs)("div",{className:"actions",children:[(0,r.jsx)("button",{className:"btn-a",onPointerDown:n("A"),children:"A"}),(0,r.jsx)("button",{className:"btn-b",onPointerDown:n("B"),children:"B"})]})]})}a(14232)},97614:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var r=a(37876),s=a(14232),n=a(72082),l=a(70994),c=a(10830),o=a(69106),i=a(30684),d=a(95220),u=a(65422),x=a(10911),h=a(34051);let p=[1,5,25,100],b={1:"bg-kali-surface text-kali-text shadow-[0_0_0_1px_rgba(255,255,255,0.08)]",5:"bg-kali-muted text-kali-text shadow-[0_0_12px_rgba(15,148,210,0.2)]",25:"bg-kali-primary text-kali-inverse shadow-[0_0_14px_rgba(15,148,210,0.35)]",100:"bg-kali-control text-kali-inverse shadow-[0_0_18px_rgba(15,148,210,0.45)]"},m="rounded bg-kali-muted text-kali-text transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus hover:bg-kali-primary hover:text-kali-inverse",f={deal:"Enter",hit:"h",stand:"s",double:"d",split:"p",surrender:"r",chip1:"1",chip5:"2",chip25:"3",chip100:"4"},g={deal:"Deal",hit:"Hit",stand:"Stand",double:"Double",split:"Split",surrender:"Surrender",chip1:"+1 chip",chip5:"+5 chip",chip25:"+25 chip",chip100:"+100 chip"},k=e=>{let{card:t,faceDown:a,peeking:n}=e,[l,c]=(0,s.useState)(!1),[o,i]=(0,s.useState)(!1),d=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{d.current=window.matchMedia("(prefers-reduced-motion: reduce)").matches},[]),(0,s.useEffect)(()=>{a?c(!1):d.current?c(!0):requestAnimationFrame(()=>c(!0))},[a,t]),(0,r.jsxs)("div",{className:"h-16 w-12 sm:h-24 sm:w-16 card ".concat(l?"flipped":""," ").concat(n||a&&o?"peek":""," animate-deal"),"aria-label":a?"Hidden card":"".concat(t.value).concat(t.suit),role:"img",onMouseEnter:()=>a&&i(!0),onMouseLeave:()=>i(!1),children:[(0,r.jsx)("div",{className:"card-face card-front","aria-hidden":"true",children:"".concat(t.value).concat(t.suit)}),(0,r.jsx)("div",{className:"card-face card-back","aria-hidden":"true",children:"?"})]})},v=e=>{let{amount:t}=e,[a,n]=(0,s.useState)([]),l=(0,s.useRef)(null),c=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{c.current=window.matchMedia("(prefers-reduced-motion: reduce)").matches},[]),(0,s.useEffect)(()=>{let e=[],a=t;[...p].reverse().forEach(r=>{let s=Math.floor(a/r);a%=r;for(let a=0;a<s;a+=1)e.push({val:r,id:"".concat(r,"-").concat(a,"-").concat(t)})}),n(e)},[t]),(0,s.useEffect)(()=>{if(!c.current&&l.current){let e=l.current.lastElementChild;e&&requestAnimationFrame(()=>e.classList.add("chip-pop"))}},[a]),(0,r.jsx)("div",{ref:l,className:"chip-stack relative h-10 w-10","aria-label":"Bet ".concat(t),role:"img",children:a.map((e,t)=>(0,r.jsx)("div",{className:"chip ".concat(b[e.val]),style:{top:"-".concat(2*t,"px"),zIndex:t},"aria-hidden":"true",children:e.val},e.id))})},j=(e,t)=>{let a=e.gameRef.current;try{switch(t.type){case"hit":a.hit();break;case"stand":a.stand(),(0,n.logEvent)({category:"Blackjack",action:"stand"});break;case"double":a.double(),(0,n.logEvent)({category:"Blackjack",action:"double"});break;case"split":a.split(),(0,n.logEvent)({category:"Blackjack",action:"split"});break;case"surrender":a.surrender()}}catch(t){e.setMessage(t.message)}return{...e,version:e.version+1}},y=function(){var e;let{windowMeta:t,testDeck:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},y=null==(e=null==t?void 0:t.isFocused)||e,[w,N]=(0,d.default)("blackjack-penetration",.75,e=>"number"==typeof e&&e>=.5&&e<=.95),[_,C]=(0,d.default)("blackjack-decks",6,e=>"number"==typeof e&&[1,2,4,6,8].includes(e)),[S,E]=(0,d.default)("blackjack-hit-soft-17",!0,e=>"boolean"==typeof e),[H,P]=(0,d.default)("blackjack-show-hints",!0,e=>"boolean"==typeof e),[B,M]=(0,d.default)("blackjack-show-count",!1,e=>"boolean"==typeof e),[D,R]=(0,d.default)("blackjack-show-history",!1,e=>"boolean"==typeof e),[L,T]=(0,d.default)("blackjack-sound",!1,e=>"boolean"==typeof e),[F,A]=(0,d.default)("blackjack-haptics",!1,e=>"boolean"==typeof e),[I,V]=(0,d.default)("bj_best_streak",0,e=>"number"==typeof e),q=(0,s.useRef)(null);q.current||(q.current=new x.BlackjackGame({bankroll:1e3,penetration:w,decks:_,hitSoft17:S}));let[G,K]=(0,s.useState)(0),[U,W]=(0,d.default)("blackjack-last-bet",0,e=>"number"==typeof e&&e>=0),[z,J]=(0,s.useState)(1),[O,Q]=(0,s.useState)(""),[Y,X]=(0,s.useState)([]),[Z,$]=(0,s.useState)([]),[ee,et]=(0,s.useState)(0),[ea,er]=(0,s.useState)(!1),[es,en]=(0,s.useState)(q.current.stats),[el,ec]=(0,s.useState)(!1),[eo,ei]=(0,s.useState)(q.current.shoe.runningCount),[ed,eu]=(0,s.useState)({...q.current.shoe.composition}),[ex,eh]=(0,s.useState)(!1),[ep,eb]=(0,s.useState)(!1),[em,ef]=(0,s.useState)(!1),[eg,ek]=(0,s.useState)([]),[ev,ej]=(0,i.default)("blackjack",f),ey=(0,s.useRef)(null),ew=(0,s.useRef)(null),eN=(0,s.useRef)(null),e_=(0,s.useRef)(a),eC=(0,s.useRef)({penetration:w,deckCount:_,hitSoft17:S});(0,s.useEffect)(()=>{e_.current=a},[a]),(0,s.useEffect)(()=>{eC.current={penetration:w,deckCount:_,hitSoft17:S}},[w,_,S]);let[,eS]=(0,s.useReducer)(j,{gameRef:q,setMessage:Q,version:0}),eE=q.current.bankroll,eH=Z.length?Z.reduce((e,t)=>e+t.bet,0):0,eP=0===Z.length?G*z:0,eB=Math.max(0,eE-eP),eM=eE+eH,eD=Math.floor(eE/z),eR=(0,s.useCallback)(()=>{X([...q.current.dealerHand]),$(q.current.playerHands.map(e=>({...e,cards:[...e.cards]}))),en({...q.current.stats}),et(q.current.current),ei(q.current.shoe.runningCount),eu({...q.current.shoe.composition}),ek([...q.current.history])},[]),eL=(0,s.useCallback)(()=>{ey.current&&clearTimeout(ey.current),ew.current&&clearTimeout(ew.current);let{penetration:e,deckCount:t,hitSoft17:a}=eC.current;q.current=new x.BlackjackGame({bankroll:1e3,penetration:e,decks:t,hitSoft17:a}),K(0),J(1),Q(""),X([]),$([]),et(0),er(!1),en(q.current.stats),ec(!1),ei(q.current.shoe.runningCount),eu({...q.current.shoe.composition}),ek([]),eh(!1)},[]),eT=(0,s.useCallback)(e=>{if(!L)return;let t=window.AudioContext||window.webkitAudioContext;if(t)try{eN.current||(eN.current=new t);let a=eN.current,r=a.createOscillator(),s=a.createGain(),n=a.currentTime,l={deal:{freq:520,duration:.08},hit:{freq:620,duration:.08},win:{freq:820,duration:.12},lose:{freq:320,duration:.12}},{freq:c,duration:o}=l[e]||l.deal;r.frequency.value=c,r.type="triangle",s.gain.value=.08,r.connect(s),s.connect(a.destination),r.start(n),r.stop(n+o)}catch(e){}},[L]),eF=(0,s.useCallback)(e=>{F&&"undefined"!=typeof navigator&&navigator.vibrate&&navigator.vibrate(e)},[F]),eA=(0,s.useCallback)(e=>{K(t=>Math.min(Math.max(0,t+e),eE/z))},[eE,z]);(0,s.useEffect)(()=>{K(e=>Math.min(e,eE/z))},[eE,z]);let eI=(0,s.useCallback)(()=>{if(!em)try{ec(!0),ey.current&&clearTimeout(ey.current),ey.current=window.setTimeout(()=>ec(!1),500);let e=e_.current;e_.current=null,q.current.startRound(G,e,z),W(G),(0,n.logEvent)({category:"Blackjack",action:"hand_start",value:G*z}),Q(""),er("A"===q.current.dealerHand[0].value),eR(),eT("deal"),eF(8),["A","10","J","Q","K"].includes(q.current.dealerHand[0].value)&&(eb(!0),ew.current&&clearTimeout(ew.current),ew.current=window.setTimeout(()=>eb(!1),1e3))}catch(e){Q(e.message)}},[G,z,em,eT,W,eF,eR]),eV=(0,s.useCallback)(()=>{var e;let t=Z[ee];return t?(e=Y[0],t&&e?(0,x.basicStrategy)(t.cards,e,{canDouble:eE>=t.bet,canSplit:2===t.cards.length&&(0,x.cardValue)(t.cards[0])===(0,x.cardValue)(t.cards[1])&&eE>=t.bet,canSurrender:2===t.cards.length}):""):""},[eE,ee,Y,Z]),eq=(0,s.useCallback)(e=>{if(em)return;let t=eV();if(t&&t!==e&&(0,n.logEvent)({category:"Blackjack",action:"deviation",label:"".concat(t,"->").concat(e)}),er(!1),eS({type:e}),Q(""),eR(),("hit"===e||"double"===e||"split"===e)&&(eT("hit"),eF(6)),q.current.current>=q.current.playerHands.length){q.current.playerHands.forEach(e=>{e.result&&(0,n.logEvent)({category:"Blackjack",action:"result",label:e.result})});let e=q.current.playerHands.map(e=>e.result),t=e.includes("win"),a=e.includes("push");t?(eT("win"),eF([10,30,10])):a||(eT("lose"),eF(14))}},[em,eT,eV,eF,eR]),eG=(0,s.useCallback)(()=>{try{q.current.takeInsurance(),er(!1),eR()}catch(e){Q(e.message)}},[eR]),eK=(0,s.useCallback)(()=>{eh(!0),(0,n.logEvent)({category:"Blackjack",action:"count_practice_start"})},[]),eU=(0,s.useCallback)(()=>{eh(!1)},[]);(0,s.useEffect)(()=>{q.current.shoe.penetration=w,q.current.shoe.shufflePoint=Math.floor(q.current.shoe.cards.length*w)},[w]),(0,s.useEffect)(()=>{eL()},[_,S,eL]),(0,s.useEffect)(()=>()=>{ey.current&&clearTimeout(ey.current),ew.current&&clearTimeout(ew.current)},[]),(0,s.useEffect)(()=>{let e=e=>{if(ex||em||!(0,u.shouldHandleGameKey)(e,{isFocused:y}))return;let t=e.key.toLowerCase(),a=!1;0===Z.length&&G>=0&&(t===ev.chip1.toLowerCase()&&(eA(p[0]),a=!0),t===ev.chip5.toLowerCase()&&(eA(p[1]),a=!0),t===ev.chip25.toLowerCase()&&(eA(p[2]),a=!0),t===ev.chip100.toLowerCase()&&(eA(p[3]),a=!0),t===ev.deal.toLowerCase()&&G>0&&(eI(),a=!0)),Z.length>0&&(t===ev.hit.toLowerCase()&&(eq("hit"),a=!0),t===ev.stand.toLowerCase()&&(eq("stand"),a=!0),t===ev.double.toLowerCase()&&(eq("double"),a=!0),t===ev.split.toLowerCase()&&(eq("split"),a=!0),t===ev.surrender.toLowerCase()&&(eq("surrender"),a=!0)),a&&(0,u.consumeGameKey)(e)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[eq,eA,G,y,ev,em,Z.length,ex,eI]);let eW=(0,s.useMemo)(()=>Z.map(e=>(0,x.calculateBustProbability)(e.cards,ed)),[Z,ed]),ez=(e,t)=>{let{hideFirst:a,showProb:s,peeking:n=!1,overlay:l=null,bustProb:c=0}=t,o=(0,x.handValue)(e.cards),i=(0,x.isSoft)(e.cards),d=a?"?":i?"Soft ".concat(o):"".concat(o);return(0,r.jsxs)("div",{className:"relative flex flex-wrap items-center gap-2 sm:gap-3",title:s?"Bust chance: ".concat((100*c).toFixed(1),"%"):void 0,children:[e.cards.map((e,t)=>(0,r.jsx)(k,{card:e,faceDown:a&&1===t&&Z.length>0&&ee<Z.length,peeking:n&&1===t},t)),(0,r.jsx)("div",{className:"min-w-[2rem] rounded border border-white/10 bg-[color:color-mix(in_srgb,var(--color-surface)_82%,transparent)] px-2 py-1 text-center text-sm sm:text-base text-kali-text",children:d}),a&&(0,r.jsx)("div",{className:"rounded border border-white/10 bg-[color:color-mix(in_srgb,var(--color-muted)_70%,transparent)] px-2 py-1 text-[0.65rem] uppercase tracking-wide text-kali-muted",children:"Hole card hidden"}),l&&(0,r.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 rounded border border-[color:color-mix(in_srgb,var(--kali-control)_35%,var(--kali-border))] bg-[var(--kali-control-overlay)] px-2 text-xs font-semibold text-[color:var(--kali-control)] shadow-[0_6px_20px_rgba(9,15,23,0.55)]",children:l.toUpperCase()})]})},eJ=H?eV():"",eO=(0,s.useMemo)(()=>{if(0===Z.length)return"Place your bet to start the next round.";if(ee<Z.length){let e=Z.length>1?"Hand ".concat(ee+1," of ").concat(Z.length):"Your hand",t=ea?"Insurance is available.":"";return"".concat(e,": choose your action.").concat(t?" ".concat(t):"")}return"Round settled. Adjust your bet or deal again."},[ee,Z.length,ea]),eQ=(0,s.useMemo)(()=>{if(ee<Z.length||0===eg.length)return"";let e=eg[eg.length-1];if(!e)return"";let t=e.playerHands.map((e,t)=>"P".concat(t+1," ").concat(e.result.toUpperCase())).join(" \xb7 ");return"Results: ".concat(t)},[ee,eg,Z.length]),eY=(0,s.useCallback)(e=>{if(e.surrendered)return"Surrender";if(e.busted)return"Bust";let t=(0,x.handValue)(e.cards);return 2===e.cards.length&&21===t&&"win"===e.result?"Blackjack":"win"===e.result?"Win":"push"===e.result?"Push":"lose"===e.result?"Lose":""},[]),eX=(0,s.useMemo)(()=>eg.slice(-5).reverse(),[eg]),eZ=e=>({hit:!e.finished,stand:!e.finished,double:2===e.cards.length&&!e.finished&&!e.doubled&&q.current.bankroll>=e.bet,split:2===e.cards.length&&!e.finished&&(0,x.cardValue)(e.cards[0])===(0,x.cardValue)(e.cards[1])&&q.current.bankroll>=e.bet,surrender:2===e.cards.length&&!e.finished&&!e.surrendered}),e$=Z[ee],e0=e$?eZ(e$):null,e1=(0,s.useMemo)(()=>(0,r.jsxs)("div",{className:"space-y-3 text-sm text-kali-text",children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-kali-control",children:"Table rules"}),(0,r.jsxs)("label",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("span",{children:"Decks"}),(0,r.jsx)("select",{value:_,onChange:e=>C(parseInt(e.target.value,10)),className:"rounded border border-[color:var(--kali-border)] bg-[var(--kali-surface)] px-2 py-1 text-kali-text","aria-label":"Deck count",children:[1,2,4,6,8].map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("span",{children:"Dealer hits soft 17"}),(0,r.jsx)("input",{type:"checkbox",checked:S,onChange:e=>E(e.target.checked),"aria-label":"Dealer hits soft 17"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("span",{children:"Show hints"}),(0,r.jsx)("input",{type:"checkbox",checked:H,onChange:e=>P(e.target.checked),"aria-label":"Toggle basic strategy hints"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("span",{children:"Show running count"}),(0,r.jsx)("input",{type:"checkbox",checked:B,onChange:e=>M(e.target.checked),"aria-label":"Toggle running count"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("span",{children:"Show hand history"}),(0,r.jsx)("input",{type:"checkbox",checked:D,onChange:e=>R(e.target.checked),"aria-label":"Toggle hand history"})]}),(0,r.jsxs)("label",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Penetration"}),(0,r.jsx)("input",{type:"range",step:"0.05",min:"0.5",max:"0.95",value:w,onChange:e=>{let t=parseFloat(e.target.value);Number.isNaN(t)||N(t)},className:"h-1 w-28 accent-[var(--color-control-accent)]","aria-label":"Penetration"}),(0,r.jsxs)("span",{className:"tabular-nums",children:[(100*w).toFixed(0),"%"]})]}),(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-kali-control",children:"Feedback"}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("span",{children:"Sound cues"}),(0,r.jsx)("input",{type:"checkbox",checked:L,onChange:e=>T(e.target.checked),"aria-label":"Toggle sound cues"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("span",{children:"Haptic cues"}),(0,r.jsx)("input",{type:"checkbox",checked:F,onChange:e=>A(e.target.checked),"aria-label":"Toggle haptic cues"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-kali-control",children:"Key remapping"}),(0,r.jsx)(o.default,{mapping:ev,setKey:ej,actions:g})]})]}),[_,F,S,ev,w,C,A,E,ej,N,M,P,R,T,B,D,H,L]),e2=(0,s.useCallback)(e=>{let{x:t,y:a}=e;if(!ex&&!em){if(0===Z.length){t>0&&eA(1),t<0&&eA(-1),a>0&&z>1&&J(e=>Math.max(1,e-1)),a<0&&(G>0?eI():z<4&&J(e=>Math.min(4,e+1)));return}(null==e0?void 0:e0.hit)&&a<0?eq("hit"):(null==e0?void 0:e0.stand)&&a>0?eq("stand"):(null==e0?void 0:e0.double)&&t>0?eq("double"):(null==e0?void 0:e0.surrender)&&t<0&&eq("surrender")}},[eq,eA,G,e0,z,em,Z.length,ex,eI]),e5=(0,s.useCallback)(e=>{if(!ex&&!em){if(0===Z.length){"A"===e&&G>0&&eI(),"B"===e&&eA(5);return}"A"===e&&(null==e0?void 0:e0.hit)?eq("hit"):"B"===e&&(null==e0?void 0:e0.stand)&&eq("stand")}},[eq,eA,G,e0,em,Z.length,ex,eI]),e3=(0,r.jsx)(h.default,{onExit:eU,onBestStreakChange:V});return(0,r.jsx)(l.default,{gameId:"blackjack",score:eM,highScore:I,onPauseChange:ef,onRestart:eL,settingsPanel:e1,isFocused:y,children:ex?e3:(0,r.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center gap-4 bg-[color:color-mix(in_srgb,var(--color-surface)_65%,transparent)] p-4 text-kali-text select-none",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3 text-sm sm:text-base",children:[(0,r.jsxs)("div",{className:"rounded border border-white/10 bg-[color:color-mix(in_srgb,var(--color-surface)_82%,transparent)] px-3 py-1 text-kali-text",children:["Bankroll: ",eM]}),0===Z.length?(0,r.jsxs)("div",{className:"rounded border border-white/10 bg-[color:color-mix(in_srgb,var(--color-surface)_82%,transparent)] px-3 py-1 text-kali-text",children:["Reserved: ",eP]}):(0,r.jsxs)("div",{className:"rounded border border-white/10 bg-[color:color-mix(in_srgb,var(--color-surface)_82%,transparent)] px-3 py-1 text-kali-text",children:["In play: ",eH]}),(0,r.jsxs)("div",{className:"rounded border border-white/10 bg-[color:color-mix(in_srgb,var(--color-surface)_82%,transparent)] px-3 py-1 text-kali-text",children:["Available: ",eB]}),(0,r.jsx)("div",{className:"h-8 w-6 rounded border border-white/10 bg-[color:color-mix(in_srgb,var(--color-muted)_88%,transparent)] ".concat(el?"shuffle":""),"aria-hidden":"true"}),B&&(0,r.jsxs)("div",{className:"rounded border border-white/10 bg-[color:color-mix(in_srgb,var(--color-surface)_82%,transparent)] px-3 py-1 text-kali-text",children:["RC: ",eo]})]}),(0,r.jsxs)("div",{className:"rounded border border-white/10 bg-[color:color-mix(in_srgb,var(--color-surface)_78%,transparent)] px-3 py-1 text-center text-xs text-kali-muted",children:["Rules: ",_," decks \xb7 Dealer ",S?"hits":"stands"," soft 17 \xb7 Blackjack pays 3:2"]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-2 text-sm sm:text-base",children:[(0,r.jsx)("button",{type:"button",className:"".concat(m," px-2 py-1 text-sm sm:text-base font-medium"),onClick:()=>P(!H),"aria-pressed":H,children:H?"Hide Hints":"Show Hints"}),(0,r.jsx)("button",{type:"button",className:"".concat(m," px-2 py-1 text-sm sm:text-base font-medium"),onClick:()=>M(!B),"aria-pressed":B,children:B?"Hide Count":"Show Count"}),(0,r.jsx)("button",{type:"button",className:"".concat(m," px-2 py-1 text-sm sm:text-base font-medium"),onClick:()=>R(e=>!e),"aria-pressed":D,children:D?"Hide History":"Show History"}),(0,r.jsx)("button",{type:"button",className:"".concat(m," px-2 py-1 text-sm sm:text-base font-medium"),onClick:eK,children:"Practice Count"}),(0,r.jsxs)("label",{htmlFor:"penetration-slider",className:"flex items-center gap-2 rounded border border-white/10 bg-[color:color-mix(in_srgb,var(--color-surface)_78%,transparent)] px-2 py-1 text-xs sm:text-sm text-kali-text",children:[(0,r.jsx)("span",{className:"uppercase tracking-wide",children:"Pen"}),(0,r.jsx)("input",{id:"penetration-slider",type:"range",step:"0.05",min:"0.5",max:"0.95",value:w,onChange:e=>{let t=parseFloat(e.target.value);Number.isNaN(t)||N(t)},className:"h-1 w-24 accent-[var(--color-control-accent)]","aria-label":"Penetration"}),(0,r.jsxs)("span",{children:[(100*w).toFixed(0),"%"]})]})]}),0===Z.length?(0,r.jsxs)("div",{className:"flex w-full max-w-xl flex-col items-center gap-3",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3","aria-live":"polite",role:"status",children:[(0,r.jsxs)("span",{children:["Bet: ",G," per hand \xb7 Total: ",G*z]}),(0,r.jsx)(v,{amount:G})]}),(0,r.jsxs)("div",{className:"text-xs text-kali-muted",children:["Max per hand: ",eD]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[p.map(e=>(0,r.jsx)("button",{type:"button",className:"chip transition ".concat(b[e]," focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus ").concat(G+e>eD?"cursor-not-allowed opacity-40":"hover:scale-105 hover:bg-kali-primary hover:text-kali-inverse hover:shadow-[0_0_18px_rgba(15,148,210,0.45)]"),onClick:()=>G+e<=eD&&K(G+e),"aria-label":"Add ".concat(e," chip"),disabled:G+e>eD,children:e},e)),(0,r.jsx)("button",{type:"button",className:"".concat(m," px-2 py-1 text-sm font-medium"),onClick:()=>K(0),children:"Clear"}),(0,r.jsx)("button",{type:"button",className:"".concat(m," px-2 py-1 text-sm font-medium"),onClick:()=>K(eD),disabled:0===eD,children:"Max"}),U>0&&(0,r.jsxs)("button",{type:"button",className:"".concat(m," px-2 py-1 text-sm font-medium"),onClick:()=>K(Math.min(U,eD)),disabled:0===eD,children:["Repeat ",U]}),(0,r.jsxs)("label",{htmlFor:"hand-count",className:"flex items-center gap-2 rounded border border-white/10 bg-[color:color-mix(in_srgb,var(--color-surface)_78%,transparent)] px-2 py-1 text-xs sm:text-sm text-kali-text",children:[(0,r.jsx)("span",{className:"text-sm",children:"Hands"}),(0,r.jsx)("input",{id:"hand-count",type:"number",min:"1",max:"4",value:z,onChange:e=>{let t=parseInt(e.target.value,10);Number.isNaN(t)||J(t)},className:"w-12 rounded border border-[color:var(--kali-border)] bg-[var(--kali-surface)] px-1 text-kali-text transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus","aria-label":"Hand count"})]}),(0,r.jsx)("button",{type:"button",className:"".concat(m," px-3 py-1 text-sm font-semibold disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:bg-kali-muted disabled:hover:text-kali-text"),onClick:eI,disabled:0===G,children:"Deal"})]})]}):(0,r.jsxs)("div",{className:"flex w-full max-w-xl flex-col items-center gap-2 text-center",children:[(0,r.jsx)("div",{className:"text-sm uppercase tracking-wide text-kali-control",children:"Dealer"}),ez({cards:Y},{hideFirst:ee<Z.length,showProb:!1,peeking:ep})]}),Z.map((e,t)=>{let a=t===ee&&ee<Z.length,s=eY(e);return(0,r.jsxs)("div",{className:"flex w-full max-w-xl flex-col items-center gap-2 rounded-xl border border-transparent px-3 py-2 ".concat(a?"border-[color:color-mix(in_srgb,var(--kali-primary)_55%,var(--kali-border))] bg-[color:color-mix(in_srgb,var(--color-surface)_72%,transparent)] shadow-[0_0_16px_rgba(15,148,210,0.2)]":""),"aria-current":a?"step":void 0,children:[(0,r.jsx)("div",{className:"text-sm uppercase tracking-wide text-kali-control",children:"Player".concat(Z.length>1?" ".concat(t+1):"")}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[(0,r.jsx)(v,{amount:e.bet}),ez(e,{hideFirst:!1,showProb:!0,peeking:!1,overlay:a&&H?eJ:null,bustProb:eW[t]||0})]}),s&&(0,r.jsx)("div",{className:"rounded border border-[color:color-mix(in_srgb,var(--kali-primary)_35%,var(--kali-border))] bg-[var(--kali-control-overlay)] px-2 py-0.5 text-xs font-semibold uppercase tracking-wide text-kali-text",children:s}),a&&Z.length>0&&(0,r.jsx)("div",{className:"flex w-full flex-wrap items-center justify-center gap-2",children:["hit","stand","double","split","surrender"].map(t=>{let a=eJ===t,s=eZ(e)[t],{text:n,shortcut:l}={hit:{text:"Hit",shortcut:ev.hit||"H"},stand:{text:"Stand",shortcut:ev.stand||"S"},double:{text:"Double",shortcut:ev.double||"D"},split:{text:"Split",shortcut:ev.split||"P"},surrender:{text:"Surrender",shortcut:ev.surrender||"R"}}[t];return(0,r.jsx)("button",{type:"button",className:"".concat(m," px-3 py-1 text-sm sm:text-base font-medium disabled:cursor-not-allowed disabled:opacity-50 ").concat(a?"bg-kali-primary text-kali-inverse shadow-[0_0_18px_rgba(15,148,210,0.45)] hover:bg-[color:color-mix(in_srgb,var(--color-primary)_85%,transparent)]":""),onClick:()=>eq(t),disabled:!s,"aria-keyshortcuts":l,title:"Press ".concat(l.toUpperCase()," to ").concat(n),children:n},t)})})]},t)}),ea&&ee<Z.length&&(0,r.jsx)("button",{type:"button",className:"".concat(m," px-3 py-1 text-sm font-medium"),onClick:eG,children:"Take Insurance"}),(0,r.jsx)("div",{className:"mt-2 text-center text-base sm:text-lg","aria-live":"polite",role:"status",children:O||eO}),eQ&&(0,r.jsx)("div",{className:"text-center text-xs uppercase tracking-wide text-kali-control",children:eQ}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-x-4 gap-y-1 rounded border border-[color:color-mix(in_srgb,var(--kali-control)_35%,var(--kali-border))] bg-[var(--kali-control-overlay)] px-4 py-2 text-sm sm:text-base text-kali-text",children:[(0,r.jsxs)("span",{children:["Wins: ",es.wins]}),(0,r.jsxs)("span",{children:["Losses: ",es.losses]}),(0,r.jsxs)("span",{children:["Pushes: ",es.pushes]})]}),D&&eX.length>0&&(0,r.jsxs)("div",{className:"w-full max-w-xl rounded border border-[color:color-mix(in_srgb,var(--kali-control)_35%,var(--kali-border))] bg-[color:color-mix(in_srgb,var(--color-surface)_85%,transparent)] px-4 py-3 text-xs text-kali-text",children:[(0,r.jsx)("div",{className:"mb-2 text-xs uppercase tracking-wide text-kali-control",children:"Recent hands"}),(0,r.jsx)("ul",{className:"space-y-2",children:eX.map((e,t)=>(0,r.jsxs)("li",{className:"space-y-1",children:[(0,r.jsxs)("div",{children:["Dealer: ",e.dealer.map(e=>"".concat(e.value).concat(e.suit)).join(" ")," (",(0,x.handValue)(e.dealer),")"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:e.playerHands.map((e,a)=>(0,r.jsx)("span",{className:"rounded bg-black/20 px-2 py-0.5",children:"P".concat(a+1,": ").concat(e.result.toUpperCase()," ").concat((0,x.handValue)(e.cards)," (bet ").concat(e.bet,")")},"".concat(t,"-").concat(a)))})]},"".concat(eg.length,"-").concat(t)))})]}),(0,r.jsx)("div",{className:"mt-2 sm:hidden",children:(0,r.jsx)(c.default,{onDirection:e2,onButton:e5})})]})})}}}]);