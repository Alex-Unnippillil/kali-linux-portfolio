"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6498],{31730:(e,t,n)=>{n.d(t,{hasIndexedDB:()=>r,isBrowser:()=>o});let o="undefined"!=typeof document,r=o&&"undefined"!=typeof indexedDB},35326:(e,t,n)=>{let o,r;n.d(t,{getDb:()=>v});let a=new WeakMap,l=new WeakMap,i=new WeakMap,s=new WeakMap,c=new WeakMap,u={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("objectStoreNames"===t)return e.objectStoreNames||i.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){if(e instanceof IDBRequest){let t=new Promise((t,n)=>{let o=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{t(d(e.result)),o()},a=()=>{n(e.error),o()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&a.set(t,e)}).catch(()=>{}),c.set(t,e),t}if(s.has(e))return s.get(e);let t=function(e){if("function"==typeof e)return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(f(this),t),d(a.get(this))}:function(...t){return d(e.apply(f(this),t))}:function(t,...n){let o=e.call(f(this),t,...n);return i.set(o,t.sort?t.sort():[t]),d(o)};return e instanceof IDBTransaction&&function(e){if(l.has(e))return;let t=new Promise((t,n)=>{let o=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{t(),o()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});l.set(e,t)}(e),(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(e,u):e}(e);return t!==e&&(s.set(e,t),c.set(t,e)),t}let f=e=>c.get(e),p=["get","getKey","getAll","getAllKeys","count"],m=["put","add","delete","clear"],h=new Map;function g(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(h.get(t))return h.get(t);let n=t.replace(/FromIndex$/,""),o=t!==n,r=m.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(r||p.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,r?"readwrite":"readonly"),l=a.store;return o&&(l=l.index(t.shift())),(await Promise.all([l[n](...t),r&&a.done]))[0]};return h.set(t,a),a}u=(e=>({...e,get:(t,n,o)=>g(t,n)||e.get(t,n,o),has:(t,n)=>!!g(t,n)||e.has(t,n)}))(u);var y=n(31730);function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return y.hasIndexedDB?function(e,t,{blocked:n,upgrade:o,blocking:r,terminated:a}={}){let l=indexedDB.open(e,t),i=d(l);return o&&l.addEventListener("upgradeneeded",e=>{o(d(l.result),e.oldVersion,e.newVersion,d(l.transaction),e)}),n&&l.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),i.then(e=>{a&&e.addEventListener("close",()=>a()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),i}(e,t,n):null}},46498:(e,t,n)=>{n.r(t);var o=n(57613),r=n(35326);let a=null,l=null;o.isBrowser&&(a=document.getElementById("notes"),l=document.getElementById("add-note"));let i="--sticky-note-surface",s="#fffa65";function c(e){if("string"!=typeof e)return null;let t=e.trim();if(!t)return null;let n=t.match(/^#([0-9a-f]{6})$/i);if(n)return"#".concat(n[1].toLowerCase());let o=t.match(/^#([0-9a-f]{3})$/i);if(o)return"#"+o[1].toLowerCase().split("").map(e=>e+e).join("");let r=t.match(/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})(?:\s*,\s*(\d+(?:\.\d+)?))?\s*\)$/i);return r?("#"+r.slice(1,4).map(e=>{let t=Number.parseInt(e,10);return Number.isNaN(t)?0:Math.min(255,Math.max(0,t))}).map(e=>e.toString(16).padStart(2,"0")).join("")).toLowerCase():null}function u(e){var t,n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,r=null!=(n=null!=(t=c(o))?t:c(s))?n:"#fffa65",a=c(e);return(null!=a?a:r).toLowerCase()}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=u(t);if(!o.isBrowser||!e)return n;try{let t=getComputedStyle(document.documentElement).getPropertyValue(e);if(!t)return n;return u(t,n)}catch(t){return console.warn("Failed to read CSS token ".concat(e),t),n}}function f(e){if(!e)return!1;let t=!1,n=u(e.color);n!==e.color&&(e.color=n,t=!0),e.colorToken||n!==u(s)||(e.colorToken=i,t=!0);let o=e.colorToken?d(e.colorToken,n):n;return o!==e.color&&(e.color=o,t=!0),t}function p(e,t){let n=e.colorToken?d(e.colorToken,e.color):u(e.color);e.color=n;let o=function(e){let t=d("--kali-terminal-text","#f8fafc"),n=d("--kali-bg-solid","#0b121a"),o=function(e){let t=c(e);if(!t)return null;let n=Number.parseInt(t.slice(1,3),16),o=Number.parseInt(t.slice(3,5),16),r=Number.parseInt(t.slice(5,7),16);return[n,o,r].some(e=>Number.isNaN(e))?null:{r:n,g:o,b:r}}(e);return o&&function(e){let{r:t,g:n,b:o}=e,[r,a,l]=[t,n,o].map(e=>{let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)});return .2126*r+.7152*a+.0722*l}(o)>.6?n:t}(n);return t&&(t.style.setProperty("--note-color",n),t.style.setProperty("--note-ink",o),t.style.backgroundColor=n,t.style.color=o,e.colorToken?t.dataset.colorToken=e.colorToken:delete t.dataset.colorToken),{background:n,ink:o}}let m="notes",h=null;function g(){return h||(h=(0,r.getDb)("stickyNotes",1,{upgrade(e,t){t<1&&e.createObjectStore(m,{keyPath:"id"})},blocked(){console.error("Sticky notes DB upgrade blocked")},blocking(){console.warn("Waiting for other tabs to close the Sticky notes DB")}})),h}let y=[];async function v(){try{let e=g();if(!e)return;let t=(await e).transaction(m,"readwrite");for(let e of(await t.store.clear(),y))f(e),await t.store.put(e);await t.done}catch(e){console.error("Failed to save notes",e)}}function k(e){if(!a)return;f(e);let t=document.createElement("div");t.className="note",t.style.left=e.x+"px",t.style.top=e.y+"px",t.style.width=(e.width||200)+"px",t.style.height=(e.height||200)+"px",t.dataset.id=e.id;let{background:n}=p(e,t),o=document.createElement("div");o.className="controls";let r=document.createElement("input");r.type="color",r.value=n,r.defaultValue=n,r.setAttribute("aria-label","Note color"),r.title="Choose note color",r.addEventListener("input",n=>{let o=u(n.target.value,e.color),a=d(i,s);e.color=o,o===a?e.colorToken=i:e.colorToken&&delete e.colorToken,r.value=p(e,t).background,v()});let l=document.createElement("button");l.textContent="Delete",l.className="delete-note",l.addEventListener("click",()=>{y=y.filter(t=>t.id!==e.id),t.remove(),v()}),o.appendChild(r),o.appendChild(l),t.appendChild(o);let c=document.createElement("textarea");c.value=e.content,c.addEventListener("input",t=>{e.content=t.target.value,v()}),t.appendChild(c),t.addEventListener("mouseup",()=>{e.width=t.offsetWidth,e.height=t.offsetHeight,v()}),function(e,t){let n,o;function r(r){t.x=r.clientX-n,t.y=r.clientY-o,e.style.left=t.x+"px",e.style.top=t.y+"px"}function a(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",a),v()}e.addEventListener("mousedown",function(t){["TEXTAREA","INPUT","BUTTON"].includes(t.target.tagName)||(n=t.clientX-e.offsetLeft,o=t.clientY-e.offsetTop,document.addEventListener("mousemove",r),document.addEventListener("mouseup",a))})}(t,e),a.appendChild(t)}function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=d(i,s),n={id:Date.now(),content:e,x:50,y:50,color:t,colorToken:i,width:200,height:200};y.push(n),k(n),v()}async function E(){try{var e;let t=g();if(!t)return;let n=await t;y=null!=(e=await n.getAll(m))?e:[];let o=!1,r=!1;if(y=y.map(e=>(e&&f(e)&&(o=!0),e)),0===y.length){let e=JSON.parse(localStorage.getItem("stickyNotes")||"[]");e.length&&(y=e.map(e=>(f(e),e)),o=!0,r=!0)}o&&await v(),r&&localStorage.removeItem("stickyNotes"),y.forEach(k);let a=new URLSearchParams(location.search).get("text");a&&(w(a),history.replaceState(null,"",location.pathname))}catch(e){console.error("Failed to load notes",e);try{(y=(y=JSON.parse(localStorage.getItem("stickyNotes")||"[]")||[]).map(e=>(f(e),e))).forEach(k)}catch(e){console.error("Failed to load legacy notes",e)}}}o.isBrowser&&l&&(l.addEventListener("click",w),E())},57613:(e,t,n)=>{n.d(t,{hasStorage:()=>r,isBrowser:()=>o.isBrowser});var o=n(31730);let r="undefined"!=typeof localStorage}}]);