"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[887],{17894:(e,t,n)=>{n.d(t,{default:()=>r});var a=n(14232);function r(e,t){let[n,r]=(0,a.useState)(t),[l,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let n=!0;return(async()=>{var a;if(!(null==(a=navigator.storage)?void 0:a.getDirectory))return i(!0);try{let a=await navigator.storage.getDirectory();try{let t=await a.getFileHandle(e),l=await t.getFile(),i=await l.text();n&&r(JSON.parse(i))}catch(l){let n=await a.getFileHandle(e,{create:!0}),r=await n.createWritable();await r.write(JSON.stringify(t)),await r.close()}}catch(e){}n&&i(!0)})(),()=>{n=!1}},[e,t]),[n,(0,a.useCallback)(async t=>{var n;if(r(t),null==(n=navigator.storage)?void 0:n.getDirectory)try{let n=await navigator.storage.getDirectory(),a=await n.getFileHandle(e,{create:!0}),r=await a.createWritable();await r.write(JSON.stringify(t)),await r.close()}catch(e){}},[e]),l]}},27528:(e,t,n)=>{n.d(t,{safeLocalStorage:()=>a});let a=n(57613).hasStorage?localStorage:void 0},30887:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D,openFileDialog:()=>S,saveFileDialog:()=>N});var a=n(37876),r=n(14232),l=n(17894),i=n(35326);let o="recent-v2",s="recent",c=null;function d(){return c||(c=(0,i.getDb)("file-explorer",2,{upgrade:async(e,t,n,a)=>{if(e.objectStoreNames.contains(o)||e.createObjectStore(o,{keyPath:"id"}),t<2&&e.objectStoreNames.contains(s)){let e=null==a?void 0:a.objectStore(s),t=null==a?void 0:a.objectStore(o);if(e&&t){var r,l;for(let n of null!=(r=await e.getAll())?r:[]){let e={id:n.id||"legacy-".concat(n.timestamp,"-").concat(n.name),name:n.name,handle:n.handle,timestamp:null!=(l=n.timestamp)?l:Date.now()};await t.put(e)}}}}})),c}async function u(e,t){var n,a,r;try{if(null==(r=e.handle)?void 0:r.isSameEntry)return await e.handle.isSameEntry(t.handle)}catch(e){}return e.name===t.name&&(null==(n=e.handle)?void 0:n.name)===(null==(a=t.handle)?void 0:a.name)}async function f(e){return e.length<=10?[]:[...e].sort((e,t)=>{var n,a;return(null!=(n=t.timestamp)?n:0)-(null!=(a=e.timestamp)?a:0)}).slice(10)}async function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{var t;let n=d();if(!n)return[];let a=await n,r=(null!=(t=await a.getAll(o))?t:[]).sort((e,t)=>{var n,a;return(null!=(n=t.timestamp)?n:0)-(null!=(a=e.timestamp)?a:0)}),l=r.slice(0,e);if(r.length>e){let t=r.slice(e),n=a.transaction(o,"readwrite"),l=n.objectStore(o);await Promise.all(t.map(e=>l.delete(e.id))),await n.done}return l}catch(e){return[]}}async function m(e,t){try{var n;let a=d();if(!a)return;let r=(await a).transaction(o,"readwrite"),l=r.objectStore(o),i=null!=(n=await l.getAll())?n:[],s={id:"undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():"recent-".concat(Date.now(),"-").concat(Math.random().toString(16).slice(2)),name:t||e.name||"/",handle:e,timestamp:Date.now()};for(let e of i)await u(e,s)&&await l.delete(e.id);await l.put(s);let c=await f([...i.filter(e=>e.id!==s.id),s]);await Promise.all(c.map(e=>l.delete(e.id))),await r.done}catch(e){}}function h(e){return"directory"===e.kind}function y(e){return"file"===e.kind}async function g(e){let t=[],n=[];if(e&&"function"==typeof e.entries)for await(let[a,r]of e.entries())r&&(h(r)?t.push({name:a,handle:r}):y(r)&&n.push({name:a,handle:r}));else{if(!e||"function"!=typeof e.values)return{directories:t,files:n};for await(let a of e.values())a&&(h(a)?t.push({name:a.name,handle:a}):y(a)&&n.push({name:a.name,handle:a}))}return t.sort((e,t)=>e.name.localeCompare(t.name)),n.sort((e,t)=>e.name.localeCompare(t.name)),{directories:t,files:n}}function v(e,t){return e instanceof Promise?e.catch(()=>t):Promise.resolve(null!=e?e:t)}async function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readwrite";return!!e&&(!e.queryPermission||!e.requestPermission||"granted"===await v(e.queryPermission({mode:t}),"prompt")||"granted"===await v(e.requestPermission({mode:t}),"denied"))}var b=n(92284);let x=e=>{let{path:t,onNavigate:n}=e;return(0,a.jsx)("nav",{className:"flex items-center space-x-1 text-white","aria-label":"Breadcrumb",children:t.map((e,l)=>(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)("button",{type:"button",onClick:()=>n(l),className:"hover:underline focus:outline-none",children:e.name||"/"}),l<t.length-1&&(0,a.jsx)("span",{children:"/"})]},l))})};var k=n(12227),j=n(75938);async function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(window.showOpenFilePicker){let[t]=await window.showOpenFilePicker(e);return t}return await new Promise(t=>{let n=document.createElement("input");if(n.type="file",(null==e?void 0:e.multiple)&&(n.multiple=!0),null==e?void 0:e.types){let t=e.types.map(e=>e.accept&&Object.values(e.accept).flat()).flat().join(",");t&&(n.accept=t)}n.onchange=()=>{let e=n.files[0];t(e&&{name:e.name,getFile:async()=>e})},n.click()})}async function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return window.showSaveFilePicker?await window.showSaveFilePicker(e):{name:(null==e?void 0:e.suggestedName)||"download",createWritable:async()=>({async write(t){let n=t instanceof Blob?t:new Blob([t]),a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download=(null==e?void 0:e.suggestedName)||"download",r.click(),URL.revokeObjectURL(a)},async close(){}})}}function D(){let{context:e,initialPath:t,path:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[o,s]=(0,r.useState)(null),[c,d]=(0,r.useState)(""),[u,f]=(0,r.useState)(""),[h,y]=(0,r.useState)(""),[v,S]=(0,r.useState)([]),[N,D]=(0,r.useState)(!1),[F,P]=(0,r.useState)(null),[C,E]=(0,r.useState)(null),[A,B]=(0,r.useState)(["root"]),[L,I]=(0,r.useState)([]),[R,O]=(0,r.useState)([]),[U,W]=(0,r.useState)([]),[M,T]=(0,r.useState)(null),[H,J]=(0,r.useState)("idle"),[_,q]=(0,r.useState)({scanned:0,skipped:0}),K=(0,r.useRef)(null),V="undefined"!=typeof Worker,{supported:z,root:G,getDir:$,readFile:X,writeFile:Y,deleteFile:Q}=(0,l.default)(),Z="undefined"!=typeof FileSystemDirectoryHandle&&("function"==typeof FileSystemDirectoryHandle.prototype.entries||"function"==typeof FileSystemDirectoryHandle.prototype.values),ee="function"==typeof window.showDirectoryPicker,et=!(z||Z),en=ee&&Z,{currentDirectory:ea,directories:er,files:el,breadcrumbs:ei,recent:eo,locationError:es,openHandle:ec,enterDirectory:ed,navigateTo:eu,goBack:ef,openPath:ep,setLocationError:em}=function(){let[e,t]=(0,r.useState)(null),[n,a]=(0,r.useState)(null),[l,i]=(0,r.useState)([]),[o,s]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[u,f]=(0,r.useState)([]),[h,y]=(0,r.useState)(null),v=(0,r.useRef)(0),w=(0,r.useCallback)(async()=>{f(await p())},[]);(0,r.useEffect)(()=>{w()},[w]);let b=(0,r.useCallback)(async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Date.now();v.current=r,y(null);try{var l;let{directories:o,files:c}=await g(e);if(v.current!==r)return;n.setAsRoot&&t(e),a(e),d(null!=(l=n.breadcrumbs)?l:[{name:e.name||"/",handle:e}]),i(o),s(c)}catch(e){if(v.current!==r)return;y(e instanceof Error?"NotAllowedError"===e.name?"Permission denied when reading directory. Please re-open and grant access.":e.message:"Unable to read directory contents")}},[]),x=(0,r.useCallback)(async function(e){var t,n,a;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=null!=(n=null!=(t=r.breadcrumbName)?t:e.name)?n:"/",i=null!=(a=r.breadcrumbs)?a:[{name:l,handle:e}];await b(e,{breadcrumbs:i,setAsRoot:r.setAsRoot}),r.recordRecent&&(await m(e,l).catch(()=>{}),await w())},[w,b]),k=(0,r.useCallback)(async e=>{if(!(null==e?void 0:e.handle))return;let t=[...c,{name:e.name,handle:e.handle}];await b(e.handle,{breadcrumbs:t})},[c,b]),j=(0,r.useCallback)(async e=>{let t=c[e];if(!(null==t?void 0:t.handle))return;let n=c.slice(0,e+1);await b(t.handle,{breadcrumbs:n})},[c,b]),S=(0,r.useCallback)(async()=>{if(c.length<=1)return;let e=c.slice(0,-1),t=e[e.length-1];(null==t?void 0:t.handle)&&await b(t.handle,{breadcrumbs:e})},[c,b]);return{currentDirectory:n,directories:l,files:o,breadcrumbs:c,recent:u,locationError:h,openHandle:x,enterDirectory:k,navigateTo:j,goBack:S,openPath:(0,r.useCallback)(async t=>{if(!e)return;let n=t.replace(/^~\//,"home/kali/").replace(/^\/+/,"").trim();if(!n)return void await b(e,{breadcrumbs:[{name:e.name||"/",handle:e}],setAsRoot:!0});try{let t=e,a=[{name:e.name||"/",handle:e}];for(let e of n.split("/").map(e=>e.trim()).filter(Boolean))t=await t.getDirectoryHandle(e,{create:!1}),a.push({name:e,handle:t});await b(t,{breadcrumbs:a})}catch(e){y(e instanceof Error?"NotFoundError"===e.name?"Path not found: ".concat(t):e.message:"Unable to open ".concat(t))}},[e,b]),refreshRecents:w,setLocationError:y}}(),[eh,ey]=(0,r.useState)(null),eg=(0,r.useMemo)(()=>o&&c!==u,[c,o,u]);(0,r.useEffect)(()=>{if(!z||!G)return;let e=!0;return(async()=>{let t=await $("unsaved");e&&ey(t),e&&await ec(G,{setAsRoot:!0})})(),()=>{e=!1}},[z,G,$,ec]),(0,r.useEffect)(()=>{var n,a,r;if(!z||!G)return;let l=(null!=(r=null!=(a=null!=(n=null==e?void 0:e.initialPath)?n:null==e?void 0:e.path)?a:t)?r:i)||"";l&&ep(l)},[e,t,i,z,G,ep]);let ev=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["root"];if(!e)return;let n=(0,b.findNodeByPathIds)(e,t),a=n[n.length-1];if(!a)return;let{directories:r,files:l}=(0,b.listDirectory)(a);I(r),O(l),W(n.map(e=>({name:e.name,id:e.id})))},[]);(0,r.useEffect)(()=>{var n,a,r;if(!et)return;let l=(0,b.loadFauxFileSystem)(),o=(null!=(r=null!=(a=null!=(n=null==e?void 0:e.initialPath)?n:null==e?void 0:e.path)?a:t)?r:i)||"",s=o?(0,b.findNodeByPathNames)(l,o.split("/")):["root"];E(l),B(s),ev(l,s)},[et,e,t,i,ev]);let ew=async(e,t)=>{eh&&await Y(e,t,eh)},eb=async e=>eh?await X(e,eh):null,ex=async e=>{eh&&await Q(e,eh)},ek=async()=>{if(!en)return void em("This browser cannot open external folders. Use the built-in workspace instead.");if(await eD())try{let e=await window.showDirectoryPicker();if(!await w(e))return void em("Permission denied while opening folder. Please allow access in the browser prompt.");await ec(e,{recordRecent:!0,setAsRoot:!0})}catch(e){em((null==e?void 0:e.name)==="NotAllowedError"?"Folder access was blocked. Re-run and grant permission to continue.":"Unable to open folder. Please check your browser permissions.")}},ej=async e=>{if(await eD())try{if(!await w(e.handle))return void em("Permission denied for this recent location. Please re-authorize access.");await ec(e.handle,{breadcrumbName:e.name,setAsRoot:!0})}catch(e){em((null==e?void 0:e.name)==="NotAllowedError"?"Access to this location was blocked. Try reopening and granting permission.":"Unable to reopen recent location.")}},eS=async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=await e.getFile();if(!n.stream)return{text:await n.text(),file:n};let a=n.stream().getReader(),r=new TextDecoder,l="",i=0;for(;;){let{done:e,value:n}=await a.read();if(e)break;l+=r.decode(n,{stream:!0}),(i+=1)%8==0&&t&&d(l)}return{text:l+=r.decode(),file:n}},eN=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=e.toLowerCase(),l="string"==typeof a.url?a.url:null;if(r.match(/\.(png|jpg|jpeg|gif|webp|svg)$/))return l?{type:"image",url:l}:{type:"image",url:URL.createObjectURL(t)};if(r.endsWith(".pdf"))return l?{type:"pdf",url:l}:null;if(r.endsWith(".json"))try{let e=JSON.parse(n);return{type:"json",text:JSON.stringify(e,null,2)}}catch(e){return{type:"text",text:n}}return r.endsWith(".md")||r.endsWith(".markdown")?{type:"markdown",html:k.default.sanitize(j.marked.parse(n))}:l?{type:"link",url:l}:{type:"text",text:n}},eD=async()=>!eg||!!window.confirm("You have unsaved changes. Click OK to save before continuing, or Cancel to stay on this file.")&&(await eC(),!0),eF=async e=>{if(!await eD())return;s(e),P(null),d(""),f("");let t="";if(z){let n=await eb(e.name);null!==n&&(t=n)}try{D(!0);let{text:n,file:a}=await eS(e.handle,!t);t||(t=n),P(eN(e.name,a,t)),d(t),f(n)}catch(e){em((null==e?void 0:e.name)==="NotAllowedError"?"Permission denied while opening file. Please allow access and retry.":"Unable to open file. The handle may no longer be available.")}finally{D(!1)}},eP=async e=>{var t;if(!await eD())return;s({...e,virtual:!0}),P(null),d(""),f("");let n=null!=(t=null==e?void 0:e.content)?t:"";d(n),f(n),P(eN(e.name,null,n,{url:e.url}))},eC=async()=>{if(o){if(o.virtual){if(!C)return;let e=(0,b.updateFileContent)(C,A,o.id,c);E(e),(0,b.saveFauxFileSystem)(e),f(c);return}try{let e=await o.handle.createWritable();await e.write(c),await e.close(),z&&await ex(o.name),f(c)}catch(e){em((null==e?void 0:e.name)==="NotAllowedError"?"Save permission denied. Please allow file writes in the browser prompt.":"Failed to save file.")}}};(0,r.useEffect)(()=>()=>{var e;return null==(e=K.current)?void 0:e.terminate()},[]),(0,r.useEffect)(()=>()=>{(null==F?void 0:F.type)==="image"&&F.url&&F.url.startsWith("blob:")&&URL.revokeObjectURL(F.url)},[F]);let eE=et?L:er,eA=et?R:el,eB=et?U:ei,eL=e=>{window.open(e,"_blank","noopener,noreferrer")};return(0,a.jsxs)("div",{className:"w-full h-full flex flex-col bg-ub-cool-grey text-white text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-ub-warm-grey bg-opacity-40",children:[(0,a.jsx)("button",{onClick:et?()=>{C&&(B(["root"]),ev(C,["root"]))}:ek,className:"px-2 py-1 rounded ".concat(et||en?"bg-black bg-opacity-50":"bg-black bg-opacity-30 cursor-not-allowed"),disabled:!et&&!en,children:et?"Go Home":"Open Folder"}),eB.length>1&&(0,a.jsx)("button",{onClick:()=>{(async()=>{if(!await eD())return;if(!et)return ef();if(!C||A.length<=1)return;let e=A.slice(0,-1);B(e),ev(C,e)})()},className:"px-2 py-1 bg-black bg-opacity-50 rounded",children:"Back"}),(0,a.jsx)(x,{path:eB,onNavigate:e=>{if(et){if(!C)return;let t=A.slice(0,e+1);B(t),ev(C,t)}else(async()=>{await eD()&&eu(e)})()}}),es&&(0,a.jsx)("div",{className:"text-xs text-red-300",role:"status",children:es}),et&&(0,a.jsx)("div",{className:"text-xs text-sky-200",children:"Demo file system"}),!et&&z&&(0,a.jsx)("div",{className:"text-xs text-sky-200",children:"Workspace mode"}),o&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-auto",children:[eg&&(0,a.jsx)("span",{className:"text-xs text-yellow-200","aria-live":"polite",children:"Unsaved changes"}),(0,a.jsx)("button",{onClick:eC,disabled:!eg||o.virtual&&o.url,className:"px-2 py-1 rounded ".concat(eg&&!(o.virtual&&o.url)?"bg-green-700 hover:bg-green-600":"bg-black bg-opacity-40 cursor-not-allowed"),children:o.virtual&&o.url?"Read-only":eg?"Save changes":"Saved"})]})]}),(0,a.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,a.jsxs)("div",{className:"w-40 overflow-auto border-r border-gray-600",children:[(0,a.jsx)("div",{className:"p-2 font-bold",children:"Recent"}),et?(0,a.jsx)("div",{className:"px-2 text-xs text-slate-300",children:"Recents are available in real file mode."}):eo.map(e=>(0,a.jsx)("div",{className:"px-2 cursor-pointer hover:bg-black hover:bg-opacity-30",onClick:()=>ej(e),children:e.name},e.id)),(0,a.jsx)("div",{className:"p-2 font-bold",children:"Directories"}),eE.map((e,t)=>(0,a.jsx)("div",{className:"px-2 cursor-pointer hover:bg-black hover:bg-opacity-30",onClick:()=>et?void(async()=>{if(!await eD()||!C)return;let t=[...A,e.id];B(t),ev(C,t)})():void(async()=>{await eD()&&ed(e)})(),onDragOver:e=>{et&&e.preventDefault()},onDrop:()=>(e=>{if(!C||!M||!e||e===M.id)return;let t=[...A,e],n=(0,b.moveEntry)(C,M.sourcePath,M.id,t);E(n),(0,b.saveFauxFileSystem)(n),ev(n,A),T(null)})(e.id),children:e.name},t)),(0,a.jsx)("div",{className:"p-2 font-bold",children:"Files"}),eA.map((e,t)=>(0,a.jsx)("div",{className:"px-2 cursor-pointer hover:bg-black hover:bg-opacity-30",onClick:()=>et?eP(e):eF(e),draggable:et,onDragStart:()=>{et&&T({id:e.id,sourcePath:A})},onDragEnd:()=>{et&&T(null)},children:e.name},t))]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[o&&(0,a.jsxs)("div",{className:"flex flex-col flex-1 overflow-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-2 py-1 border-b border-gray-600 bg-black bg-opacity-20",children:[(0,a.jsx)("div",{className:"font-semibold",children:o.name}),N&&(0,a.jsx)("div",{className:"text-xs text-gray-300",children:"Loading..."})]}),F&&(0,a.jsxs)("div",{className:"p-2 border-b border-gray-700 overflow-auto max-h-64 bg-black bg-opacity-20",children:["image"===F.type&&(0,a.jsx)("img",{src:F.url,alt:"".concat(o.name," preview"),className:"max-h-60 mx-auto"}),"pdf"===F.type&&(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3 text-xs",children:[(0,a.jsx)("span",{children:"PDF preview available"}),(0,a.jsx)("button",{onClick:()=>eL(F.url),className:"px-2 py-1 bg-black bg-opacity-50 rounded",children:"Open PDF"})]}),"json"===F.type&&(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-xs bg-black bg-opacity-30 p-2 rounded",children:F.text}),"markdown"===F.type&&(0,a.jsx)("div",{className:"prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:F.html}}),"link"===F.type&&(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3 text-xs",children:[(0,a.jsx)("span",{children:"Open this file in a new tab."}),(0,a.jsx)("button",{onClick:()=>eL(F.url),className:"px-2 py-1 bg-black bg-opacity-50 rounded",children:"Open"})]})]}),(0,a.jsx)("textarea",{className:"flex-1 p-2 bg-ub-cool-grey outline-none",value:c,onChange:e=>{let t=e.target.value;d(t),z&&o&&!o.virtual&&ew(o.name,t)},"aria-label":"File content",readOnly:o.virtual&&o.url})]}),(0,a.jsxs)("div",{className:"p-2 border-t border-gray-600",children:[(0,a.jsx)("input",{value:h,onChange:e=>y(e.target.value),placeholder:"Find in files",className:"px-1 py-0.5 text-black","aria-label":"Find in files"}),(0,a.jsx)("button",{onClick:()=>{if(et){if(!C)return;J("done"),q({scanned:0,skipped:0}),S((0,b.searchFiles)(C,h).map(e=>({kind:"faux",path:e.path,name:e.file.name,id:e.file.id})));return}ea&&V&&(J("searching"),q({scanned:0,skipped:0}),S([]),K.current&&K.current.terminate(),"function"==typeof Worker&&(K.current=new Worker(n.tu(new URL(n.p+n.u(8470),n.b))),K.current.onmessage=e=>{var t,n,a,r,l;let i=e.data;i&&("result"===i.type&&S(e=>[...e,{file:i.file,line:i.line,text:i.text}]),"progress"===i.type&&q({scanned:null!=(t=i.scanned)?t:0,skipped:null!=(n=i.skipped)?n:0}),"done"===i.type&&(q({scanned:null!=(r=i.scanned)?r:0,skipped:null!=(l=i.skipped)?l:0}),J(i.cancelled?"idle":"done"),null==(a=K.current)||a.terminate(),K.current=null))},K.current.postMessage({directoryHandle:ea,query:h,options:{caseSensitive:!1,allowLargeFiles:!1,maxFileSizeBytes:1048576,skipBinary:!0}})))},className:"ml-2 px-2 py-1 bg-black bg-opacity-50 rounded",children:"Search"}),"searching"===H&&(0,a.jsx)("button",{onClick:()=>{K.current&&(K.current.postMessage({type:"cancel"}),J("cancelling"))},className:"ml-2 px-2 py-1 bg-black bg-opacity-50 rounded",children:"Stop"}),"idle"!==H&&(0,a.jsxs)("span",{className:"ml-3 text-xs text-slate-300",children:["cancelling"===H?"Stoppingâ€¦":"Scanned"," ",_.scanned," ","files",_.skipped?", skipped ".concat(_.skipped):""]}),(0,a.jsx)("div",{className:"max-h-40 overflow-auto mt-2",children:v.map((e,t)=>(0,a.jsx)("div",{children:"faux"===e.kind?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"font-bold",children:e.path})," ",e.name]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"font-bold",children:[e.file,":",e.line]})," ",e.text]})},t))})]})]})]})]})}},31730:(e,t,n)=>{n.d(t,{hasIndexedDB:()=>r,isBrowser:()=>a});let a="undefined"!=typeof document,r=a&&"undefined"!=typeof indexedDB},35326:(e,t,n)=>{let a,r;n.d(t,{getDb:()=>v});let l=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,c=new WeakMap,d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return i.get(e);if("objectStoreNames"===t)return e.objectStoreNames||o.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return u(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function u(e){if(e instanceof IDBRequest){let t=new Promise((t,n)=>{let a=()=>{e.removeEventListener("success",r),e.removeEventListener("error",l)},r=()=>{t(u(e.result)),a()},l=()=>{n(e.error),a()};e.addEventListener("success",r),e.addEventListener("error",l)});return t.then(t=>{t instanceof IDBCursor&&l.set(t,e)}).catch(()=>{}),c.set(t,e),t}if(s.has(e))return s.get(e);let t=function(e){if("function"==typeof e)return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(f(this),t),u(l.get(this))}:function(...t){return u(e.apply(f(this),t))}:function(t,...n){let a=e.call(f(this),t,...n);return o.set(a,t.sort?t.sort():[t]),u(a)};return e instanceof IDBTransaction&&function(e){if(i.has(e))return;let t=new Promise((t,n)=>{let a=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",l),e.removeEventListener("abort",l)},r=()=>{t(),a()},l=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",r),e.addEventListener("error",l),e.addEventListener("abort",l)});i.set(e,t)}(e),(a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(e,d):e}(e);return t!==e&&(s.set(e,t),c.set(t,e)),t}let f=e=>c.get(e),p=["get","getKey","getAll","getAllKeys","count"],m=["put","add","delete","clear"],h=new Map;function y(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(h.get(t))return h.get(t);let n=t.replace(/FromIndex$/,""),a=t!==n,r=m.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(r||p.includes(n)))return;let l=async function(e,...t){let l=this.transaction(e,r?"readwrite":"readonly"),i=l.store;return a&&(i=i.index(t.shift())),(await Promise.all([i[n](...t),r&&l.done]))[0]};return h.set(t,l),l}d=(e=>({...e,get:(t,n,a)=>y(t,n)||e.get(t,n,a),has:(t,n)=>!!y(t,n)||e.has(t,n)}))(d);var g=n(31730);function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return g.hasIndexedDB?function(e,t,{blocked:n,upgrade:a,blocking:r,terminated:l}={}){let i=indexedDB.open(e,t),o=u(i);return a&&i.addEventListener("upgradeneeded",e=>{a(u(i.result),e.oldVersion,e.newVersion,u(i.transaction),e)}),n&&i.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{l&&e.addEventListener("close",()=>l()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}(e,t,n):null}},57613:(e,t,n)=>{n.d(t,{hasStorage:()=>r,isBrowser:()=>a.isBrowser});var a=n(31730);let r="undefined"!=typeof localStorage},92284:(e,t,n)=>{n.d(t,{findNodeByPathIds:()=>d,findNodeByPathNames:()=>c,listDirectory:()=>u,loadFauxFileSystem:()=>h,moveEntry:()=>f,saveFauxFileSystem:()=>y,searchFiles:()=>m,updateFileContent:()=>p});var a=n(27528);let r="faux_file_system_v1",l=e=>"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e)),i=()=>({id:"root",name:"/",type:"folder",children:[{id:"desktop",name:"Desktop",type:"folder",children:[{id:"desktop-welcome",name:"Welcome.txt",type:"file",content:"Welcome to your Kali-style desktop. Drop files into folders, open samples, and explore the portfolio assets from here."}]},{id:"documents",name:"Documents",type:"folder",children:[{id:"resume-pdf",name:"Alex-Unnippillil-Resume.pdf",type:"file",url:"/assets/Alex-Unnippillil-Resume.pdf"},{id:"timeline-pdf",name:"Timeline.pdf",type:"file",url:"/assets/timeline.pdf"},{id:"contact-card",name:"alex-unnippillil.vcf",type:"file",url:"/assets/alex-unnippillil.vcf"}]},{id:"projects",name:"Projects",type:"folder",children:[{id:"portfolio-notes",name:"portfolio-overview.md",type:"file",content:"# Portfolio Highlights\n\n- Desktop-style UX with draggable windows\n- Kali-inspired tool simulations\n- Games arcade for quick demos\n\nTip: open the Projects folder to preview this markdown in Files."},{id:"project-checklist",name:"launch-checklist.json",type:"file",content:JSON.stringify({status:"ready",checks:["Run yarn lint","Run yarn test","Capture screenshots"]},null,2)}]},{id:"media",name:"Media",type:"folder",children:[{id:"brand-mark",name:"brand-mark.svg",type:"file",url:"/images/logos/fevicon.svg"}]}]}),o=(e,t)=>{if(!e||"folder"!==e.type)return null;if(e.id===t)return e;for(let n of Array.isArray(e.children)?e.children:[])if((null==n?void 0:n.type)==="folder"){let e=o(n,t);if(e)return e}return null},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(e=>e.trim()).filter(Boolean)},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e,a=[e.id];for(let e of s(t)){if(!n||"folder"!==n.type)break;let t=(Array.isArray(n.children)?n.children:[]).find(t=>(null==t?void 0:t.type)==="folder"&&t.name.toLowerCase()===e.toLowerCase());if(!t)break;n=t,a.push(n.id)}return a},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];let n=[],a=e;for(let e of(n.push(a),t.slice(1))){if(!a||"folder"!==a.type)break;let t=(Array.isArray(a.children)?a.children:[]).find(t=>(null==t?void 0:t.id)===e&&"folder"===t.type);if(!t)break;n.push(t),a=t}return n},u=e=>{let t=Array.isArray(null==e?void 0:e.children)?e.children:[],n=t.filter(e=>(null==e?void 0:e.type)==="folder"),a=t.filter(e=>(null==e?void 0:e.type)==="file");return n.sort((e,t)=>e.name.localeCompare(t.name)),a.sort((e,t)=>e.name.localeCompare(t.name)),{directories:n,files:a}},f=(e,t,n,a)=>{if(!n||"root"===n)return e;let r=l(e),i=d(r,t),o=d(r,a),s=i[i.length-1],c=o[o.length-1];if(!s||!c||"folder"!==s.type||"folder"!==c.type||s.id===c.id)return e;let u=Array.isArray(s.children)?s.children:[],f=u.findIndex(e=>(null==e?void 0:e.id)===n);if(-1===f)return e;let[p]=u.splice(f,1),m=Array.isArray(c.children)?c.children:[];return!m.some(e=>(null==e?void 0:e.id)===n)&&p&&m.push(p),s.children=u,c.children=m,r},p=(e,t,n,a)=>{if(!n)return e;let r=l(e),i=d(r,t),o=i[i.length-1];if(!o||"folder"!==o.type)return e;let s=(Array.isArray(o.children)?o.children:[]).find(e=>(null==e?void 0:e.id)===n&&"file"===e.type);return s?(s.content=a,r):e},m=(e,t)=>{let n=[];if(!t)return n;let a=t.toLowerCase(),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e&&("file"===e.type&&e.name.toLowerCase().includes(a)&&n.push({file:e,path:t.join("/")}),"folder"===e.type&&(Array.isArray(e.children)?e.children:[]).forEach(n=>{let a="root"===e.id?[n.name]:[...t,n.name];r(n,a)}))};return r(e,[]),n},h=()=>{if(!a.safeLocalStorage)return i();try{let e=a.safeLocalStorage.getItem(r),t=e?JSON.parse(e):null,n=t&&"object"==typeof t?t:i(),s=(e=>{let t=l(e),n=o(t,"desktop");if(!n)return t;let r=Array.isArray(n.children)?n.children:[],i=new Set(r.map(e=>null==e?void 0:e.id).filter(Boolean)),s=(()=>{if(!a.safeLocalStorage)return[];try{let e=a.safeLocalStorage.getItem("new_folders");if(!e)return[];let t=JSON.parse(e);if(!Array.isArray(t))return[];return t.map(e=>e&&"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.name?{id:e.id,name:e.name}:null).filter(Boolean)}catch(e){return[]}})(),c=!1;return s.forEach(e=>{i.has(e.id)||(r.push({id:e.id,name:e.name,type:"folder",children:[]}),c=!0)}),c&&(n.children=r),t})(n);return y(s),s}catch(t){let e=i();return y(e),e}},y=e=>{if(a.safeLocalStorage)try{a.safeLocalStorage.setItem(r,JSON.stringify(e))}catch(e){}}}}]);