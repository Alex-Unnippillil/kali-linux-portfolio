"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7369],{97369:(e,t,n)=>{let a;n.r(t),n.d(t,{default:()=>S});var r=n(37876),s=n(14232),l=n(70994);let o=["\uD83C\uDF4E","\uD83C\uDF4C","\uD83C\uDF47","\uD83C\uDF53","\uD83C\uDF4D","\uD83E\uDD5D","\uD83C\uDF51","\uD83E\uDD51","\uD83C\uDF46","\uD83E\uDD55","\uD83C\uDF3D","\uD83E\uDD54","\uD83C\uDF4A","\uD83C\uDF50","\uD83E\uDD65","\uD83E\uDED0","\uD83E\uDD6D","\uD83C\uDF45"],c=["▲","■","●","◆","★","✚","△","□"],i=["red","blue","green","yellow","purple","pink","orange","teal","lime","indigo","amber","rose","sky","fuchsia","violet","cyan","emerald","gray"],u={vibrant:i.map(e=>"text-".concat(e,"-600")),pastel:i.map(e=>"text-".concat(e,"-300")),mono:i.map((e,t)=>"text-gray-".concat((t%9+1)*100))},m=Array.from({length:26},(e,t)=>({value:String.fromCharCode(65+t)}));function d(e){var t;return t=(function(e){let t=0x6a09e667^e.length;for(let n=0;n<e.length;n++)t=(t=Math.imul(t^e.charCodeAt(n),0xcc9e2d51))<<13|t>>>19;return function(){return t=Math.imul((t=Math.imul(t^t>>>16,0x85ebca6b))^t>>>13,0xc2b2ae35),(t^=t>>>16)>>>0}})(String(null!=e?e:""))(),function(){let e=t+=0x6d2b79f5;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/0x100000000}}function g(){try{if("undefined"!=typeof crypto&&crypto.getRandomValues){let e=new Uint32Array(2);return crypto.getRandomValues(e),"".concat(e[0].toString(16)).concat(e[1].toString(16))}}catch(e){}return Math.floor(1e9*Math.random()).toString(16)}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,n=e.slice();for(let e=n.length-1;e>0;e--){let a=Math.floor(t()*(e+1));[n[e],n[a]]=[n[a],n[e]]}return n}let f={2:30,4:60,6:120},p={icons:["/themes/Yaru/apps/2048.svg","/themes/Yaru/apps/car-racer.svg","/themes/Yaru/apps/checkers.svg","/themes/Yaru/apps/flappy-bird.svg","/themes/Yaru/apps/frogger.svg","/themes/Yaru/apps/memory.svg","/themes/Yaru/apps/nmap-nse.svg","/themes/Yaru/apps/pacman.svg","/themes/Yaru/apps/pong.svg","/themes/Yaru/apps/radare2.svg","/themes/Yaru/apps/reversi.svg","/themes/Yaru/apps/snake.svg","/themes/Yaru/apps/sokoban.svg","/themes/Yaru/apps/tetris.svg","/themes/Yaru/apps/tictactoe.svg","/themes/Yaru/apps/tower-defense.svg","/themes/Yaru/apps/volatility.svg","/themes/Yaru/apps/wireshark.svg"]},v=[2,4,6],x=["countup","countdown"],y=["emoji","pattern","letters","theme"],b=["system","reduced","full"],w=(e,t)=>{let n=Object.keys(e||{});return t&&n.includes(t)?t:n[0]||"icons"},j=(e,t,n,a,r)=>{if(!(null==n?void 0:n.size))return e;let s=Math.floor(e/t),l=e%t;for(;n.has(s*t+l);){let e=s+a,n=l+r;if(e<0||e>=t||n<0||n>=t)break;s=e,l=n}return s*t+l},N=e=>{let{player:t,themePacks:n,onWin:l,roundId:i}=e,[p,N]=(0,s.useState)(4),[S,k]=(0,s.useState)("countup"),[D,C]=(0,s.useState)([]),[E,M]=(0,s.useState)([]),[T,R]=(0,s.useState)([]),[Y,F]=(0,s.useState)([]),[I,A]=(0,s.useState)(0),[L,P]=(0,s.useState)(0),[O,U]=(0,s.useState)(3),[z,J]=(0,s.useState)(!1),[q,_]=(0,s.useState)(!0),[W,G]=(0,s.useState)({moves:null,time:null}),[K,V]=(0,s.useState)(""),[B,H]=(0,s.useState)("emoji"),[X,Q]=(0,s.useState)("vibrant"),[Z,$]=(0,s.useState)(3),[ee,et]=(0,s.useState)(!1),[en,ea]=(0,s.useState)(0),[er,es]=(0,s.useState)([]),[el,eo]=(0,s.useState)(!1),[ec,ei]=(0,s.useState)(w(n)),[eu,em]=(0,s.useState)(g),[ed,eg]=(0,s.useState)("system"),[eh,ef]=(0,s.useState)(!1),[ep,ev]=(0,s.useState)(!1),[ex,ey]=(0,s.useState)(!1),[eb,ew]=(0,s.useState)(!1),[ej,eN]=(0,s.useState)(0),eS=(0,s.useRef)(0),ek=(0,s.useRef)(0),eD=(0,s.useRef)(),eC=(0,s.useRef)(null),eE=(0,s.useRef)([]),eM=(0,s.useRef)(L),eT=(0,s.useMemo)(()=>"game:memory:".concat(t,":").concat(p,":").concat(S,":best"),[t,p,S]),eR=(0,s.useMemo)(()=>"".concat("game:memory:settings",":").concat(t),[t]),eY=(0,s.useMemo)(()=>new Set(T),[T]);(0,s.useEffect)(()=>{let e=window.matchMedia("(prefers-reduced-motion: reduce)"),t=()=>{ef(e.matches)};return t(),e.addEventListener?e.addEventListener("change",t):e.addListener(t),()=>{e.removeEventListener?e.removeEventListener("change",t):e.removeListener(t)}},[]),(0,s.useEffect)(()=>{try{let e=window.localStorage.getItem(eR);if(!e)return;let t=JSON.parse(e),a=((e,t)=>{if(!e||"object"!=typeof e)return null;let n={},a=Number(e.size);return n.size=v.includes(a)?a:4,n.timerMode=x.includes(e.timerMode)?e.timerMode:"countup",n.deckType=y.includes(e.deckType)?e.deckType:"emoji",n.patternTheme=u[e.patternTheme]?e.patternTheme:"vibrant",n.previewTime=Number.isFinite(e.previewTime)?Math.min(10,Math.max(0,Math.round(e.previewTime))):3,n.sound="boolean"!=typeof e.sound||e.sound,n.motionSetting=b.includes(e.motionSetting)?e.motionSetting:"system",n.seed="string"==typeof e.seed&&e.seed.trim()?e.seed:g(),n.themeName=w(t,e.themeName),n})(t,n);if(!a)return;N(a.size),k(a.timerMode),H(a.deckType),Q(a.patternTheme),$(a.previewTime),_(a.sound),eg(a.motionSetting),em(a.seed),ei(a.themeName)}catch(e){try{window.localStorage.removeItem(eR)}catch(e){}}},[eR,n]),(0,s.useEffect)(()=>{let e={size:p,timerMode:S,deckType:B,patternTheme:X,previewTime:Z,sound:q,motionSetting:ed,seed:eu,themeName:w(n,ec)};try{window.localStorage.setItem(eR,JSON.stringify(e))}catch(e){}},[p,S,B,X,Z,q,ed,eu,ec,n,eR]),(0,s.useEffect)(()=>{let e=w(n,ec);e!==ec&&ei(e)},[n,ec]);let eF=(0,s.useCallback)(()=>{eE.current.forEach(clearTimeout),eE.current=[]},[]),eI=(0,s.useCallback)((e,t)=>{let n=setTimeout(e,t);return eE.current.push(n),n},[eE]);(0,s.useEffect)(()=>()=>eF(),[eF]);let eA="reduced"===ed||"system"===ed&&eh,eL=(0,s.useCallback)(()=>{if(!q)return;let e=(()=>{if(!a){let e=window.AudioContext||window.webkitAudioContext;if(!e)return null;a=new e}return(null==a?void 0:a.state)==="suspended"&&a.resume().catch(()=>null),a})();if(e)try{let t=e.createOscillator(),n=e.createGain();n.gain.value=.05,t.type="sine",t.frequency.value=600,t.connect(n),n.connect(e.destination),t.start(),t.stop(e.currentTime+.12)}catch(e){}},[q]),eP=(0,s.useCallback)(()=>{let e;eF(),ev(!1),ey(!1),es([]),eo(!1),ew(!1);let t=n[ec]||[],a=d("memory:".concat(eu,":").concat(p,":").concat(B,":").concat(ec,":").concat(X));if("theme"===B&&t.length){let n=p*p/2,r=h(t.map((e,t)=>({value:t+1,image:e,pairId:"".concat(ec,":").concat(t)})),a).slice(0,n);e=h([...r,...r].map((e,t)=>({id:t,...e})),a)}else e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emoji",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vibrant",a=arguments.length>3?arguments[3]:void 0,r=null!=a?d("deck:".concat(a,":").concat(e,":").concat(t,":").concat(n)):Math.random,s=h("pattern"===t?(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vibrant";return(u[e]||u.vibrant).map((e,t)=>({value:c[t%c.length],color:e}))})(n).map((e,t)=>({...e,pairId:"".concat(e.value,":").concat(e.color,":").concat(t)})):"letters"===t?m.map(e=>({...e,pairId:e.value})):o.map(e=>({value:e,pairId:e})),r).slice(0,e*e/2);return h([...s,...s].map((e,t)=>({id:t,...e})),r)}(p,B,X,eu);C(e);let r=Array.from({length:p*p},(e,t)=>t);Z>0?(M(r),et(!0),eI(()=>{M([]),et(!1)},1e3*Z)):(M([]),et(!1)),R([]),F([]),A(0);let s="countdown"===S?f[p]||60:0;P(s),eM.current=s,ek.current=s,U(3),J(!1),ey(!1),eS.current=0,eC.current=null,V(""),ea(0),eN(0)},[p,B,S,X,Z,n,ec,eF,eu,eI]);(0,s.useEffect)(()=>{eP()},[eP,i]),(0,s.useEffect)(()=>{try{let e=window.localStorage.getItem(eT);if(e){let t=JSON.parse(e);"object"==typeof t&&null!==t&&G(t)}else G({moves:null,time:null})}catch(e){try{window.localStorage.removeItem(eT)}catch(e){}}},[eT]);let eO=(0,s.useCallback)(()=>{try{let e={},t=window.localStorage.getItem(eT);if(t)try{e=JSON.parse(t)||{}}catch(e){window.localStorage.removeItem(eT)}let n="countdown"===S?ek.current-L:L,a=null!=e.moves?Math.min(e.moves,I):I,r=null!=e.time?Math.min(e.time,n):n,s={moves:a,time:r},l=JSON.stringify(s);window.localStorage.setItem(eT,l),G(s)}catch(e){}},[I,L,eT,S]),eU="countdown"===S&&L<=0;(0,s.useEffect)(()=>{if(D.length&&T.length===D.length){ey(!1),eO();let e="countdown"===S?ek.current-L:L;V("You won in ".concat(I," moves and ").concat(e," seconds")),null==l||l(t,{moves:I,time:e})}},[T,D.length,eO,I,L,S,l,t]),(0,s.useEffect)(()=>{let e=D.length/2||1;I<=2*e?U(3):I<=3*e?U(2):U(1)},[I,D.length]),(0,s.useEffect)(()=>{D.length&&eN(e=>{let t=Math.min(e,p*p-1);return eY.has(t)?((e,t)=>{let n=e*e;for(let e=0;e<n;e+=1)if(!t.has(e))return e;return 0})(p,eY):t})},[D.length,p,eY]),(0,s.useEffect)(()=>{eU&&(V("Time's up"),ey(!1))},[eU]);let ez=(0,s.useCallback)(()=>{eA||(es(Array.from({length:8}).map((e,t)=>({id:t,x:100*Math.random(),y:100*Math.random()}))),eo(!0),ew(!0),eI(()=>es([]),300),eI(()=>eo(!1),150),eI(()=>ew(!1),150))},[eA,eI]),eJ=z||ee||ep||eb||eU||T.length===D.length,eq=(0,s.useCallback)(e=>{if(!(eJ||E.includes(e)||eY.has(e))){if(eL(),!ex){let e="countdown"===S?ek.current-L:L;eS.current=performance.now()-1e3*e,ey(!0)}if(0===E.length)M([e]),eN(e);else if(1===E.length){let t=E[0];if(t===e)return;M([t,e]),ev(!0),A(e=>e+1);let n=400*!eA,a=800*!eA;D[t].pairId===D[e].pairId?(R(n=>[...n,t,e]),F([t,e]),V("Match found"),ea(e=>{let t=e+1;return t>1&&ez(),t}),eI(()=>{M([]),F([]),ev(!1)},n)):(V("No match"),ea(0),eI(()=>{M([]),ev(!1)},a))}}},[eJ,E,eY,eL,ex,S,L,eA,D,eI,ez]);(0,s.useEffect)(()=>{if(!ex)return;let e=t=>{if(!z){let e=Math.floor((t-eS.current)/1e3),n="countdown"===S?Math.max(ek.current-e,0):e;n!==eM.current&&(eM.current=n,P(n))}eD.current=requestAnimationFrame(e)};return eD.current=requestAnimationFrame(e),()=>cancelAnimationFrame(eD.current)},[ex,z,S]),(0,s.useEffect)(()=>{if(ex){if(z)eC.current=performance.now();else if(null!=eC.current){let e=performance.now()-eC.current;eS.current+=e,eC.current=null}}},[z,ex]);let e_=(0,s.useCallback)(e=>{if((e=>!!e&&e instanceof HTMLElement&&(["input","textarea","select"].includes(e.tagName.toLowerCase())||e.isContentEditable))(e.target)||!(p*p))return;let t=Math.floor(ej/p),n=ej%p;switch(e.key){case"ArrowUp":e.preventDefault(),eN(j(Math.max(0,t-1)*p+n,p,eY,-1,0));break;case"ArrowDown":e.preventDefault(),eN(j(Math.min(p-1,t+1)*p+n,p,eY,1,0));break;case"ArrowLeft":e.preventDefault(),eN(j(t*p+Math.max(0,n-1),p,eY,0,-1));break;case"ArrowRight":{e.preventDefault();let a=Math.min(p-1,n+1);eN(j(t*p+a,p,eY,0,1));break}case"Enter":case" ":e.preventDefault(),eq(ej);break;case"p":case"P":case"Escape":e.preventDefault(),eU||J(e=>!e);break;case"r":case"R":e.preventDefault(),eP()}},[ej,p,eY,eq,eU,eP]),eW="Player ".concat(t," memory board"),eG=96*p;return(0,r.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center bg-ub-cool-grey text-white p-4 select-none",children:[(0,r.jsx)("div",{"aria-live":"polite",role:"status",className:"sr-only",children:K}),(0,r.jsxs)("div",{className:"relative mb-4 w-full",style:{maxWidth:"".concat(eG,"px"),transform:el?"translateX(2px)":"none",transition:eA?"none":"transform 150ms"},role:"grid","aria-label":eW,tabIndex:0,onKeyDown:e_,children:[(0,r.jsx)("div",{className:"grid gap-2 sm:gap-3 lg:gap-4",style:{gridTemplateColumns:"repeat(".concat(p,", minmax(0,1fr))")},children:D.map((e,t)=>{let n=E.includes(t)||eY.has(t),a=Y.includes(t),s=Math.floor(t/p)+1,l=t%p+1,o=e.image?"theme icon":"".concat(e.value),c=eY.has(t)?"matched ".concat(o):n?"revealed ".concat(o):"face down";return(0,r.jsx)("button",{type:"button",onClick:()=>eq(t),onFocus:()=>eN(t),"aria-label":"Row ".concat(s,", Column ").concat(l,", ").concat(c),"aria-pressed":n,disabled:eJ||E.includes(t)||eY.has(t),tabIndex:ej===t?0:-1,className:"relative w-full aspect-square [perspective:600px] rounded focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2 focus:ring-offset-ub-cool-grey ".concat(a?"ring-4 ring-green-600":""),style:{transform:a&&!eA?"scale(1.05)":"scale(1)",transition:eA?"none":"transform 200ms"},children:(0,r.jsxs)("div",{"data-testid":"card-inner",className:"w-full h-full [transform-style:preserve-3d]",style:{transform:n?"rotateY(180deg)":"rotateY(0deg)",transitionProperty:"transform",transitionDuration:eA?"0ms":"500ms"},children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded flex items-center justify-center bg-gray-700 text-white [backface-visibility:hidden]"}),(0,r.jsx)("div",{className:"absolute inset-0 rounded flex items-center justify-center [transform:rotateY(180deg)] [backface-visibility:hidden] ".concat(a?"bg-green-500 text-black":"bg-white text-black"),style:{transition:eA?"none":"background-color 300ms, color 300ms"},children:e.image?(0,r.jsx)("img",{src:e.image,alt:"",className:"w-3/4 h-3/4 object-contain"}):(0,r.jsx)("span",{className:"text-4xl ".concat(e.color||""),children:e.value})})]})},e.id)})}),er.map(e=>(0,r.jsx)("span",{className:"pointer-events-none absolute w-2 h-2 bg-yellow-400 rounded-full animate-ping",style:{left:"".concat(e.x,"%"),top:"".concat(e.y,"%")}},e.id)),eU&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 text-white text-2xl",children:"Time's up"}),z&&!eU&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 text-white text-2xl",children:"Paused"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap justify-center gap-4 mb-3 text-sm",children:[(0,r.jsxs)("div",{children:["Time: ",L,"s"]}),(0,r.jsxs)("div",{children:["Moves: ",I]}),(0,r.jsxs)("div",{children:["Rating: ","★".repeat(O),"☆".repeat(3-O)]}),null!=W.moves&&(0,r.jsxs)("div",{children:["Best: ",W.moves,"m/",W.time,"s"]}),(0,r.jsxs)("div",{"data-testid":"combo-meter",children:["Combo: ",en]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:eP,className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-green-400",children:"Reset"}),(0,r.jsx)("button",{type:"button",onClick:()=>J(e=>!e),className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-green-400",disabled:eU,children:z?"Resume":"Pause"}),(0,r.jsxs)("button",{type:"button",onClick:()=>_(e=>!e),className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-green-400",children:["Sound: ",q?"On":"Off"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("span",{className:"text-sm",children:"Motion"}),(0,r.jsxs)("select",{"aria-label":"Motion preference",value:ed,onChange:e=>eg(e.target.value),className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-green-400",children:[(0,r.jsx)("option",{value:"system",children:"System"}),(0,r.jsx)("option",{value:"reduced",children:"Reduced"}),(0,r.jsx)("option",{value:"full",children:"Full"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("label",{htmlFor:"seed-".concat(t),className:"text-sm",children:"Seed"}),(0,r.jsx)("input",{id:"seed-".concat(t),value:eu,onChange:e=>em(e.target.value),className:"px-2 py-1 bg-gray-700 rounded text-white w-24 focus:outline-none focus:ring-2 focus:ring-green-400"}),(0,r.jsx)("button",{type:"button",onClick:()=>em(g()),className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-green-400",children:"New seed"})]}),(0,r.jsxs)("select",{"aria-label":"Deck",value:B,onChange:e=>H(e.target.value),className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-green-400",children:[(0,r.jsx)("option",{value:"emoji",children:"Emoji"}),(0,r.jsx)("option",{value:"pattern",children:"Pattern"}),(0,r.jsx)("option",{value:"letters",children:"Letters"}),(0,r.jsx)("option",{value:"theme",children:"Theme"})]}),"pattern"===B&&(0,r.jsx)("select",{"aria-label":"Pattern theme",value:X,onChange:e=>Q(e.target.value),className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-green-400",children:Object.keys(u).map(e=>(0,r.jsx)("option",{value:e,children:e[0].toUpperCase()+e.slice(1)},e))}),"theme"===B&&(0,r.jsx)("select",{"aria-label":"Theme pack",value:ec,onChange:e=>ei(e.target.value),className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-green-400",children:Object.keys(n).map(e=>(0,r.jsx)("option",{value:e,children:e},e))}),(0,r.jsxs)("select",{"aria-label":"Timer mode",value:S,onChange:e=>k(e.target.value),className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-green-400",children:[(0,r.jsx)("option",{value:"countup",children:"Count Up"}),(0,r.jsx)("option",{value:"countdown",children:"Countdown"})]}),(0,r.jsxs)("select",{"aria-label":"Grid size",value:p,onChange:e=>N(Number(e.target.value)),className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-green-400",children:[(0,r.jsx)("option",{value:2,children:"2x2"}),(0,r.jsx)("option",{value:4,children:"4x4"}),(0,r.jsx)("option",{value:6,children:"6x6"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsxs)("label",{htmlFor:"preview-time-".concat(t),className:"text-sm",children:["Preview ",Z,"s"]}),(0,r.jsx)("input",{id:"preview-time-".concat(t),type:"range",min:"0",max:"10",step:"1",value:Z,onChange:e=>$(Number(e.target.value)),className:"w-24"})]})]})]})},S=()=>{let[e,t]=(0,s.useState)(1),[n,a]=(0,s.useState)(p),[o,c]=(0,s.useState)([]),[i,u]=(0,s.useState)(0),[m,d]=(0,s.useState)(null),g=async()=>{let e=window.prompt("Enter theme pack URL");if(e)try{let t=new URL(e);if(!["http:","https:"].includes(t.protocol))throw Error("Invalid URL");let n=await fetch(t.toString());if(!n.ok)throw Error("Fetch failed");let r=await n.json(),s="string"==typeof(null==r?void 0:r.name)?r.name.trim():"",l=Array.isArray(null==r?void 0:r.assets)?r.assets.filter(e=>"string"==typeof e&&e.trim()):[];if(!s||0===l.length)throw Error("Invalid payload");a(e=>({...e,[s]:l})),d({type:"success",message:'Theme "'.concat(s,'" added.')})}catch(e){d({type:"error",message:"Theme download failed. Check the URL and payload format."})}};(0,s.useEffect)(()=>{if(!m)return;let e=setTimeout(()=>d(null),4e3);return()=>clearTimeout(e)},[m]);let h=(0,s.useCallback)((e,t)=>{c(n=>[...n.filter(t=>t.player!==e),{player:e,...t}])},[]);(0,s.useEffect)(()=>{c([])},[e,i]);let f=(0,s.useMemo)(()=>o.length<e?null:(e=>{if(!(null==e?void 0:e.length))return null;let[t,n]=[...e].sort((e,t)=>e.moves!==t.moves?e.moves-t.moves:e.time-t.time);return n&&t.moves===n.moves&&t.time===n.time?{winner:null,tie:!0}:{winner:t.player,tie:!1}})(o),[o,e]);return(0,r.jsx)(l.default,{gameId:"memory",children:(0,r.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-start bg-ub-cool-grey text-white p-4 select-none",children:[(0,r.jsxs)("div",{className:"mb-4 flex flex-wrap gap-2 items-center justify-center",children:[(0,r.jsx)("button",{type:"button",onClick:()=>t(e=>1===e?2:1),className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-green-400",children:1===e?"Two Players":"One Player"}),(0,r.jsx)("button",{type:"button",onClick:()=>{c([]),u(e=>e+1)},className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-green-400",children:"New Round"}),(0,r.jsx)("button",{type:"button",onClick:g,className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-green-400",children:"Download Theme Pack"}),m&&(0,r.jsx)("span",{className:"text-sm ".concat("success"===m.type?"text-green-300":"text-red-300"),children:m.message})]}),(0,r.jsxs)("div",{className:"mb-4 text-sm text-center",children:[(0,r.jsx)("p",{children:"Keyboard: arrows to move, Enter/Space to flip, P/Escape to pause, R to reset."}),2===e&&(0,r.jsx)("p",{className:"text-gray-300",children:"Two-player tie-break: fewest moves wins, then fastest time. Complete both boards to declare a winner."})]}),2===e&&f&&(0,r.jsx)("div",{className:"mb-4 text-base",children:f.tie?"Result: Tie game.":"Winner: Player ".concat(f.winner)}),(0,r.jsx)("div",{className:"flex w-full gap-6 ".concat(2===e?"flex-col xl:flex-row items-center xl:items-start":"justify-center"),children:Array.from({length:e},(e,t)=>(0,r.jsx)(N,{player:t+1,themePacks:n,onWin:h,roundId:i},"".concat(i,"-").concat(t)))})]})})}}}]);