"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4728],{24728:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var r=a(37876),l=a(14232),o=a(28913),n=a(5048);let s=(0,l.createContext)(null);var i=a(50181),c=a(81461);let d=e=>!e.isLayoutDirty&&e.willUpdate(!1),u=({children:e,id:t,inherit:a=!0})=>{let o=(0,l.useContext)(n.LayoutGroupContext),u=(0,l.useContext)(s),[f,h]=function(){let e=function(){let e=(0,l.useRef)(!1);return(0,i.useIsomorphicLayoutEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}(),[t,a]=(0,l.useState)(0),r=(0,l.useCallback)(()=>{e.current&&a(t+1)},[t]);return[(0,l.useCallback)(()=>c.frame.postRender(r),[r]),t]}(),b=(0,l.useRef)(null),m=o.id||u;null===b.current&&((e=>!0==(!0===e)||"id"===e)(a)&&m&&(t=t?m+"-"+t:m),b.current={id:t,group:!0===a&&o.group||function(){let e=new Set,t=new WeakMap,a=()=>e.forEach(d);return{add:r=>{e.add(r),t.set(r,r.addEventListener("willUpdate",a))},remove:r=>{e.delete(r);let l=t.get(r);l&&(l(),t.delete(r)),a()},dirty:a}}()});let g=(0,l.useMemo)(()=>({...b.current,forceRender:f}),[h]);return(0,r.jsx)(n.LayoutGroupContext.Provider,{value:g,children:e})};var f=a(4831),h=a(66893),b=a(95220);let m=["aurora","solstice","abyss","ion","pulse"],g=e=>"string"==typeof e&&e.length>0,p=e=>"number"==typeof e&&Number.isFinite(e)&&e>=0,x=0,v=(e,t)=>{let a=Math.floor(t()*e.length)%e.length;return e[a]},y=e=>({id:"".concat(e,"-").concat((x+=1,"gem-".concat(x))),gem:e}),w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random;return Array.from({length:e*e},()=>y(v(t,a)))},j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=Math.floor(e.length/t);for(let r=0;r<a;r+=1)for(let l=0;l<t;l+=1){let o=r*t+l;if(l+1<t&&_(R(e,o,o+1),t).length>0)return[o,o+1];if(r+1<a&&_(R(e,o,o+t),t).length>0)return[o,o+t]}return null},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return!!j(e,t)},C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;for(let l=0;l<r;l+=1){let{board:r}=M(w(e,t,a),e,t,a);if(k(r,e))return r}return M(w(e,t,a),e,t,a).board},_=function(e){var t,a,r,l;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,s=[],i=e.length,c=Math.floor(i/o);for(let r=0;r<c;r+=1){let l=r*o,i=l+o,c=l;for(;c<i;){let r=null==(t=e[c])?void 0:t.gem;if(!g(r)){c+=1;continue}let l=c+1;for(;l<i&&(null==(a=e[l])?void 0:a.gem)===r;)l+=1;if(l-c>=n){let e=[];for(let t=c;t<l;t+=1)e.push(t);s.push(e)}c=l}}for(let t=0;t<o;t+=1){let a=t;for(;a<i;){let t=null==(r=e[a])?void 0:r.gem;if(!g(t)){a+=o;continue}let c=[a],d=a+o;for(;d<i&&(null==(l=e[d])?void 0:l.gem)===t;)c.push(d),d+=o;c.length>=n&&s.push(c),a=d}}return s},N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.random,l=Array(e.length).fill(null),o=Math.floor(e.length/t);for(let n=0;n<t;n+=1){let s=o-1;for(let a=o-1;a>=0;a-=1){let r=e[a*t+n];r&&(l[s*t+n]=r,s-=1)}for(;s>=0;)l[s*t+n]=y(v(a,r)),s-=1}return l.map(e=>null!=e?e:y(v(a,r)))},M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.random,l=[],o=e.map(e=>({...e}));for(;;){let e=_(o,t);if(0===e.length)break;l.push({matches:e}),new Set(e.flat()).forEach(e=>{o[e]=null}),o=N(o,t,a,r)}if(0===l.length)return{board:e.slice(),cascades:[],cleared:0};let n=l.reduce((e,t)=>{let a=new Set;return t.matches.forEach(e=>e.forEach(e=>a.add(e))),e+a.size},0);return{board:o,cascades:l,cleared:n}},S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,a=e.slice();for(let e=a.length-1;e>0;e-=1){let r=Math.floor(t()*(e+1));[a[e],a[r]]=[a[r],a[e]]}return a},E=function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.random,o=new Map;if(e.forEach(e=>{let t;if("string"==typeof(t=null==e?void 0:e.gem)&&m.includes(t)){var a;o.set(e.gem,(null!=(a=o.get(e.gem))?a:0)+1)}}),0===o.size)return{board:e.slice(),removed:0,color:null};let n=Math.max(...o.values()),s=Array.from(o.entries()).filter(e=>{let[,t]=e;return t===n}),i=s[Math.floor(l()*s.length)%s.length],c=null!=(t=null==i?void 0:i[0])?t:null,d=0;return{board:N(e.map(e=>c&&e.gem===c?(d+=1,null):e),a,r,l),removed:d,color:null!=c?c:null}},D=Object.freeze({shuffle:2,colorBomb:1}),R=(e,t,a)=>{let r=e.slice();return[r[t],r[a]]=[r[a],r[t]],r},A=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;if(e===t)return!1;let r=Math.floor(e/a),l=e%a,o=Math.floor(t/a),n=t%a;return 1===Math.abs(r-o)&&l===n||1===Math.abs(l-n)&&r===o};var T=a(74024);let L=e=>750+(e-1)*320,B=e=>"boolean"==typeof e,P={aurora:{label:"Aurora Prism",base:"#38bdf8",mid:"#2563eb",glow:"#bae6fd",shadow:"#0f172a",highlight:"#f8fafc",accent:"#22d3ee",symbol:"◆",pattern:"#1e3a8a"},solstice:{label:"Solstice Ember",base:"#f97316",mid:"#ea580c",glow:"#fed7aa",shadow:"#7c2d12",highlight:"#fff7ed",accent:"#fb923c",symbol:"⬢",pattern:"#7c2d12"},abyss:{label:"Abyss Crystal",base:"#6366f1",mid:"#4338ca",glow:"#c7d2fe",shadow:"#1e1b4b",highlight:"#eef2ff",accent:"#818cf8",symbol:"⬣",pattern:"#312e81"},ion:{label:"Ion Spark",base:"#22d3ee",mid:"#0ea5e9",glow:"#a5f3fc",shadow:"#083344",highlight:"#ecfeff",accent:"#67e8f9",symbol:"⬡",pattern:"#134e4a"},pulse:{label:"Pulse Bloom",base:"#f472b6",mid:"#ec4899",glow:"#fbcfe8",shadow:"#831843",highlight:"#fdf2f8",accent:"#f9a8d4",symbol:"✶",pattern:"#701a75"}},O={label:"Unknown Gem",base:"#94a3b8",mid:"#64748b",glow:"#cbd5f5",shadow:"#0f172a",highlight:"#f8fafc",accent:"#e2e8f0",symbol:"?",pattern:"#475569"},G=e=>{var t;return null!=(t=P[e])?t:O},z=e=>{let{cell:t,gem:a,streak:n,colorblindMode:s}=e,i=(0,l.useMemo)(()=>"gem-gradient-".concat(t.id),[t.id]),c=(0,l.useMemo)(()=>"gem-glow-".concat(t.id),[t.id]),d=(0,l.useMemo)(()=>"gem-pattern-".concat(t.id),[t.id]),u=(0,l.useMemo)(()=>parseInt(t.id.replace(/\D/g,""),10)%5*.15,[t.id]),f=+(n>=3);return(0,r.jsxs)(o.motion.svg,{viewBox:"0 0 100 100",width:"100%",height:"100%","aria-hidden":!0,initial:{scale:.85,opacity:0},animate:{scale:1,opacity:1,filter:["drop-shadow(0px 0px 0px rgba(255,255,255,0.25))","drop-shadow(0px 0px ".concat(6+6*f,"px ").concat(a.glow,"66)")]},transition:{duration:.35,ease:"easeOut"},className:"overflow-visible",children:[(0,r.jsxs)("defs",{children:[(0,r.jsxs)("radialGradient",{id:i,cx:"30%",cy:"30%",r:"80%",children:[(0,r.jsx)("stop",{offset:"0%",stopColor:a.highlight}),(0,r.jsx)("stop",{offset:"35%",stopColor:a.base}),(0,r.jsx)("stop",{offset:"75%",stopColor:a.mid}),(0,r.jsx)("stop",{offset:"100%",stopColor:a.shadow})]}),(0,r.jsxs)("linearGradient",{id:c,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,r.jsx)("stop",{offset:"0%",stopColor:"".concat(a.accent,"aa")}),(0,r.jsx)("stop",{offset:"100%",stopColor:"".concat(a.highlight,"55")})]}),s&&(0,r.jsxs)("pattern",{id:d,width:"6",height:"6",patternUnits:"userSpaceOnUse",patternTransform:"rotate(45)",children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"6",height:"6",fill:"transparent"}),(0,r.jsx)("rect",{x:"0",y:"0",width:"3",height:"6",fill:a.pattern,opacity:"0.4"})]})]}),(0,r.jsx)(o.motion.polygon,{points:"50,6 92,32 92,68 50,94 8,68 8,32",fill:"url(#".concat(i,")"),stroke:a.glow,strokeWidth:"2",animate:{rotate:[0,.8*!!f,0]},transition:{duration:2.8,repeat:1/0,ease:"easeInOut",delay:u}}),(0,r.jsx)(o.motion.polygon,{points:"50,16 82,36 82,64 50,84 18,64 18,36",fill:"url(#".concat(c,")"),opacity:.65,animate:{opacity:[.35,.75,.35]},transition:{duration:3.2,repeat:1/0,ease:"easeInOut",delay:u/2}}),s&&(0,r.jsx)("polygon",{points:"50,6 92,32 92,68 50,94 8,68 8,32",fill:"url(#".concat(d,")"),opacity:"0.65"}),(0,r.jsx)(o.motion.circle,{cx:"34",cy:"30",r:"14",fill:a.highlight,opacity:.5,animate:{opacity:[.25,.65,.25],x:[-4,0,-4],y:[-4,0,-4]},transition:{duration:3.6,repeat:1/0,ease:"easeInOut",delay:u}}),(0,r.jsx)(o.motion.text,{x:"50",y:"58",fill:s?a.highlight:"".concat(a.highlight,"cc"),fontSize:"26",fontWeight:"700",textAnchor:"middle",dominantBaseline:"middle",animate:{opacity:[.4,.8,.4]},transition:{duration:4.2,repeat:1/0,ease:"easeInOut",delay:u},children:a.symbol})]})},U=()=>{let e=(0,l.useRef)(()=>Math.random()),[t,a]=(0,l.useState)(()=>C(8,m,e.current)),[n,s]=(0,l.useState)(0),[i,c]=(0,l.useState)(0),[d,g]=(0,l.useState)(0),[x,v]=(0,l.useState)(24),[y,w]=(0,l.useState)(1),[N,P]=(0,l.useState)(()=>L(1)),[O,U]=(0,l.useState)("Match three gems to ignite the cascade."),[I,K]=(0,l.useState)(null),[F,H]=(0,l.useState)(()=>({...D})),[V,W]=(0,l.useState)(!1),[q,Y]=(0,l.useState)(null),[J,Q]=(0,l.useState)(null),[X,Z]=(0,l.useState)([]),[$,ee]=(0,l.useState)(!1),[et,ea]=(0,l.useState)(!1),[er,el]=(0,l.useState)(!1),[eo,en]=(0,b.default)("candy-crush:colorblind",!1,B),es=(0,l.useRef)(null),ei=(0,l.useRef)("auto"),ec=(0,l.useRef)(!1),ed=(0,l.useRef)([]),eu=(0,l.useRef)([]),ef=(0,l.useRef)(null),{bestScore:eh,bestStreak:eb,updateStats:em}=function(){let[e,t]=(0,b.default)("candy-crush:best-score",0,p),[a,r]=(0,b.default)("candy-crush:best-streak",0,p);return{bestScore:e,bestStreak:a,updateStats:(e,a)=>{t(t=>e>t?e:t),r(e=>a>e?a:e)}}}(),[eg,ep]=(0,b.default)("candy-crush:muted",!1,B),[ex,ev]=(0,l.useState)(0),[ey,ew]=(0,l.useState)(null),ej=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.35;if(!eg)try{let a=(0,T.getAudioContext)(),r=a.currentTime,l=a.createOscillator(),o=a.createGain();l.type="triangle",l.frequency.setValueAtTime(e,r),l.connect(o),o.connect(a.destination),o.gain.setValueAtTime(1e-4,r),o.gain.exponentialRampToValueAtTime(.22,r+.01),o.gain.exponentialRampToValueAtTime(1e-4,r+t),l.start(r),l.stop(r+t+.05)}catch(e){}},[eg]),ek=(0,l.useCallback)(()=>ej(760,.3),[ej]),eC=(0,l.useCallback)(()=>ej(220,.25),[ej]),e_=(0,l.useCallback)(e=>{Z(t=>[...t,e]);{let t=window.setTimeout(()=>{Z(t=>t.filter(t=>t.id!==e.id)),ed.current=ed.current.filter(e=>e!==t)},900);ed.current.push(t)}},[]);(0,l.useEffect)(()=>()=>{ed.current.forEach(e=>window.clearTimeout(e)),ed.current=[]},[]),(0,l.useEffect)(()=>()=>{ef.current&&(window.clearTimeout(ef.current),ef.current=null)},[]);let eN=(0,l.useMemo)(()=>[{label:"Level",value:y},{label:"Score",value:n},{label:"Target",value:N},{label:"Moves Used",value:d},{label:"Moves Left",value:Math.max(x,0)},{label:"Streak",value:i},{label:"Best Score",value:eh},{label:"Best Streak",value:eb}],[eh,eb,y,d,x,n,i,N]);(0,l.useEffect)(()=>{em(n,i)},[n,i,em]),(0,l.useEffect)(()=>{let e=eu.current[ex];e&&e!==document.activeElement&&e.focus()},[ex]),(0,l.useEffect)(()=>{if(!J)return;let e=setTimeout(()=>Q(null),1600);return()=>clearTimeout(e)},[J]),(0,l.useEffect)(()=>{$&&er||et||n>=N&&ec.current&&(ee(!0),el(!0),W(!0),U("Objective complete. Celebrate the breach!"))},[n,N,$,er,et]),(0,l.useEffect)(()=>{x>0||$||et||n<N&&(ea(!0),el(!0),W(!0),U("Out of moves. Deploy boosters or try again."))},[x,$,et,n,N]);let eM=(0,l.useCallback)(()=>{let t=null;if(a(a=>{let r=M(a,8,m,e.current);if(0===r.cascades.length)return a;let l=r.cascades.reduce((e,t,a)=>e+((e,t)=>{if(t<1)return 0;let a=new Set,r=0;return e.matches.forEach(e=>{e.forEach(e=>a.add(e)),e.length>3&&(r+=(e.length-3)*5)}),(10*a.size+r)*t})(t,a+1),0),o=Array.from(new Set(r.cascades.flatMap(e=>e.matches.flat())));return t={totalPoints:l,cleared:r.cleared,chain:r.cascades.length,positions:o,colors:o.map(e=>{var t,r;return null!=(r=null==(t=a[e])?void 0:t.gem)?r:m[0]}),triggeredByPlayer:"player"===ei.current},r.board}),!t)return;let{chain:r,cleared:l,totalPoints:o,positions:n,colors:i,triggeredByPlayer:d}=t,u=d||ec.current;o>0&&u&&(s(e=>e+o),Y({chain:r,cleared:l,points:o,positions:n}),U(r>1?"Chain x".concat(r,"! Cleared ").concat(l," gems (+").concat(o,")."):"Cleared ".concat(l," gems (+").concat(o,").")),Q({id:"".concat(Date.now(),"-").concat(r),chain:r,points:o}),e_({id:"".concat(Date.now(),"-").concat(Math.random()),positions:n,colors:i}),ek()),d&&o>0&&c(e=>e+1),ei.current="auto"},[ek,e_]);(0,h.useGameLoop)(eM,!V);let eS=V||$||et||er,eE=(0,l.useCallback)(()=>{ef.current&&(window.clearTimeout(ef.current),ef.current=null),ew(null)},[]),eD=(0,l.useCallback)(t=>{a(C(8,m,e.current)),K(null),ev(0),eE(),Y(null),Q(null),Z([]),U(t)},[eE]),eR=(0,l.useCallback)((e,t)=>{if(eS)return;if(!A(e,t,8)){K(t),U("Choose an adjacent gem to swap.");return}let r=!1,l=!1;if(a(a=>{let o=R(a,e,t);return 0===_(o,8).length?(l=!0,a):(r=!0,ei.current="player",o)}),K(null),!r){c(0),U("No match. Streak reset."),l&&eC();return}ec.current=!0,g(e=>e+1),v(e=>Math.max(0,e-1)),U("Match found! Cascade incoming.")},[eS,eC]),eA=(0,l.useCallback)(e=>{if(!eS){if(eE(),null===I){K(e),U("Select an adjacent gem to swap.");return}if(I===e)return void K(null);eR(I,e)}},[eR,eE,eS,I]),eT=(0,l.useCallback)((e,t)=>{!eS&&(es.current=e,ev(e),eE(),K(e),(null==t?void 0:t.dataTransfer)&&(t.dataTransfer.effectAllowed="move"))},[eE,eS]),eL=(0,l.useCallback)(e=>{eS||null!==es.current&&(eR(es.current,e),es.current=null)},[eR,eS]),eB=(0,l.useCallback)(()=>{es.current=null,K(null)},[]),eP=(0,l.useCallback)(()=>{if(eS)return;let t=!1;if(H(e=>0===e.shuffle?e:(t=!0,{...e,shuffle:e.shuffle-1})),!t)return void U("No shuffle boosters remaining.");ec.current=!0,ei.current="player",a(t=>S(t,e.current)),g(e=>e+1),v(e=>Math.max(0,e-1)),eE(),U("Grid reconfigured. Seek new breaches.")},[eE,eS]),eO=(0,l.useCallback)(()=>{if(eS)return;let t=!1;if(H(e=>0===e.colorBomb?e:(t=!0,{...e,colorBomb:e.colorBomb-1})),!t)return void U("No color bombs available.");let r=0,l=[],o=null;if(a(t=>{let a=E(t,8,m,e.current);return(r=a.removed,o=a.color,r>0&&(l=t.map((e,t)=>(null==e?void 0:e.gem)===a.color?t:null).filter(e=>null!==e)),r>0)?(ei.current="player",ec.current=!0,a.board):t}),0===r)return void U("Color bomb fizzled—no gems cleared.");let n=12*r;s(e=>e+n),g(e=>e+1),v(e=>Math.max(0,e-1)),eE(),U("Color bomb cleared ".concat(r," gems (+").concat(n,").")),Y({chain:1,cleared:r,points:n,positions:l}),e_({id:"".concat(Date.now(),"-bomb"),positions:l,colors:l.map(()=>null!=o?o:m[0])}),ek()},[eE,eS,ek,e_]),eG=(0,l.useCallback)(t=>{a(C(8,m,e.current)),s(0),c(0),g(0),v(24),H({...D}),K(null),ev(0),eE(),Y(null),Q(null),Z([]),W(!1),el(!1),ea(!1),ee(!1),ei.current="auto",ec.current=!1,U(t?"New objective loaded. Chain the hacks!":"New grid ready. Match three gems!")},[eE]),ez=(0,l.useCallback)(()=>{w(1),P(L(1)),eG(!1)},[eG]),eU=(0,l.useCallback)(()=>{w(e=>{let t=e+1;return P(L(t)),eG(!0),t})},[eG]),eI=(0,l.useCallback)(()=>{P(L(y)),eG(!1)},[y,eG]),eK=(0,l.useCallback)(()=>{$||et||(W(!0),eE(),U("Game paused."))},[eE,$,et]),eF=(0,l.useCallback)(()=>{er||(W(!1),U("Game resumed."))},[er]),eH=(0,l.useCallback)(e=>{ep(e),U(e?"Sound muted.":"Sound on.")},[ep]),eV=(0,l.useCallback)(()=>{en(e=>!e),U(eo?"Standard palette enabled.":"Colorblind palette enabled.")},[eo,en]),eW=(0,l.useCallback)(()=>{if(eS)return;let e=j(t,8);if(!e)return void eD("No moves detected. Rebooting the grid.");eE(),ew(e),ev(e[0]),U("Hint: swap the highlighted gems to start a cascade."),ef.current=window.setTimeout(()=>{ew(null),ef.current=null},1400)},[t,eE,eS,eD]),eq=(0,l.useCallback)(e=>{if(e.altKey||e.ctrlKey||e.metaKey)return;let a=e.key,r=t.length;if(0===r)return;let l=Math.floor(ex/8),o=ex%8,n=ex;if("ArrowRight"===a)e.preventDefault(),n=Math.min(r-1,8*l+Math.min(7,o+1));else if("ArrowLeft"===a)e.preventDefault(),n=Math.max(0,8*l+Math.max(0,o-1));else if("ArrowUp"===a)e.preventDefault(),n=Math.max(0,(l-1)*8+o);else if("ArrowDown"===a)e.preventDefault(),n=Math.min(r-1,(l+1)*8+o);else if("Enter"===a||" "===a){if(e.preventDefault(),eS)return;eE(),eA(ex);return}else if("Escape"===a){e.preventDefault(),K(null),eE();return}else if("h"===a||"H"===a){e.preventDefault(),eW();return}else if("p"===a||"P"===a){if(e.preventDefault(),er)return;V?eF():eK();return}else if("m"===a||"M"===a){e.preventDefault(),eH(!eg);return}else if("r"===a||"R"===a){e.preventDefault(),eI();return}n!==ex&&ev(n)},[ex,t.length,eE,eA,eW,eK,eF,eI,eH,eS,eg,V,er]);(0,l.useEffect)(()=>{!eS&&(k(t,8)||eD("No possible moves left. Shuffling to a safe grid."))},[t,eS,eD]);let eY=(0,l.useMemo)(()=>({gridTemplateColumns:"repeat(".concat(8,", ").concat(48,"px)"),gridAutoRows:"".concat(48,"px")}),[]),eJ=N>0?100*Math.min(1,n/N):0,eQ=100*Math.min(1,(24-x)/24),eX=et?"Level Failed":$?"Level Clear":V?"Paused":"Active",eZ=et?"border-rose-500/50 bg-rose-500/10 text-rose-200 shadow-[0_0_18px_rgba(244,63,94,0.35)]":$?"border-emerald-500/60 bg-emerald-500/10 text-emerald-100 shadow-[0_0_18px_rgba(16,185,129,0.35)]":V?"border-amber-500/50 bg-amber-500/10 text-amber-100 shadow-[0_0_18px_rgba(251,191,36,0.35)]":"border-cyan-500/60 bg-cyan-500/10 text-cyan-100 shadow-[0_0_18px_rgba(14,165,233,0.35)]";return(0,r.jsxs)("div",{className:"relative flex flex-col gap-6 rounded-3xl border border-cyan-500/10 bg-gradient-to-br from-slate-950 via-slate-950/85 to-slate-900/90 p-6 text-sm text-cyan-100 shadow-[0_0_32px_rgba(8,47,73,0.45)] backdrop-blur-xl sm:text-base",children:[(0,r.jsx)(h.Overlay,{onPause:eK,onResume:eF,muted:eg,paused:V,onToggleSound:eH,onReset:eI}),(0,r.jsxs)("div",{className:"flex flex-col gap-6 xl:flex-row xl:items-start",children:[(0,r.jsxs)("div",{className:"flex w-full flex-col gap-6 xl:max-w-sm",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold uppercase tracking-[0.35em] text-cyan-200 sm:text-xl",children:"Kali Crush"}),(0,r.jsx)("p",{className:"text-xs text-cyan-300/70 sm:text-sm",children:"Match neon gems to keep the breach streak alive."})]}),(0,r.jsx)("span",{className:"inline-flex items-center justify-center rounded-full border px-3 py-1 text-[0.65rem] font-semibold uppercase tracking-[0.3em] transition ".concat(eZ),children:eX})]}),(0,r.jsx)("div",{className:"grid gap-3 sm:grid-cols-2",children:eN.map(e=>(0,r.jsxs)("div",{className:"rounded-2xl border border-cyan-500/15 bg-slate-950/60 px-4 py-3 shadow-[0_6px_22px_rgba(8,145,178,0.18)] backdrop-blur",children:[(0,r.jsx)("div",{className:"text-[0.65rem] font-semibold uppercase tracking-[0.4em] text-cyan-400/80",children:e.label}),(0,r.jsx)("div",{className:"mt-2 text-2xl font-semibold tabular-nums text-cyan-50",children:e.value})]},e.label))}),(0,r.jsxs)("div",{className:"rounded-2xl border border-cyan-500/15 bg-slate-950/60 px-4 py-4 shadow-[0_8px_28px_rgba(8,145,178,0.2)] backdrop-blur",children:[(0,r.jsx)("div",{className:"text-[0.65rem] font-semibold uppercase tracking-[0.35em] text-cyan-400/80",children:"Mission Feed"}),(0,r.jsx)("p",{className:"mt-2 text-sm leading-snug text-cyan-100","aria-live":"polite","aria-atomic":"true",children:O}),q&&(0,r.jsxs)("p",{className:"mt-2 text-xs text-cyan-300/80",children:["Last chain cleared ",q.cleared," gems for ",q.points," points",q.chain>1?" (x".concat(q.chain,")"):"","."]}),(0,r.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-[0.6rem] uppercase tracking-[0.3em] text-cyan-400/70",children:[(0,r.jsx)("span",{children:"Score Progress"}),(0,r.jsxs)("span",{children:[Math.round(eJ),"%"]})]}),(0,r.jsx)("div",{className:"mt-2 h-2 overflow-hidden rounded-full bg-slate-900/80",children:(0,r.jsx)(o.motion.div,{className:"h-full rounded-full bg-gradient-to-r from-sky-500 via-cyan-400 to-sky-300",animate:{width:"".concat(eJ,"%")},transition:{type:"spring",stiffness:120,damping:20}})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-[0.6rem] uppercase tracking-[0.3em] text-cyan-400/70",children:[(0,r.jsx)("span",{children:"Move Usage"}),(0,r.jsxs)("span",{children:[Math.round(eQ),"%"]})]}),(0,r.jsx)("div",{className:"mt-2 h-2 overflow-hidden rounded-full bg-slate-900/80",children:(0,r.jsx)(o.motion.div,{className:"h-full rounded-full bg-gradient-to-r from-amber-500 via-orange-400 to-rose-400",animate:{width:"".concat(eQ,"%")},transition:{type:"spring",stiffness:120,damping:20}})})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:ez,className:"group relative overflow-hidden rounded-lg border border-cyan-500/30 bg-slate-950/70 px-4 py-2 font-semibold text-cyan-100 shadow-[0_0_18px_rgba(8,47,73,0.45)] transition hover:border-cyan-300/60 hover:text-white hover:shadow-[0_0_24px_rgba(14,165,233,0.3)] focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950",children:"Reset Grid"}),(0,r.jsx)("button",{type:"button",onClick:eW,disabled:eS,className:"group relative overflow-hidden rounded-lg border border-amber-400/50 bg-gradient-to-r from-amber-600/80 via-yellow-500/80 to-amber-400/80 px-4 py-2 font-semibold text-amber-50 shadow-[0_0_20px_rgba(251,191,36,0.35)] transition hover:from-amber-500/90 hover:to-yellow-400/90 disabled:cursor-not-allowed disabled:opacity-40 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950",children:"Hint"}),(0,r.jsxs)("div",{className:"group relative",children:[(0,r.jsxs)("button",{type:"button",onClick:eP,disabled:0===F.shuffle||eS,"aria-describedby":"shuffle-tooltip",className:"relative overflow-hidden rounded-lg border border-cyan-500/40 bg-gradient-to-r from-sky-700/80 via-cyan-600/80 to-sky-500/80 px-4 py-2 font-semibold text-cyan-50 shadow-[0_0_24px_rgba(14,165,233,0.35)] transition hover:from-sky-600/90 hover:to-sky-400/90 disabled:cursor-not-allowed disabled:opacity-40 focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950",children:["Shuffle (",F.shuffle,")",(0,r.jsx)("span",{className:"mt-1 block h-1.5 overflow-hidden rounded-full bg-cyan-900/70",children:(0,r.jsx)("span",{className:"block h-full bg-gradient-to-r from-cyan-400 to-sky-300",style:{width:"".concat(F.shuffle/D.shuffle*100,"%")}})})]}),(0,r.jsx)("div",{id:"shuffle-tooltip",role:"tooltip",className:"pointer-events-none absolute z-10 mt-2 w-48 rounded-lg border border-cyan-500/40 bg-slate-900/95 px-3 py-2 text-xs text-cyan-100 opacity-0 shadow-[0_0_18px_rgba(8,47,73,0.45)] transition group-hover:opacity-100 group-focus-within:opacity-100",children:"Rearranges the grid. Charges are limited per level."})]}),(0,r.jsxs)("div",{className:"group relative",children:[(0,r.jsxs)("button",{type:"button",onClick:eO,disabled:0===F.colorBomb||eS,"aria-describedby":"bomb-tooltip",className:"relative overflow-hidden rounded-lg border border-fuchsia-500/50 bg-gradient-to-r from-fuchsia-700/80 via-pink-600/80 to-rose-500/80 px-4 py-2 font-semibold text-fuchsia-50 shadow-[0_0_24px_rgba(217,70,239,0.35)] transition hover:from-fuchsia-600/90 hover:to-rose-400/90 disabled:cursor-not-allowed disabled:opacity-40 focus:outline-none focus-visible:ring-2 focus-visible:ring-fuchsia-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950",children:["Color Bomb (",F.colorBomb,")",(0,r.jsx)("span",{className:"mt-1 block h-1.5 overflow-hidden rounded-full bg-rose-900/70",children:(0,r.jsx)("span",{className:"block h-full bg-gradient-to-r from-fuchsia-400 to-rose-300",style:{width:"".concat(F.colorBomb/D.colorBomb*100,"%")}})})]}),(0,r.jsx)("div",{id:"bomb-tooltip",role:"tooltip",className:"pointer-events-none absolute z-10 mt-2 w-52 rounded-lg border border-fuchsia-500/40 bg-slate-900/95 px-3 py-2 text-xs text-fuchsia-100 opacity-0 shadow-[0_0_22px_rgba(190,24,93,0.45)] transition group-hover:opacity-100 group-focus-within:opacity-100",children:"Detonates the most common gem color. Use wisely—charges are scarce."})]}),(0,r.jsx)("button",{type:"button",onClick:eV,"aria-pressed":eo,className:"rounded-lg border px-4 py-2 font-semibold shadow-[0_0_18px_rgba(15,118,110,0.35)] transition focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950 ".concat(eo?"border-emerald-400/60 bg-emerald-500/20 text-emerald-100":"border-emerald-500/40 bg-slate-950/60 text-emerald-100/80 hover:text-emerald-100"),children:eo?"Disable Colorblind Mode":"Enable Colorblind Mode"})]})]}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col items-center gap-4",children:[(0,r.jsx)("div",{className:"relative rounded-3xl border border-cyan-500/20 bg-slate-950/60 p-4 shadow-[0_0_40px_rgba(8,145,178,0.35)] backdrop-blur-lg",children:(0,r.jsx)(u,{children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"grid gap-2",style:eY,role:"grid","aria-label":"Kali Crush grid","aria-rowcount":8,"aria-colcount":8,"aria-describedby":"candy-crush-instructions",onKeyDown:eq,children:t.map((e,t)=>{let a=G(e.gem),l=Math.floor(t/8)+1,n=t%8+1,s=!!(ey&&(ey[0]===t||ey[1]===t)),c=ex===t;return(0,r.jsx)(o.motion.button,{ref:e=>{eu.current[t]=e},type:"button",layout:!0,role:"gridcell","aria-selected":I===t,tabIndex:c?0:-1,draggable:!eS,disabled:eS,onFocus:()=>ev(t),onDragStart:e=>eT(t,e),onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault(),eL(t)},onDragEnd:eB,onClick:()=>{ev(t),eA(t)},"aria-pressed":I===t,"aria-label":"".concat(a.label," gem at row ").concat(l,", column ").concat(n),whileHover:{scale:eS?1:1.05},whileTap:{scale:eS?1:.92},className:"relative flex items-center justify-center overflow-hidden rounded-xl border bg-slate-900/60 transition duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950 ".concat(I===t?"ring-2 ring-cyan-400 ring-offset-2 ring-offset-slate-950":s?"ring-2 ring-amber-300/70 ring-offset-2 ring-offset-slate-950":c?"border-cyan-300/60":"hover:shadow-[0_0_14px_rgba(56,189,248,0.35)]"),style:{width:48,height:48},children:(0,r.jsx)(z,{cell:e,gem:a,streak:i,colorblindMode:eo})},e.id)})}),(0,r.jsx)(f.AnimatePresence,{children:J&&(0,r.jsxs)(o.motion.div,{initial:{opacity:0,y:-24},animate:{opacity:1,y:0},exit:{opacity:0,y:-24},transition:{duration:.35,ease:"easeOut"},className:"pointer-events-none absolute -top-10 left-1/2 -translate-x-1/2 rounded-full border border-cyan-400/60 bg-slate-900/80 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-cyan-100 shadow-[0_0_18px_rgba(14,165,233,0.35)]",children:["Combo x",J.chain,"! +",J.points]},J.id)}),(0,r.jsx)("div",{className:"pointer-events-none absolute inset-0",children:X.map(e=>(0,r.jsx)(l.Fragment,{children:e.positions.map((t,a)=>{var l;let n=Math.floor(t/8),s=t%8,i=G(null!=(l=e.colors[a])?l:m[0]);return(0,r.jsx)(o.motion.span,{initial:{scale:0,opacity:.8},animate:{scale:[0,1,.4],opacity:[.8,.6,0]},transition:{duration:.9,ease:"easeOut",times:[0,.4,1]},className:"absolute h-3 w-3 rounded-full",style:{left:56*s+24,top:56*n+24,transform:"translate(-50%, -50%)",background:"radial-gradient(circle, ".concat(i.highlight," 0%, ").concat(i.accent," 60%, transparent 100%)"),boxShadow:"0 0 12px ".concat(i.glow,"aa")}},"".concat(e.id,"-").concat(t))})},e.id))})]})})}),(0,r.jsx)("p",{id:"candy-crush-instructions",className:"sr-only",children:"Use arrow keys to move around the grid. Press Enter or Space to select a gem, then press Enter on an adjacent gem to swap. Press Escape to clear selection. Press H for a hint, P to pause, M to mute, and R to restart the level."}),(0,r.jsx)("p",{className:"text-xs text-cyan-300/70",children:"Drag or click adjacent gems to swap. Keyboard: arrows, Enter, Esc, H hint, P pause, M mute, R restart."})]})]}),(0,r.jsx)(f.AnimatePresence,{children:er&&(0,r.jsx)(o.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"pointer-events-auto absolute inset-0 z-20 flex items-center justify-center rounded-3xl bg-slate-950/85 backdrop-blur-xl",role:"dialog","aria-modal":"true",children:(0,r.jsxs)(o.motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},transition:{type:"spring",stiffness:160,damping:18},className:"w-full max-w-md rounded-3xl border border-cyan-500/30 bg-gradient-to-br from-slate-900 via-slate-900/90 to-slate-950 p-6 text-center text-cyan-100 shadow-[0_0_32px_rgba(8,47,73,0.55)]",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold uppercase tracking-[0.35em] text-cyan-200",children:$?"Level Secured":"Mission Failed"}),(0,r.jsx)("p",{className:"mt-3 text-sm text-cyan-200/80",children:$?"Your breach streak paid off. Advance to the next objective?":"The defense grid held. Recharge boosters and strike again."}),(0,r.jsxs)("div",{className:"mt-6 flex flex-col gap-3",children:[$?(0,r.jsxs)("button",{type:"button",onClick:eU,className:"rounded-xl border border-emerald-400/50 bg-gradient-to-r from-emerald-600/80 via-teal-500/80 to-emerald-400/80 px-4 py-2 font-semibold text-emerald-50 shadow-[0_0_24px_rgba(16,185,129,0.35)] transition hover:from-emerald-500/90 hover:to-teal-400/90 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950",children:["Continue to Level ",y+1]}):(0,r.jsxs)("button",{type:"button",onClick:eI,className:"rounded-xl border border-rose-400/50 bg-gradient-to-r from-rose-600/80 via-pink-500/80 to-rose-400/80 px-4 py-2 font-semibold text-rose-50 shadow-[0_0_24px_rgba(244,63,94,0.35)] transition hover:from-rose-500/90 hover:to-pink-400/90 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950",children:["Retry Level ",y]}),(0,r.jsx)("button",{type:"button",onClick:ez,className:"rounded-xl border border-cyan-500/40 bg-slate-950/70 px-4 py-2 font-semibold text-cyan-100 shadow-[0_0_18px_rgba(8,47,73,0.45)] transition hover:border-cyan-300/60 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950",children:"Return to Level 1"})]})]})})})]})}}}]);