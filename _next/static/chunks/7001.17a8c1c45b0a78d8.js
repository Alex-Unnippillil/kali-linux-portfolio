"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7001],{27001:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var r=a(37876),l=a(14232),n=a(63115),i=a(67983);let o=e=>{let{fonts:t,value:a,onChange:n}=e,[i,o]=(0,l.useState)(!1),s=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(!i)return;let e=e=>{s.current&&!s.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[i]),(0,r.jsxs)("div",{className:"relative",ref:s,children:[(0,r.jsx)("button",{type:"button",className:"min-w-[8rem] rounded border border-black/40 bg-gray-800 px-3 py-1 text-left text-xs uppercase tracking-wide text-white transition-colors hover:bg-gray-700","aria-haspopup":"listbox","aria-expanded":i,onClick:()=>o(e=>!e),children:a||"Select font"}),i&&(0,r.jsx)("div",{className:"absolute z-10 mt-1 max-h-72 w-72 overflow-auto rounded border border-black/60 bg-gray-900 p-2 shadow-lg",role:"listbox",children:(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:t.map(e=>(0,r.jsx)("button",{type:"button",role:"option","aria-selected":a===e.name,onClick:()=>{n(e.name),o(!1)},className:"rounded px-3 py-2 text-left font-mono text-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 ".concat(a===e.name?"bg-blue-700/80 text-white shadow-inner ring-1 ring-blue-300":"bg-gray-800/70 text-gray-100 hover:bg-gray-700/80"),style:{lineHeight:"1"},title:e.name,children:e.preview.split("\n")[0]},e.name))})})]})};var s=a(95220);let c="rounded border border-[color:var(--kali-border)] px-3 py-1 text-sm font-semibold uppercase tracking-wide transition-colors duration-[var(--motion-fast)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus",u="rounded border border-[color:var(--kali-border)] p-1 transition-colors duration-[var(--motion-fast)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus",d="".concat(c," bg-[color:var(--color-primary)] text-[color:var(--color-inverse)] hover:bg-[color:color-mix(in_srgb,var(--color-primary)_85%,var(--kali-panel))]"),g="".concat(c," bg-[color:color-mix(in_srgb,var(--kali-panel)_82%,var(--kali-panel-highlight))] text-[color:var(--kali-text)] hover:bg-[color:color-mix(in_srgb,var(--kali-panel)_68%,rgba(15,148,210,0.22))]"),b="".concat(c," bg-[color:color-mix(in_srgb,var(--kali-panel)_78%,rgba(15,148,210,0.24))] text-[color:var(--kali-text)] hover:bg-[color:color-mix(in_srgb,var(--kali-panel)_65%,rgba(15,148,210,0.28))]"),p="".concat(u," bg-[color:color-mix(in_srgb,var(--color-primary)_88%,var(--kali-panel))] text-[color:var(--color-inverse)] hover:bg-[color:var(--color-primary)]"),f="".concat(u," bg-[color:color-mix(in_srgb,var(--kali-panel)_80%,rgba(15,148,210,0.26))] text-[color:var(--kali-text)] hover:bg-[color:color-mix(in_srgb,var(--kali-panel)_66%,rgba(15,148,210,0.32))]"),x=()=>{let[e,t]=(0,l.useState)(""),[c,u]=(0,l.useState)([]),[x,m]=(0,s.default)("figlet-last-font",""),[v,h]=(0,l.useState)(!1),[k,w]=(0,l.useState)(""),[N,y]=(0,l.useState)(""),[j,S]=(0,l.useState)(!1),[_,C]=(0,l.useState)(16),[E,T]=(0,l.useState)(1),[L,R]=(0,l.useState)(80),[F,M]=(0,l.useState)("default"),[P,D]=(0,l.useState)(0),[U,A]=(0,l.useState)(0),[z,B]=(0,l.useState)("left"),[G,W]=(0,l.useState)(0),[O,I]=(0,l.useState)(""),H=(0,l.useRef)(null),J=(0,l.useRef)(null),K=(0,l.useRef)(null),V=(0,l.useRef)(null),Y=(0,l.useRef)({}),[$,q]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=new URLSearchParams(window.location.search),a=e.get("text");a&&t(a);let r=e.get("font");r&&m(r);let l=Number(e.get("size"));Number.isNaN(l)||C(l);let n=Number(e.get("line"));Number.isNaN(n)||T(n);let i=Number(e.get("width"));Number.isNaN(i)||R(i);let o=e.get("layout");o&&M(o);let s=e.get("align");s&&B(s);let c=Number(e.get("gradient"));Number.isNaN(c)||A(c);let u=Number(e.get("kerning"));Number.isNaN(u)||D(u);let d=Number(e.get("pad"));Number.isNaN(d)||W(d)},[t,m,C,T,R,M,B,A,D,W]),(0,l.useEffect)(()=>{if("function"==typeof Worker)return H.current=new Worker(a.tu(new URL(a.p+a.u(8457),a.b))),H.current.onmessage=e=>{var t,a;(null==(t=e.data)?void 0:t.type)==="font"?u(t=>[...t,{name:e.data.font,preview:e.data.preview,mono:e.data.mono}]):(null==(a=e.data)?void 0:a.type)==="render"&&(y(e.data.output),I("Preview updated"),K.current&&clearTimeout(K.current),K.current=setTimeout(()=>I(""),2e3))},(async()=>{try{await Promise.all(Object.entries({Standard:()=>a.e(9068).then(a.bind(a,99068)),Slant:()=>a.e(3103).then(a.bind(a,83103)),Big:()=>a.e(7477).then(a.bind(a,97477)),Small:()=>a.e(7436).then(a.bind(a,7436)),Doom:()=>a.e(4868).then(a.bind(a,14868)),Banner:()=>a.e(4135).then(a.bind(a,94135)),Block:()=>a.e(3590).then(a.bind(a,23590)),Shadow:()=>a.e(9541).then(a.bind(a,99541))}).map(async e=>{var t;let[a,r]=e,l=await r();null==(t=H.current)||t.postMessage({type:"load",name:a,data:l.default})}))}catch(e){}try{var e,t,r;if(null==(t=navigator)||null==(e=t.storage)?void 0:e.getDirectory){let e=await navigator.storage.getDirectory(),t=await e.getFileHandle("figlet-last-font.json"),a=await t.getFile(),l=JSON.parse(await a.text());l.data&&l.font&&(Y.current[l.font]=l.data,null==(r=H.current)||r.postMessage({type:"load",name:l.font,data:l.data})),l.font&&m(l.font)}}catch(e){}try{let e=await fetch("/api/figlet/fonts");if(e.ok){let{fonts:t}=await e.json(),a=[];t.forEach(e=>{var t;let{name:r,data:l}=e;a.push(r),Y.current[r]=l,null==(t=H.current)||t.postMessage({type:"load",name:r,data:l})}),a.length&&q(a)}}catch(e){}})(),()=>{var e;null==(e=H.current)||e.terminate(),null!==J.current&&cancelAnimationFrame(J.current),K.current&&clearTimeout(K.current)}},[m]);let X=(0,l.useCallback)(()=>{H.current&&x&&H.current.postMessage({type:"render",text:e,font:x,width:L,layout:F})},[e,x,L,F]);(0,l.useEffect)(()=>(null!==J.current&&cancelAnimationFrame(J.current),J.current=requestAnimationFrame(X),()=>{null!==J.current&&cancelAnimationFrame(J.current)}),[X]),(0,l.useEffect)(()=>{if(!N)return void w("");let e=N.split("\n").map(e=>e.replace(/\s+$/,"")),t=e.reduce((e,t)=>Math.max(e,t.length),0);w(e.map(e=>{let a=e;if("right"===z)a=" ".repeat(t-e.length)+e;else if("center"===z){let r=Math.floor((t-e.length)/2);a=" ".repeat(r)+e}else if("justify"===z){let r=e.trim().split(/ +/);if(r.length>1){let e=t-r.reduce((e,t)=>e+t.length,0),l=r.length-1,n=Math.floor(e/l),i=e%l;a=r.map((e,t)=>e+(t<l?" ".repeat(n+ +(t<i)):"")).join("")}}return" ".repeat(G)+a}).join("\n"))},[N,z,G]);let Q=async e=>{var t,a;let r=null==(t=e.target.files)?void 0:t[0];if(!r)return;let l=r.name.replace(/\.flf$/i,""),n=await r.text();Y.current[l]=n,null==(a=H.current)||a.postMessage({type:"load",name:l,data:n}),m(l),e.target.value=""},Z=c.filter(e=>!v||e.mono);(0,l.useEffect)(()=>{c.length&&!x&&m(c[0].name)},[c,x,m]),(0,l.useEffect)(()=>{x&&c.find(e=>e.name===x)&&X()},[c,x,X]),(0,l.useEffect)(()=>{let t=new URLSearchParams;e&&t.set("text",e),x&&t.set("font",x),16!==_&&t.set("size",String(_)),1!==E&&t.set("line",String(E)),80!==L&&t.set("width",String(L)),"default"!==F&&t.set("layout",F),"left"!==z&&t.set("align",z),0!==G&&t.set("pad",String(G)),0!==U&&t.set("gradient",String(U)),0!==P&&t.set("kerning",String(P));let a=t.toString();history.replaceState(null,"","".concat(location.pathname).concat(a?"?".concat(a):""))},[e,x,_,E,L,F,z,U,P,G]),(0,l.useEffect)(()=>{var e;x&&(null==(e=navigator.storage)?void 0:e.getDirectory)&&(async()=>{try{let e=await navigator.storage.getDirectory(),t=await e.getFileHandle("figlet-last-font.json",{create:!0}),a=await t.createWritable(),r=Y.current[x]?{font:x,data:Y.current[x]}:{font:x};await a.write(JSON.stringify(r)),await a.close()}catch(e){}})()},[x]);let ee=(0,l.useMemo)(()=>{let e=j?"#121212":"#f7f7f7",t={fontSize:"".concat(_,"px"),lineHeight:E,letterSpacing:"".concat(P,"px")};return 0!==U&&(t.backgroundImage="linear-gradient(to right, hsl(".concat(U,",100%,60%), hsl(").concat((U+120)%360,",100%,60%))"),t.backgroundSize="100% 100%",t.WebkitBackgroundClip="text",t.WebkitTextFillColor="transparent"),t.color=e,t},[_,U,j,P,E]);return(0,r.jsxs)("div",{className:"flex h-full w-full flex-col bg-[var(--kali-panel)] font-mono text-[color:var(--kali-text)]",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3 border-b border-[color:var(--kali-border)] bg-[color:color-mix(in_srgb,var(--kali-panel)_90%,rgba(15,148,210,0.08))] p-3",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 rounded border border-[color:color-mix(in_srgb,var(--kali-border)_45%,transparent)] bg-[color:color-mix(in_srgb,var(--kali-panel)_82%,var(--kali-panel-highlight))] px-2 py-1 text-xs uppercase tracking-wide",children:[(0,r.jsx)("input",{type:"checkbox",checked:v,onChange:()=>h(e=>!e),"aria-label":"Show monospace fonts only"}),"Monospace only"]}),(0,r.jsx)(o,{fonts:Z,value:x,onChange:m}),(0,r.jsx)("input",{type:"file",accept:".flf",onChange:Q,className:"rounded border border-[color:var(--kali-border)] bg-[var(--kali-panel)] px-2 py-1 text-xs text-[color:var(--kali-text)] transition-colors duration-[var(--motion-fast)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus","aria-label":"Upload font"}),$.length>0&&(0,r.jsxs)("select",{value:"",onChange:e=>m(e.target.value),className:"rounded border border-[color:var(--kali-border)] bg-[var(--kali-panel)] px-2 py-1 text-xs text-[color:var(--kali-text)] transition-colors duration-[var(--motion-fast)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus","aria-label":"Select uploaded font",children:[(0,r.jsx)("option",{value:"",disabled:!0,children:"Uploaded Fonts"}),$.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsxs)("label",{className:"flex flex-1 min-w-[16rem] items-center gap-2 text-sm",children:[(0,r.jsx)("span",{className:"whitespace-nowrap text-xs uppercase tracking-wide text-[color:color-mix(in_srgb,var(--kali-text)_76%,transparent)]",children:"Sample Text"}),(0,r.jsx)("input",{type:"text",className:"flex-1 rounded border border-[color:var(--kali-border)] bg-[var(--kali-panel)] px-2 py-1 text-[color:var(--kali-text)] placeholder:text-[color:color-mix(in_srgb,var(--kali-text)_45%,transparent)] transition-colors duration-[var(--motion-fast)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus",placeholder:"Type here",value:e,onChange:e=>t(e.target.value),"aria-label":"Text to convert"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-xs uppercase tracking-wide",children:["Size",(0,r.jsx)("input",{type:"range",min:"8",max:"72",value:_,onChange:e=>C(Number(e.target.value)),"aria-label":"Font size"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-xs uppercase tracking-wide",children:["Line",(0,r.jsx)("input",{type:"range",min:"0.8",max:"2",step:"0.1",value:E,onChange:e=>T(Number(e.target.value)),"aria-label":"Line height"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-xs uppercase tracking-wide",children:["Width",(0,r.jsx)("input",{type:"number",min:"20",max:"200",value:L,onChange:e=>R(Number(e.target.value)),className:"w-20 rounded border border-[color:var(--kali-border)] bg-[var(--kali-panel)] px-2 py-1 text-[color:var(--kali-text)] transition-colors duration-[var(--motion-fast)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus","aria-label":"Width"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-xs uppercase tracking-wide",children:["Layout",(0,r.jsxs)("select",{value:F,onChange:e=>M(e.target.value),className:"rounded border border-[color:var(--kali-border)] bg-[var(--kali-panel)] px-2 py-1 text-[color:var(--kali-text)] transition-colors duration-[var(--motion-fast)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-kali-focus","aria-label":"Layout",children:[(0,r.jsx)("option",{value:"default",children:"Default"}),(0,r.jsx)("option",{value:"full",children:"Full"}),(0,r.jsx)("option",{value:"fitted",children:"Fitted"}),(0,r.jsx)("option",{value:"smush",children:"Smush"})]})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-xs uppercase tracking-wide",children:["Gradient",(0,r.jsx)("input",{type:"range",min:"0",max:"360",value:U,onChange:e=>A(Number(e.target.value)),"aria-label":"Gradient hue"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-xs uppercase tracking-wide",children:["Kerning",(0,r.jsx)("input",{type:"range",min:"-2",max:"10",step:"0.1",value:P,onChange:e=>D(Number(e.target.value)),"aria-label":"Kerning"})]}),(0,r.jsx)(i.default,{align:z,setAlign:B,padding:G,setPadding:W})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>{k&&(navigator.clipboard.writeText(k),I("Copied to clipboard"),K.current&&clearTimeout(K.current),K.current=setTimeout(()=>I(""),2e3))},className:d,"aria-label":"Banner to clipboard",children:"Banner to Clipboard"}),(0,r.jsx)("button",{onClick:()=>{V.current&&(0,n.toPng)(V.current).then(e=>{let t=document.createElement("a");t.download="figlet.png",t.href=e,t.click(),I("Downloaded PNG"),K.current&&clearTimeout(K.current),K.current=setTimeout(()=>I(""),2e3)}).catch(()=>{})},className:p,"aria-label":"Export PNG",children:(0,r.jsx)("img",{src:"/themes/Yaru/actions/document-save-as-png-symbolic.svg",alt:"",className:"h-6 w-6"})}),(0,r.jsx)("button",{onClick:()=>{V.current&&(0,n.toSvg)(V.current).then(e=>{let t=document.createElement("a");t.download="figlet.svg",t.href=e,t.click(),I("Downloaded SVG"),K.current&&clearTimeout(K.current),K.current=setTimeout(()=>I(""),2e3)}).catch(()=>{})},className:f,"aria-label":"Export SVG",children:(0,r.jsx)("img",{src:"/themes/Yaru/actions/document-save-as-svg-symbolic.svg",alt:"",className:"h-6 w-6"})}),(0,r.jsx)("button",{onClick:()=>{if(!k)return;let e=new Blob([k],{type:"text/plain"}),t=URL.createObjectURL(e),a=document.createElement("a");a.download="figlet.txt",a.href=t,a.click(),URL.revokeObjectURL(t),I("Downloaded text"),K.current&&clearTimeout(K.current),K.current=setTimeout(()=>I(""),2e3)},className:g,"aria-label":"Export text file",children:"TXT"}),(0,r.jsx)("button",{onClick:()=>S(e=>!e),className:b,"aria-label":"Invert colors",children:"Invert"})]})]}),(0,r.jsx)("div",{className:"flex-1 min-h-[18rem] overflow-hidden",children:(0,r.jsx)("div",{className:"h-full overflow-auto border-b border-[color:var(--kali-border)] ".concat(j?"bg-[color:var(--color-text)]":"bg-[var(--kali-panel)]"),children:(0,r.jsx)("pre",{ref:V,className:"min-h-full w-full whitespace-pre px-4 py-5 font-mono",style:ee,children:k})})}),(0,r.jsxs)("div",{className:"p-2 text-right text-xs text-[color:color-mix(in_srgb,var(--kali-text)_70%,transparent)]",children:["About this feature"," ",(0,r.jsx)("a",{href:"http://www.figlet.org/",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"FIGlet"})]}),(0,r.jsx)("div",{"aria-live":"polite",className:"sr-only",children:O})]})}},67983:(e,t,a)=>{a.d(t,{default:()=>l});var r=a(37876);a(14232);let l=e=>{let{align:t,setAlign:a,padding:l,setPadding:n}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide",children:["Align",(0,r.jsxs)("select",{value:t,onChange:e=>a(e.target.value),className:"rounded border border-black/40 bg-gray-800 px-2 py-1 text-white","aria-label":"Alignment",children:[(0,r.jsx)("option",{value:"left",children:"Left"}),(0,r.jsx)("option",{value:"center",children:"Center"}),(0,r.jsx)("option",{value:"right",children:"Right"}),(0,r.jsx)("option",{value:"justify",children:"Justify"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2",children:["Padding",(0,r.jsx)("input",{type:"number",min:"0",value:l,onChange:e=>n(Number(e.target.value)),className:"w-16 rounded border border-black/40 bg-gray-800 px-2 py-1 text-white","aria-label":"Padding"})]})]})}}}]);