"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5983],{95983:(e,t,l)=>{l.r(t),l.d(t,{default:()=>c});var o=l(37876),a=l(14232);let n=e=>{let t=Date.now()-e,l=Math.floor(t/864e5);if(l>0)return"".concat(l," day").concat(1!==l?"s":""," ago");let o=Math.floor(t/36e5);if(o>0)return"".concat(o," hour").concat(1!==o?"s":""," ago");let a=Math.floor(t/6e4);return a>0?"".concat(a," minute").concat(1!==a?"s":""," ago"):"Just now"};function c(e){let{openApp:t}=e,[l,c]=(0,a.useState)([]),[r,s]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=24*parseInt(localStorage.getItem("trash-purge-days")||"30",10)*36e5,t=Date.now(),l=[];try{l=JSON.parse(localStorage.getItem("window-trash")||"[]")}catch(e){l=[]}l=l.filter(l=>t-l.closedAt<=e),localStorage.setItem("window-trash",JSON.stringify(l)),c(l)},[]);let i=e=>{c(e),localStorage.setItem("window-trash",JSON.stringify(e))},d=(0,a.useCallback)(()=>{if(null===r)return;let e=l[r];window.confirm("Restore ".concat(e.title,"?"))&&(t(e.id),i(l.filter((e,t)=>t!==r)),s(null))},[l,r,t]),u=(0,a.useCallback)(()=>{if(null===r)return;let e=l[r];window.confirm("Delete ".concat(e.title,"?"))&&(i(l.filter((e,t)=>t!==r)),s(null))},[l,r]),b=(0,a.useCallback)(e=>{null!==r&&("Delete"===e.key||"Backspace"===e.key?(e.preventDefault(),u()):("Enter"===e.key||"r"===e.key.toLowerCase())&&(e.preventDefault(),d()))},[r,u,d]);return(0,a.useEffect)(()=>(window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)),[b]),(0,o.jsxs)("div",{className:"w-full h-full flex flex-col bg-ub-cool-grey text-white select-none",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between w-full bg-ub-warm-grey bg-opacity-40 text-sm",children:[(0,o.jsx)("span",{className:"font-bold ml-2",children:"Trash"}),(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("button",{onClick:d,disabled:null===r,className:"border border-black bg-black bg-opacity-50 px-3 py-1 my-1 mx-1 rounded hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-ub-orange disabled:opacity-50",children:"Restore"}),(0,o.jsx)("button",{onClick:()=>{0!==l.length&&window.confirm("Restore all windows?")&&(l.forEach(e=>t(e.id)),i([]),s(null))},disabled:0===l.length,className:"border border-black bg-black bg-opacity-50 px-3 py-1 my-1 mx-1 rounded hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-ub-orange disabled:opacity-50",children:"Restore All"}),(0,o.jsx)("button",{onClick:u,disabled:null===r,className:"border border-black bg-black bg-opacity-50 px-3 py-1 my-1 mx-1 rounded hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-ub-orange disabled:opacity-50",children:"Delete"}),(0,o.jsx)("button",{onClick:()=>{0!==l.length&&window.confirm("Empty trash?")&&(i([]),s(null))},disabled:0===l.length,className:"border border-black bg-black bg-opacity-50 px-3 py-1 my-1 mx-1 rounded hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-ub-orange disabled:opacity-50",children:"Empty"})]})]}),(0,o.jsxs)("div",{className:"flex flex-wrap content-start p-2 overflow-auto",children:[0===l.length&&(0,o.jsx)("div",{className:"w-full text-center mt-10",children:"Trash is empty"}),l.map((e,t)=>(0,o.jsxs)("div",{tabIndex:0,onClick:()=>s(t),className:"m-2 border p-1 w-32 cursor-pointer ".concat(r===t?"bg-ub-drk-abrgn":""),children:[e.image?(0,o.jsx)("img",{src:e.image,alt:e.title,className:"h-20 w-full object-cover"}):e.icon?(0,o.jsx)("img",{src:e.icon,alt:e.title,className:"h-20 w-20 mx-auto object-contain"}):null,(0,o.jsx)("p",{className:"text-center text-xs truncate mt-1",title:e.title,children:e.title}),(0,o.jsx)("p",{className:"text-center text-[10px] text-gray-400","aria-label":"Closed ".concat(n(e.closedAt)),children:n(e.closedAt)})]},e.closedAt))]})]})}}}]);