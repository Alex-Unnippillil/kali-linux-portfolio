(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7854],{425:()=>{},18040:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var r=a(37876);let i={clear:"var(--kali-control)",partly:"color-mix(in_srgb,var(--kali-control)_70%,var(--kali-text))",overcast:"color-mix(in_srgb,var(--kali-text)_85%,transparent)",fog:"color-mix(in_srgb,var(--kali-text)_70%,transparent)",drizzle:"color-mix(in_srgb,var(--kali-control)_60%,var(--kali-text))",rain:"color-mix(in_srgb,var(--kali-control)_75%,var(--kali-text))",snow:"color-mix(in_srgb,var(--kali-text)_90%,white)",thunder:"color-mix(in_srgb,var(--kali-control)_85%,var(--kali-text))"};function n(e){var t;let{code:a,className:n="w-16 h-16",tone:l}=e,s=null!=l?l:0===a?"clear":1===a||2===a?"partly":3===a?"overcast":45===a||48===a?"fog":a>=51&&a<=57?"drizzle":a>=61&&a<=67||a>=80&&a<=82?"rain":a>=71&&a<=77||a>=85&&a<=86?"snow":a>=95?"thunder":"overcast",d={viewBox:"0 0 24 24",className:n,fill:"currentColor","aria-hidden":!0,focusable:"false",style:{color:null!=(t=i[s])?t:"var(--kali-text)"}};return"clear"===s?(0,r.jsxs)("svg",{...d,children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"5"}),(0,r.jsxs)("g",{stroke:"currentColor",strokeWidth:"2",fill:"none",children:[(0,r.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"4"}),(0,r.jsx)("line",{x1:"12",y1:"20",x2:"12",y2:"23"}),(0,r.jsx)("line",{x1:"4.22",y1:"4.22",x2:"6.34",y2:"6.34"}),(0,r.jsx)("line",{x1:"17.66",y1:"17.66",x2:"19.78",y2:"19.78"}),(0,r.jsx)("line",{x1:"1",y1:"12",x2:"4",y2:"12"}),(0,r.jsx)("line",{x1:"20",y1:"12",x2:"23",y2:"12"}),(0,r.jsx)("line",{x1:"4.22",y1:"19.78",x2:"6.34",y2:"17.66"}),(0,r.jsx)("line",{x1:"17.66",y1:"6.34",x2:"19.78",y2:"4.22"})]})]}):"drizzle"===s||"rain"===s?(0,r.jsxs)("svg",{...d,children:[(0,r.jsx)("path",{d:"M7 16a5 5 0 1 1 10 0H7Z"}),(0,r.jsxs)("g",{stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",children:[(0,r.jsx)("line",{x1:"9",y1:"18.5",x2:"9",y2:"22"}),(0,r.jsx)("line",{x1:"12",y1:"18.5",x2:"12",y2:"22"}),(0,r.jsx)("line",{x1:"15",y1:"18.5",x2:"15",y2:"22"})]})]}):"snow"===s?(0,r.jsxs)("svg",{...d,children:[(0,r.jsx)("path",{d:"M12 2v20M2 12h20",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M5 5l14 14M19 5L5 19",stroke:"currentColor",strokeWidth:"2"})]}):"thunder"===s?(0,r.jsxs)("svg",{...d,children:[(0,r.jsx)("path",{d:"M7 14a5 5 0 1 1 10 0H7Z"}),(0,r.jsx)("polygon",{points:"13 14 9 21 13 21 11 24 15 17 11 17 13 14"})]}):"fog"===s?(0,r.jsxs)("svg",{...d,children:[(0,r.jsx)("path",{d:"M5 14a7 7 0 0 1 14 0H5Z"}),(0,r.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.5",fill:"none",children:[(0,r.jsx)("line",{x1:"4",y1:"18",x2:"20",y2:"18"}),(0,r.jsx)("line",{x1:"6",y1:"21",x2:"18",y2:"21"})]})]}):"partly"===s?(0,r.jsxs)("svg",{...d,children:[(0,r.jsx)("circle",{cx:"8",cy:"9",r:"4"}),(0,r.jsx)("path",{d:"M8 17a5 5 0 1 1 10 0H8Z"})]}):(0,r.jsx)("svg",{...d,children:(0,r.jsx)("path",{d:"M5 16a7 7 0 0 1 14 0H5Z"})})}},27528:(e,t,a)=>{"use strict";a.d(t,{safeLocalStorage:()=>r});let r=a(57613).hasStorage?localStorage:void 0},31730:(e,t,a)=>{"use strict";a.d(t,{hasIndexedDB:()=>i,isBrowser:()=>r});let r="undefined"!=typeof document,i=r&&"undefined"!=typeof indexedDB},57613:(e,t,a)=>{"use strict";a.d(t,{hasStorage:()=>i,isBrowser:()=>r.isBrowser});var r=a(31730);let i="undefined"!=typeof localStorage},75473:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var r,i,n,l=a(37876),s=a(14232),d=a(18040),o=a(69432),c=a(27528),u=a(74273);let h=JSON.parse('{"label":"London, United Kingdom","temperatureC":15,"feelsLikeC":13,"conditionCode":3,"sunrise":"2024-05-22T04:57:00Z","sunset":"2024-05-22T20:13:00Z","forecast":[{"date":"2024-05-23","tempC":16,"conditionCode":3},{"date":"2024-05-24","tempC":17,"conditionCode":61},{"date":"2024-05-25","tempC":18,"conditionCode":0},{"date":"2024-05-26","tempC":14,"conditionCode":3},{"date":"2024-05-27","tempC":15,"conditionCode":2}]}');a(425);let m={0:"Clear sky",1:"Mostly clear",2:"Partly cloudy",3:"Overcast",45:"Foggy",48:"Icy fog",51:"Light drizzle",53:"Drizzle",55:"Heavy drizzle",56:"Freezing drizzle",57:"Dense freezing drizzle",61:"Light rain",63:"Rain",65:"Heavy rain",66:"Light freezing rain",67:"Heavy freezing rain",71:"Light snow",73:"Snow",75:"Heavy snow",77:"Snow grains",80:"Light rain showers",81:"Rain showers",82:"Violent rain showers",85:"Snow showers",86:"Heavy snow showers",95:"Thunderstorm",96:"Thunderstorm with hail",99:"Severe thunderstorm"},w=e=>{var t;return null!=(t=m[e])?t:"Unknown conditions"},y={cityLabel:h.label,temperatureC:h.temperatureC,feelsLikeC:null!=(r=h.feelsLikeC)?r:h.temperatureC,conditionCode:h.conditionCode,conditionText:w(h.conditionCode),sunrise:null!=(i=h.sunrise)?i:null,sunset:null!=(n=h.sunset)?n:null,humidity:null,precipitationChance:null,windSpeedKph:null,forecast:h.forecast.map(e=>({...e})),updatedAt:null,stale:!1},g={unit:"weatherUnit",saved:"savedCities",pinned:"pinnedCity",last:"lastCity"};function p(e,t){return"metric"===t?e:1.8*e+32}function f(e){if(!e)return"—";let t=new Date(e);return Number.isNaN(t.getTime())?"—":t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function x(e,t,a){var r,i,n,l,s,d,o,c,u,h;let m=null!=(c=null==e?void 0:e.current_weather)?c:{},g=Array.isArray(null==e||null==(r=e.hourly)?void 0:r.time)?e.hourly.time:[],p=Array.isArray(null==e||null==(i=e.hourly)?void 0:i.apparent_temperature)?e.hourly.apparent_temperature:[],f=Array.isArray(null==e||null==(n=e.hourly)?void 0:n.relative_humidity_2m)?e.hourly.relative_humidity_2m:[],x=Array.isArray(null==e||null==(l=e.hourly)?void 0:l.precipitation_probability)?e.hourly.precipitation_probability:[],v="number"==typeof m.temperature?m.temperature:y.temperatureC,_=null,j=null;if("string"==typeof m.time){let e=g.indexOf(m.time);e>=0&&"number"==typeof p[e]&&(v=p[e]),e>=0&&"number"==typeof f[e]&&(_=f[e]),e>=0&&"number"==typeof x[e]&&(j=x[e])}let b=Array.isArray(null==e||null==(s=e.daily)?void 0:s.time)?e.daily.time.reduce((t,a,r)=>{var i,n;let l=null==(i=e.daily.temperature_2m_max)?void 0:i[r],s=null==(n=e.daily.weathercode)?void 0:n[r];return"number"==typeof l&&"number"==typeof s&&t.push({date:a,tempC:l,conditionCode:s}),t},[]):[],C=Array.isArray(null==e||null==(d=e.daily)?void 0:d.sunrise)&&null!=(u=e.daily.sunrise[0])?u:null,S=Array.isArray(null==e||null==(o=e.daily)?void 0:o.sunset)&&null!=(h=e.daily.sunset[0])?h:null,L="number"==typeof m.weathercode?m.weathercode:y.conditionCode,N="number"==typeof m.temperature?m.temperature:y.temperatureC,k="number"==typeof m.windspeed?m.windspeed:null,A=b.length>0?b.slice(0,5):y.forecast.map(e=>({...e}));return{cityLabel:t,temperatureC:N,feelsLikeC:v,conditionCode:L,conditionText:w(L),sunrise:null!=C?C:y.sunrise,sunset:null!=S?S:y.sunset,humidity:_,precipitationChance:j,windSpeedKph:k,forecast:A,updatedAt:a.updatedAt,stale:a.stale}}function v(){var e;let{allowNetwork:t,reducedMotion:a,largeHitAreas:r}=(0,u.useSettings)(),[i,n]=(0,s.useState)("metric"),[h,m]=(0,s.useState)(y.cityLabel),[w,v]=(0,s.useState)([]),[_,j]=(0,s.useState)(null),[b,C]=(0,s.useState)(y),[S,L]=(0,s.useState)("idle"),[N,k]=(0,s.useState)(null),[A,z]=(0,s.useState)("undefined"!=typeof navigator&&!navigator.onLine),M=(0,s.useRef)(!1),D=(0,s.useRef)(y.cityLabel),T=(0,s.useRef)(t),E=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!c.safeLocalStorage){M.current=!0;return}try{let e=c.safeLocalStorage.getItem(g.unit);("metric"===e||"imperial"===e)&&n(e)}catch(e){}try{let e=c.safeLocalStorage.getItem(g.saved);if(e){let t=JSON.parse(e);Array.isArray(t)&&v(t.map(e=>"string"==typeof e?e:null).filter(e=>!!e))}}catch(e){}try{let e=c.safeLocalStorage.getItem(g.pinned);e&&(j(e),D.current=e,m(e))}catch(e){}if(D.current===y.cityLabel)try{let e=c.safeLocalStorage.getItem(g.last);e&&(D.current=e,m(e))}catch(e){}M.current=!0},[]),(0,s.useEffect)(()=>{let e=()=>z(!1),t=()=>z(!0);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),(0,s.useEffect)(()=>()=>{var e;null==(e=E.current)||e.abort()},[]);let I=(0,s.useCallback)(async function(e){var a,r,i,n,l,s,d,u;let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},w=e.trim();if(!w)return;null==(a=E.current)||a.abort();let p=new AbortController;E.current=p,L("loading"),k(null);try{let e=t?"cache-first":"cache-only",a=t&&!A,y=await (0,o.fetchWeather)("openMeteoGeo",{name:w,count:1,language:"en",format:"json",strategy:e,allowNetwork:t,signal:p.signal,revalidate:a});if(E.current!==p)return;let f=null!=(s=null==y?void 0:y.data)?s:y,_=null==f||null==(r=f.results)?void 0:r[0];if(!_)throw new o.WeatherFetchError("not-found","City not found");let b=[_.name,_.admin1,_.country_code].filter(Boolean).map(e=>e.trim()).filter(Boolean).join(", "),S=await (0,o.fetchWeather)("openMeteo",{lat:_.latitude,lon:_.longitude,timezone:_.timezone||"auto",hourly:"apparent_temperature,relative_humidity_2m,precipitation_probability",daily:"weathercode,temperature_2m_max,temperature_2m_min,sunrise,sunset",forecast_days:5,strategy:e,allowNetwork:t,signal:p.signal,revalidate:a});if(E.current!==p)return;let L=null!=(d=null==S?void 0:S.data)?d:S,N=x(L,b,{updatedAt:null!=(u=null==S||null==(i=S.meta)?void 0:i.timestamp)?u:null,stale:!!(null==S||null==(n=S.meta)?void 0:n.stale)});C(N);let z=t?A?"You are offline. Showing cached data when available.":(null==S||null==(l=S.meta)?void 0:l.stale)?"Showing cached data while refreshing.":null:"Network access is disabled in Settings. Showing cached data when available.";k(z),(null==S?void 0:S.revalidate)&&S.revalidate.then(e=>{var a,r,i;if(!e||E.current!==p)return;let n=x(e.data,b,{updatedAt:null!=(i=null==(a=e.meta)?void 0:a.timestamp)?i:null,stale:!!(null==(r=e.meta)?void 0:r.stale)});C(n),k(t?A?"You are offline. Showing cached data when available.":null:"Network access is disabled in Settings. Showing cached data when available.")}),!1!==h.persistQuery&&m(b);try{c.safeLocalStorage&&!1!==h.storeAsLast&&c.safeLocalStorage.setItem(g.last,b)}catch(e){}v(e=>{if(e.includes(b))return e;let t=[...e.slice(-7),b];if(c.safeLocalStorage)try{c.safeLocalStorage.setItem(g.saved,JSON.stringify(t))}catch(e){}return t}),j(e=>{if(!e)return e;if(e.toLowerCase()===w.toLowerCase()||e.toLowerCase()===b.toLowerCase()){if(c.safeLocalStorage)try{c.safeLocalStorage.setItem(g.pinned,b)}catch(e){}return b}return e})}catch(e){if(p.signal.aborted)return;e instanceof o.WeatherFetchError?"not-found"===e.type?k("City not found. Try a nearby region or country."):"network-disabled"===e.type?k("Network access is disabled in Settings. Showing demo data."):"offline"===e.type?k("You are offline. Showing demo data."):k("Unable to fetch live weather data. Showing the demo city instead."):k("Unable to fetch live weather data. Showing the demo city instead."),C(y)}finally{L("idle")}},[t,A]);(0,s.useEffect)(()=>{if(M.current){if(t?A?k("You are offline. Showing cached data when available."):k(null):(L("idle"),k("Network access is disabled in Settings. Showing cached data when available.")),D.current){let e=D.current;D.current=null,I(e,{persistQuery:!0,storeAsLast:!0})}if(!T.current&&t){let e=null!=_?_:h;e&&I(e,{persistQuery:!0,storeAsLast:!0})}T.current=t}},[t,A,h,_,I]),(0,s.useEffect)(()=>{if(c.safeLocalStorage)try{c.safeLocalStorage.setItem(g.unit,i)}catch(e){}},[i]);let W=(0,s.useMemo)(()=>{try{return new Intl.DateTimeFormat(void 0,{weekday:"short"})}catch(e){return null}},[]),F=(0,s.useMemo)(()=>b.forecast.map(e=>{let t=new Date(e.date),a=W&&!Number.isNaN(t.getTime())?W.format(t):e.date;return{key:e.date,label:a,code:e.conditionCode,temp:Math.round(p(e.tempC,i))}}),[b,i,W]),H="metric"===i?"C":"F",B=Math.round(p(b.temperatureC,i)),U=Math.round(p(b.feelsLikeC,i)),R=null===b.windSpeedKph?"—":"".concat(Math.round((e=b.windSpeedKph,"metric"===i?e:.621371*e))," ").concat("metric"===i?"km/h":"mph"),Z=null===b.humidity?"—":"".concat(Math.round(b.humidity),"%"),O=null===b.precipitationChance?"—":"".concat(Math.round(b.precipitationChance),"%"),Q=b.updatedAt&&!Number.isNaN(new Date(b.updatedAt).getTime())?new Date(b.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):null,K=["weather-widget",a?"weather-widget--static":"",r?"weather-widget--large-hit":""].filter(Boolean).join(" ");return(0,l.jsxs)("section",{className:K,"aria-label":"Weather widget",children:[(0,l.jsxs)("form",{className:"weather-widget__controls",onSubmit:e=>{e.preventDefault(),I(h,{persistQuery:!0,storeAsLast:!0})},children:[(0,l.jsxs)("div",{className:"weather-widget__field",children:[(0,l.jsx)("label",{htmlFor:"weather-widget-city",children:"City"}),(0,l.jsx)("input",{id:"weather-widget-city",name:"city",type:"text",list:"weather-widget-saved",autoComplete:"off","aria-label":"Search city",value:h,onChange:e=>m(e.target.value),placeholder:"Search city"}),(0,l.jsx)("datalist",{id:"weather-widget-saved",children:w.map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]}),(0,l.jsxs)("div",{className:"weather-widget__field",children:[(0,l.jsx)("label",{htmlFor:"weather-widget-unit",children:"Units"}),(0,l.jsxs)("select",{id:"weather-widget-unit",name:"unit",value:i,onChange:e=>{n(e.target.value)},children:[(0,l.jsx)("option",{value:"metric",children:"Celsius (\xb0C)"}),(0,l.jsx)("option",{value:"imperial",children:"Fahrenheit (\xb0F)"})]})]}),(0,l.jsxs)("div",{className:"weather-widget__actions",children:[(0,l.jsx)("button",{type:"submit",disabled:"loading"===S,children:"Update"}),(0,l.jsx)("button",{type:"button",onClick:()=>{I(b.cityLabel,{persistQuery:!0,storeAsLast:!0})},disabled:"loading"===S,children:"Refresh"}),(0,l.jsx)("button",{type:"button",onClick:()=>{let e=b.cityLabel.trim();e&&j(t=>{let a=t===e?null:e;if(c.safeLocalStorage)try{a?c.safeLocalStorage.setItem(g.pinned,a):c.safeLocalStorage.removeItem(g.pinned)}catch(e){}return a})},"aria-pressed":_===b.cityLabel,children:_===b.cityLabel?"Unpin":"Pin"})]})]}),N&&(0,l.jsxs)("div",{className:"weather-widget__alert",role:"status","aria-live":"assertive",children:[(0,l.jsx)("span",{className:"weather-widget__alert-badge","aria-hidden":"true",children:"!"}),(0,l.jsx)("span",{className:"weather-widget__alert-text",children:N})]}),(0,l.jsxs)("div",{className:"weather-widget__current",role:"group","aria-label":"Current conditions for ".concat(b.cityLabel),children:[(0,l.jsxs)("div",{className:"weather-widget__header",children:[(0,l.jsx)("h2",{className:"weather-widget__city",children:b.cityLabel}),(0,l.jsxs)("div",{className:"weather-widget__status",children:[Q&&(0,l.jsxs)("span",{className:"weather-widget__updated",children:[b.stale?"Cached":"Updated"," ",Q]}),"loading"===S&&(0,l.jsx)("span",{className:"weather-widget__loading",role:"status",children:"Loading…"})]})]}),(0,l.jsxs)("div",{className:"weather-widget__summary-grid",children:[(0,l.jsxs)("div",{className:"weather-widget__summary",children:[(0,l.jsx)(d.default,{code:b.conditionCode,className:"weather-widget__icon"}),(0,l.jsxs)("div",{className:"weather-widget__readings",children:[(0,l.jsxs)("div",{className:"weather-widget__temperature","aria-live":"polite",children:[B,"\xb0",H]}),(0,l.jsxs)("div",{className:"weather-widget__feels",children:["Feels like ",U,"\xb0",H]}),(0,l.jsx)("div",{className:"weather-widget__condition",children:b.conditionText})]})]}),(0,l.jsxs)("dl",{className:"weather-widget__metrics","aria-label":"Weather metrics",children:[(0,l.jsxs)("div",{className:"weather-widget__metric",children:[(0,l.jsxs)("dt",{children:[(0,l.jsx)("span",{className:"weather-widget__metric-icon","aria-hidden":"true",children:"↑"}),(0,l.jsx)("span",{children:"Sunrise"})]}),(0,l.jsx)("dd",{children:f(b.sunrise)})]}),(0,l.jsxs)("div",{className:"weather-widget__metric",children:[(0,l.jsxs)("dt",{children:[(0,l.jsx)("span",{className:"weather-widget__metric-icon weather-widget__metric-icon--sunset","aria-hidden":"true",children:"↓"}),(0,l.jsx)("span",{children:"Sunset"})]}),(0,l.jsx)("dd",{children:f(b.sunset)})]}),(0,l.jsxs)("div",{className:"weather-widget__metric",children:[(0,l.jsxs)("dt",{children:[(0,l.jsx)("span",{className:"weather-widget__metric-icon","aria-hidden":"true",children:"\uD83D\uDCA8"}),(0,l.jsx)("span",{children:"Wind"})]}),(0,l.jsx)("dd",{children:R})]}),(0,l.jsxs)("div",{className:"weather-widget__metric",children:[(0,l.jsxs)("dt",{children:[(0,l.jsx)("span",{className:"weather-widget__metric-icon","aria-hidden":"true",children:"\uD83D\uDCA7"}),(0,l.jsx)("span",{children:"Humidity"})]}),(0,l.jsx)("dd",{children:Z})]}),(0,l.jsxs)("div",{className:"weather-widget__metric",children:[(0,l.jsxs)("dt",{children:[(0,l.jsx)("span",{className:"weather-widget__metric-icon","aria-hidden":"true",children:"☔"}),(0,l.jsx)("span",{children:"Precip"})]}),(0,l.jsx)("dd",{children:O})]})]})]})]}),F.length>0&&(0,l.jsx)("div",{className:"weather-widget__forecast",role:"list","aria-label":"5-day forecast",children:F.map(e=>(0,l.jsxs)("div",{role:"listitem",className:"weather-widget__forecast-day",children:[(0,l.jsx)("span",{className:"weather-widget__forecast-label",children:e.label}),(0,l.jsx)(d.default,{code:e.code,className:"weather-widget__forecast-icon"}),(0,l.jsxs)("span",{className:"weather-widget__forecast-temp",children:[e.temp,"\xb0",H]})]},e.key))})]})}}}]);