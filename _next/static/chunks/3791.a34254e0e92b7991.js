"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3791],{65422:(e,t,a)=>{a.d(t,{consumeGameKey:()=>n,formatGameKey:()=>o,shouldHandleGameKey:()=>r});let r=function(e){let{isFocused:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(!t||(e=>{if(!e||!(e instanceof HTMLElement))return!1;let t=e.tagName;return"INPUT"===t||"TEXTAREA"===t||e.isContentEditable})(e.target))},n=e=>{(null==e?void 0:e.cancelable)&&e.preventDefault(),(null==e?void 0:e.stopPropagation)&&e.stopPropagation()},o=e=>{if(!e)return"";if(" "===e)return"Space";let t=e.toLowerCase();return"escape"===t?"Esc":"arrowup"===t?"ArrowUp":"arrowdown"===t?"ArrowDown":"arrowleft"===t?"ArrowLeft":"arrowright"===t?"ArrowRight":1===e.length?e.toUpperCase():e}},90209:(e,t,a)=>{a.d(t,{default:()=>o});var r=a(14232),n=a(74273);function o(){let{reducedMotion:e}=(0,n.useSettings)(),[t,a]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=window.matchMedia("(prefers-reduced-motion: reduce)"),t=()=>a(e.matches);return(t(),"function"==typeof e.addEventListener)?(e.addEventListener("change",t),()=>e.removeEventListener("change",t)):(e.addListener(t),()=>e.removeListener(t))},[]),e||t}},93791:(e,t,a)=>{a.r(t),a.d(t,{default:()=>W});var r=a(37876),n=a(14232),o=a(95220),l=a(90209),s=a(72082),i=a(65422);let c=JSON.parse('["mother","father","sister","brother","cousin","uncle","aunt","grandmother","grandfather","stepmother","stepfather","stepsister","stepbrother","niece","nephew","daughter","son","granddaughter","grandson","twin","parent","guardian","partner","spouse","relative","in-laws","family tree","household","sibling rivalry","family reunion","godmother","godfather","godparent","caretaker","family friend","foster parent","adoptive parent","baby sitter","family portrait","birthday party","holiday dinner","bedtime story","homecoming","cousin crew","family recipe","movie night","family outing","road trip","big brother","little sister"]'),d=JSON.parse('["aberration","convivial","equivocate","laconic","obdurate","quandary","venerate","abstain","acumen","alleviate","ambiguity","ameliorate","anomaly","antipathy","apathy","arcane","arduous","avarice","benevolent","capricious","candid","cogent","conundrum","copious","credible","cursory","deference","diligent","elated","emulate","ennui","erudite","esoteric","exacerbate","fastidious","fortuitous","frugal","gregarious","impartial","incessant","intrepid","jubilant","lucid","meticulous","nuance","obstinate","pragmatic","precise","prolific","resilient","scrutinize","sporadic","staunch","subtle","tenacious","ubiquitous","vivid","zealous"]'),u=JSON.parse('["inception","avatar","casablanca","gladiator","titanic","goodfellas","amelie","star wars","spider-man","the godfather","the dark knight","pulp fiction","forrest gump","fight club","the matrix","jurassic park","toy story","the lion king","back to the future","parasite","the shawshank redemption","spirited away","blade runner","mad max fury road","the silence of the lambs","the grand budapest hotel","la la land","whiplash","black panther","avengers endgame","interstellar","the social network","the prestige","eternal sunshine","no country for old men","inside out","coco","raiders of the lost ark","the big lebowski","the princess bride","die hard","rocky","the breakfast club","ghostbusters","the terminator","alien","finding nemo","the incredibles","the sound of music","the wizard of oz","singin in the rain","the truman show","the fugitive","the sixth sense","the departed","the green mile"]'),g={family:c,sat:d,movie:u,phrases:JSON.parse('["blue moon","silver lining","night owl","red herring","once in a lifetime","break the ice","piece of cake","on cloud nine","rain check","early bird","storm in a teacup","wild goose chase","better late than never","hit the road","under the weather","call it a day","beyond the horizon","time flies","quick as lightning","hard to swallow","lost and found","open secret","hidden gem","off the grid","home sweet home","family movie night","take the scenic route","lucky streak","midnight snack","golden hour","open road","coffee break","city lights","sunrise drive","quiet morning","sunset glow","double or nothing","all hands on deck","full steam ahead","rock solid","edge of your seat","chase the dream","game on","slow and steady","keep it simple","make it happen","bright and early","hold the line","safe and sound","stay the course"]')};g.family,g.sat,g.movie;let h=e=>e.trim().toLowerCase(),m=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,r={...a},n=Array.isArray(a[e])?a[e]:[];return r[e]=[...n,...t.map(h)],r},f="abcdefghijklmnopqrstuvwxyz".split(""),p=["e","t","a","o","i","n","s","h","r","d","l","u"],x=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?f.filter(e=>!p.includes(e)):[...f]},v=/^[a-z]$/,y=/^[a-z -]+$/,b="standard",w={casual:[3,6],standard:[5,9],hard:[8,14]},k={casual:{id:"casual",label:"Casual",description:"More attempts and generous hints.",maxWrong:8,hintAllowance:3,hintCost:5,score:{correct:8,wrong:2,hint:5,winBonus:15}},standard:{id:"standard",label:"Standard",description:"Balanced attempts and scoring.",maxWrong:6,hintAllowance:2,hintCost:7,score:{correct:10,wrong:3,hint:7,winBonus:25}},hard:{id:"hard",label:"Hard",description:"Fewer attempts and tighter scoring.",maxWrong:5,hintAllowance:1,hintCost:10,score:{correct:12,wrong:5,hint:10,winBonus:35}}},j=e=>void 0===e?Math.floor(0xffffffff*Math.random()):"number"==typeof e?e>>>0:(e=>{let t=0;for(let a=0;a<e.length;a+=1)t=(t<<5)-t+e.charCodeAt(a)|0;return t>>>0})(e),N=e=>{let t=1664525*e+0x3c6ef35f>>>0;return[t/0x100000000,t]},C=e=>e.trim().toLowerCase().replace(/\s+/g," "),S=e=>Math.max(0,e),E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=k[e]||k.standard;return{word:"",category:"",guessed:[],wrong:0,maxWrong:t.maxWrong,hintsRemaining:t.hintAllowance,hintCost:t.hintCost,score:0,difficulty:t.id,status:"idle",rngState:j()}},A=e=>e.word.split("").map(t=>" "===t||"-"===t?t:v.test(t)?e.guessed.includes(t)?t.toUpperCase():"_":"").join(""),R=e=>Array.from(new Set(e.word.split("").filter(t=>v.test(t)&&!e.guessed.includes(t)))),M=e=>!!e.word&&e.word.split("").filter(e=>v.test(e)).every(t=>e.guessed.includes(t)),P=e=>!!e.word&&e.wrong>=e.maxWrong,T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return e.length?m("custom",e,t):t},U=[e=>{e.beginPath(),e.arc(300,90,18,0,2*Math.PI),e.stroke()},e=>{e.beginPath(),e.moveTo(300,108),e.lineTo(300,160),e.stroke()},e=>{e.beginPath(),e.moveTo(300,120),e.lineTo(275,140),e.stroke()},e=>{e.beginPath(),e.moveTo(300,120),e.lineTo(325,140),e.stroke()},e=>{e.beginPath(),e.moveTo(300,160),e.lineTo(282,195),e.stroke()},e=>{e.beginPath(),e.moveTo(300,160),e.lineTo(318,195),e.stroke()}],L=(e,t,a)=>Math.max(t,Math.min(a,e)),O=async e=>{try{var t;if(null==(t=navigator.clipboard)?void 0:t.writeText)return await navigator.clipboard.writeText(e),!0}catch(e){}return!1},G=e=>Array.isArray(e)&&e.every(e=>"string"==typeof e),H=e=>"string"==typeof e&&Object.keys(k).includes(e),D=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90;if("undefined"==typeof document)return;let t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.overflow="hidden",t.style.zIndex="9999",document.body.appendChild(t);let a=["#60a5fa","#34d399","#fbbf24","#f472b6"],r=[];for(let n=0;n<e;n+=1){let e=document.createElement("div"),o=4+4*Math.random(),l=200*Math.random();e.style.position="absolute",e.style.width="".concat(o,"px"),e.style.height="".concat(o,"px"),e.style.backgroundColor=a[n%a.length],e.style.top="0px",e.style.left="".concat(100*Math.random(),"%"),e.style.opacity="1",e.style.borderRadius="2px",e.style.transform="translate3d(0, 0, 0) rotate(0deg)",e.style.transition="transform ".concat(2800,"ms ease-out, opacity ").concat(2800,"ms ease-out"),e.style.transitionDelay="".concat(l,"ms"),t.appendChild(e),r.push(e)}requestAnimationFrame(()=>{r.forEach(e=>{let t=(Math.random()-.5)*window.innerWidth*.45,a=720*Math.random();e.style.transform="translate3d(".concat(t,"px, ").concat(window.innerHeight+90,"px, 0) rotate(").concat(a,"deg)"),e.style.opacity="0"})}),setTimeout(()=>{t.remove()},3200)},W=function(){var e,t;let{windowMeta:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=null==(t=null==a?void 0:a.isFocused)||t,d=(0,l.default)(),u=(0,n.useRef)(null),h=(0,n.useRef)(null),m=(0,n.useRef)(null),f=(0,n.useRef)(!1),p=(0,n.useRef)(""),W=(0,n.useRef)(!1),[z,I]=(0,o.default)("hangman-difficulty","standard",H),[q,B]=(0,o.default)("hangman-custom-words",[],G),K=(0,n.useMemo)(()=>T(q,g),[q]),_=(0,n.useMemo)(()=>Object.keys(K||{}),[K]),[F,J]=(0,o.default)("hangman-dict",_[0]||"family",e=>"string"==typeof e),[Y,$]=(0,n.useState)(()=>E(z)),[V,Z]=(0,n.useState)(!1),[X,Q]=(0,n.useState)(""),[ee,et]=(0,n.useState)(""),[ea,er]=(0,n.useState)(null),[en,eo]=(0,n.useState)(!1),[el,es]=(0,n.useState)(!1),[ei,ec]=(0,n.useState)(""),[ed,eu]=(0,n.useState)(""),[eg,eh]=(0,o.default)("hangman-sound",!0,e=>"boolean"==typeof e),[em,ef]=(0,o.default)("hangman-filter-common",!1,e=>"boolean"==typeof e),[ep,ex]=(0,o.default)("hangman-highscore",0,e=>"number"==typeof e),[ev,ey]=(0,o.default)("hangman-stats",{},e=>e&&"object"==typeof e),eb=(0,n.useMemo)(()=>"hangman-best-time:".concat(z,":").concat(F),[z,F]),[ew,ek]=(0,o.default)(eb,null,e=>null===e||"number"==typeof e),[ej,eN]=(0,n.useState)({startedAt:null,elapsedMs:0,running:!1}),[eC,eS]=(0,n.useState)(0),[eE,eA]=(0,n.useState)(0),eR=(0,n.useRef)(ej),eM=(0,n.useRef)(Y),eP=(0,n.useRef)({game:Y,paused:V}),eT=(0,n.useMemo)(()=>x(em),[em]);(0,n.useEffect)(()=>{f.current=d},[d]),(0,n.useEffect)(()=>{eM.current=Y,eP.current={game:Y,paused:V}},[Y,V]),(0,n.useEffect)(()=>{eR.current=ej},[ej]),(0,n.useEffect)(()=>{if(!ej.running)return;let e=setInterval(()=>{eS(Date.now())},250);return()=>clearInterval(e)},[ej.running]),(0,n.useEffect)(()=>{if(!W.current){if(ei){W.current=!0;return}q.length&&ec(q.join("\n")),W.current=!0}},[ei,q,ec]),(0,n.useEffect)(()=>()=>{try{var e,t;null==(t=m.current)||null==(e=t.close)||e.call(t)}catch(e){}m.current=null},[]),(0,n.useEffect)(()=>{let e=h.current,t=u.current;if(!e||!t)return;let a=()=>{let a=e.getBoundingClientRect();if(!a.width||!a.height)return;let r=window.devicePixelRatio||1;t.style.width="".concat(a.width,"px"),t.style.height="".concat(a.height,"px"),t.width=Math.max(1,Math.floor(a.width*r)),t.height=Math.max(1,Math.floor(a.height*r))};a();let r=new ResizeObserver(a);return r.observe(e),window.addEventListener("orientationchange",a),()=>{r.disconnect(),window.removeEventListener("orientationchange",a)}},[]),(0,n.useEffect)(()=>{let e=u.current;if(e)return(e=>{let{canvas:t,getSnapshot:a,prefersReducedMotion:r,colors:n}=e,o=t.getContext("2d");if(!o)return()=>{};let l=0,s=!1,i="",c=0,d=performance.now(),u=performance.now(),g=(e,t,a,r,n)=>{o.beginPath(),o.moveTo(e,t),o.lineTo(e+(a-e)*n,t+(r-t)*n),o.stroke()},h=e=>{if(s)return;let{game:m,paused:f}=a();m.word!==i&&(i=m.word,c=m.wrong,u=e,d=e),m.wrong!==c&&(c=m.wrong,d=e);let p=window.devicePixelRatio||1,x=t.width/p,v=t.height/p,y=Math.min(x/420,v/260);o.setTransform(p*y,0,0,p*y,(x-420*y)/2*p,(v-260*y)/2*p);let b=(()=>{let e=getComputedStyle(t),a=(t,a)=>e.getPropertyValue(t).trim()||a;return{bg:a("--kali-surface","#0b0f16"),stroke:a("--kali-border","#cbd5e1"),text:a("--kali-text","#e2e8f0"),muted:a("--kali-text-muted","#94a3b8"),success:a("--color-success","#22c55e"),failure:a("--color-danger","#ef4444"),overlay:a("--color-overlay-soft","rgba(0,0,0,0.6)"),...n}})();o.clearRect(0,0,420,260),o.fillStyle=b.bg,o.fillRect(0,0,420,260),o.strokeStyle=b.stroke,o.lineWidth=5,o.lineCap="round",o.lineJoin="round";let w=(e-u)/1e3,k=(e-d)/1e3,j=r()?1:L(w/.55,0,1);g(100,220,250,220,j),g(150,220,150,40,j),g(150,40,300,40,j),g(300,40,300,70,j);let N=L(m.wrong,0,U.length);for(let e=0;e<N;e+=1){let t=e===N-1,a=r()?1:L((t?k:1)/.25,0,1);o.save(),o.globalAlpha=a,o.setLineDash(r()||!t?[]:[8,10]),U[e](o),o.restore()}if(m.word){let e=A(m),t=e.length||1,a=L(372/t,18,34),r=(420-a*t)/2+a/2;o.font="18px monospace",o.textAlign="center",o.textBaseline="middle";for(let n=0;n<t;n+=1){let t=r+n*a,l=e[n],s="_"!==l;o.fillStyle=s?b.text:b.muted,o.fillText(s?l:"_",t,235)}}f&&"playing"===m.status&&(o.fillStyle=b.overlay,o.fillRect(0,0,420,260),o.fillStyle=b.text,o.font="bold 22px monospace",o.textAlign="center",o.fillText("PAUSED",210,130)),("won"===m.status||"lost"===m.status)&&(o.fillStyle="won"===m.status?"rgba(34,197,94,0.25)":"rgba(239,68,68,0.25)",o.fillRect(0,0,420,260),o.fillStyle="won"===m.status?b.success:b.failure,o.font="bold 22px monospace",o.textAlign="center",o.fillText("won"===m.status?"YOU WIN":"GAME OVER",210,36)),l=requestAnimationFrame(h)};return l=requestAnimationFrame(h),()=>{s=!0,l&&cancelAnimationFrame(l)}})({canvas:e,getSnapshot:()=>eP.current,prefersReducedMotion:()=>f.current})},[]),(0,n.useEffect)(()=>{_.length&&(F&&K[F]||J(_[0]))},[F,K,J,_]);let eU=(0,n.useCallback)(()=>{let e=eR.current;return e.running&&e.startedAt?e.elapsedMs+(Date.now()-e.startedAt):e.elapsedMs},[]),eL=(0,n.useCallback)(()=>{eN(e=>e.running?{startedAt:null,elapsedMs:e.elapsedMs+(Date.now()-(e.startedAt||Date.now())),running:!1}:e)},[]),eO=(0,n.useCallback)(()=>{eN(e=>({...e,startedAt:Date.now(),running:!0}))},[]),eG=(0,n.useCallback)((e,t)=>{var a;let r={casual:140,standard:110,hard:90};return Math.max(0,Math.floor(((null!=(a=r[t])?a:r.standard)-e)*2))},[]);(0,n.useEffect)(()=>{if("won"!==Y.status&&"lost"!==Y.status)return;let e="".concat(Y.category,":").concat(Y.word,":").concat(Y.status);if(p.current!==e){p.current=e;try{let e=eU();eL();let t=Math.max(1,Math.round(e/1e3)),a="won"===Y.status?eG(t,Y.difficulty):0,r=Y.score+a;eA(a),(0,s.logGameEnd)("hangman","won"===Y.status?"win":"lose"),"won"===Y.status?(Q("You won! The phrase was ".concat(Y.word,".")),f.current||D(90)):Q("You lost. The phrase was ".concat(Y.word,".")),ey(e=>{let t={...e||{}},a=t[Y.category]||{plays:0,wins:0};return a.plays+=1,"won"===Y.status&&(a.wins+=1),t[Y.category]=a,t}),"won"===Y.status&&((null===ew||e<ew)&&ek(e),r>ep&&ex(r))}catch(e){(0,s.logGameError)("hangman",(null==e?void 0:e.message)||String(e))}}},[ew,Y,eU,eG,ep,ek,ex,ey,eL]);let eH=(0,n.useCallback)(e=>{if(eg)try{if(!m.current){let e=window.AudioContext||window.webkitAudioContext;if(!e)return;m.current=new e}let t=m.current;if(!t)return;let a=t.createOscillator(),r=t.createGain();a.type="sine",a.frequency.value=e,r.gain.value=.04,a.connect(r),r.connect(t.destination),a.start(),a.stop(t.currentTime+.08)}catch(e){}},[eg]),eD=(0,n.useCallback)(e=>{let t=Math.max(0,Math.floor(e/1e3)),a=Math.floor(t/60);return"".concat(String(a).padStart(2,"0"),":").concat(String(t%60).padStart(2,"0"))},[]),eW=(0,n.useCallback)(function(){let{category:e,word:t,difficulty:a,seed:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var n;let o=e||F,l=a||z,i=null!=(n=null==K?void 0:K[o])?n:[];if(!t&&(!Array.isArray(i)||0===i.length)){et("No words available for this category."),Q("Unable to start: empty dictionary."),$({...E(l),category:o});return}et(""),p.current="",Z(!1),eA(0);let c=null!=r?r:Date.now();er(c);let d=(e=>{let{category:t,word:a,dictionaries:r=g,difficulty:n=b,seed:o}=e,l=k[n]||k.standard,s=j(o),i=r[t]||[],c=a?C(a):"",d=s;if(!c){let[e,a]=w[l.id]||w.standard,r=i.filter(t=>{if("string"!=typeof t)return!1;let r=t.replace(/[^a-z]/g,"").length;return r>=e&&r<=a}),n=r.length?r:i;if(!i.length)return{...E(l.id),category:t};let[o,u]=N(s);c=C(String(n[Math.floor(o*n.length)]||"")),d=u}return{word:c,category:t,guessed:[],wrong:0,maxWrong:l.maxWrong,hintsRemaining:l.hintAllowance,hintCost:l.hintCost,score:0,difficulty:l.id,status:c?"playing":"idle",rngState:d}})({category:o,word:t,dictionaries:K,difficulty:l,seed:c});$(d),Q("New game started."),eN({startedAt:"playing"===d.status?Date.now():null,elapsedMs:0,running:"playing"===d.status}),(0,s.logGameStart)("hangman")}catch(e){et("Unable to start the game."),Q("Unable to start the game."),(0,s.logGameError)("hangman",(null==e?void 0:e.message)||String(e))}},[F,K,z]);(0,n.useEffect)(()=>{try{let e=new URLSearchParams(window.location.search),t=e.get("word"),a=e.get("category")||e.get("dict"),r=e.get("difficulty"),n=e.get("seed");if("string"==typeof a&&K[a]&&J(a),H(r)&&I(r),"string"==typeof t&&t.length)return void eW({word:t,category:a&&K[a]?a:F,difficulty:H(r)?r:void 0});n&&eW({category:a&&K[a]?a:F,difficulty:H(r)?r:void 0,seed:n})}catch(e){}},[]);let ez=(0,n.useCallback)(e=>{if(V)return void Q("Game paused. Press P to resume.");let t=((e,t)=>{if("playing"!==e.status)return{state:e,event:{type:"ignored"}};let a=t.trim().toLowerCase();if(!v.test(a))return{state:e,event:{type:"invalid",reason:"letter"}};if(e.guessed.includes(a))return{state:e,event:{type:"already",letter:a}};let r=e.word.includes(a),n=k[e.difficulty],o=[...e.guessed,a],l=r?e.wrong:e.wrong+1,s=S(e.score+(r?n.score.correct:-n.score.wrong)),i={...e,guessed:o,wrong:l,score:s};return M(i)?{state:i={...i,status:"won",score:S(i.score+n.score.winBonus)},event:{type:"won"}}:P(i)?{state:i={...i,status:"lost"},event:{type:"lost"}}:{state:i,event:{type:r?"correct":"wrong",letter:a}}})(eM.current,e);switch($(t.state),t.event.type){case"already":Q("Already guessed ".concat(t.event.letter.toUpperCase(),"."));break;case"invalid":Q("Only letters A-Z are allowed.");break;case"correct":eH(660),(0,s.logEvent)({category:"hangman",action:"guess",label:e}),Q("Nice! ".concat(e.toUpperCase()," is in the phrase."));break;case"wrong":eH(220),(0,s.logEvent)({category:"hangman",action:"guess",label:e}),Q("No ".concat(e.toUpperCase()," in this phrase."));break;case"won":eH(760);break;case"lost":eH(180)}},[V,eH]),eI=(0,n.useCallback)(()=>{if(V)return void Q("Game paused. Press P to resume.");let e=(e=>{if("playing"!==e.status)return{state:e,event:{type:"ignored"}};if(e.hintsRemaining<=0)return{state:e,event:{type:"no-hints"}};let t=R(e);if(!t.length)return{state:e,event:{type:"ignored"}};let[a,r]=N(e.rngState),n=t[Math.floor(a*t.length)],o=k[e.difficulty],l={...e,guessed:[...e.guessed,n],hintsRemaining:e.hintsRemaining-1,score:S(e.score-o.score.hint),rngState:r};return M(l)?{state:l={...l,status:"won",score:S(l.score+o.score.winBonus)},event:{type:"won"}}:{state:l,event:{type:"hint",letter:n}}})(eM.current);switch($(e.state),e.event.type){case"no-hints":Q("No hints remaining for this round.");break;case"hint":(0,s.logEvent)({category:"hangman",action:"hint",label:e.event.letter}),Q("Hint revealed ".concat(e.event.letter.toUpperCase(),".")),eH(520);break;case"won":eH(760)}},[V,eH]),eq=(0,n.useCallback)(()=>{Z(e=>{let t=!e;return Q(t?"Paused. Press P to resume.":"Resumed."),t?eL():"playing"===eM.current.status&&eO(),t})},[eO,eL]),eB=(0,n.useCallback)(async()=>{if(Y.word)try{if("custom"===F)return void Q("Custom lists require manual sharing. Try sharing an image.");let e=new URL(window.location.href);e.searchParams.delete("word"),e.searchParams.set("category",F),e.searchParams.set("difficulty",Y.difficulty),e.searchParams.set("seed",null!=ea?ea:Date.now());let t=await O(e.toString());Q(t?"Challenge link copied.":"Unable to copy the link.")}catch(e){(0,s.logGameError)("hangman",(null==e?void 0:e.message)||String(e)),Q("Unable to create challenge link.")}},[F,Y.difficulty,Y.word,ea]),eK=(0,n.useCallback)(async()=>{try{let e=u.current;if(!e)return;let t=await new Promise(t=>{e.toBlob(e=>t(e),"image/png")});if(!t)return void Q("Unable to capture image.");if(navigator.clipboard&&window.ClipboardItem){let e=new window.ClipboardItem({"image/png":t});await navigator.clipboard.write([e]),Q("Image copied to clipboard.");return}let a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="hangman-".concat(F,"-").concat(Y.word,".png"),r.click(),URL.revokeObjectURL(a),Q("Image downloaded.")}catch(e){(0,s.logGameError)("hangman",(null==e?void 0:e.message)||String(e)),Q("Unable to share image.")}},[F,Y.word]),e_=(0,n.useCallback)(()=>{let e=(e=>{let t=Array.isArray(e)?e:e.split("\n"),a=[],r=new Set;return t.forEach(e=>{let t=e.trim().toLowerCase().replace(/[^a-z\s-]/g,"").replace(/\s+/g," ").replace(/-+/g,"-").replace(/^-+|-+$/g,"");t&&y.test(t)&&!(t.length<2)&&!(t.length>32)&&(r.has(t)||(r.add(t),a.push(t)))}),{words:a.slice(0,200),total:a.length,truncated:a.length>200}})(ei);if(!e.words.length)return void eu("No valid words found. Use letters, spaces, or hyphens.");B(e.words),ec(e.words.join("\n")),eu("Imported ".concat(e.words.length," word").concat(1===e.words.length?"":"s").concat(e.truncated?" (trimmed to 200 entries).":".")),J("custom"),Q("Custom list imported. Ready to play.")},[ei,B,J]),eF=(0,n.useCallback)(()=>{B([]),ec(""),eu("Custom list cleared."),Q("Custom list cleared.")},[B]),eJ=(0,n.useCallback)(e=>{if(!(0,i.shouldHandleGameKey)(e,{isFocused:c}))return;let t=e.key.toLowerCase();if("p"===t){(0,i.consumeGameKey)(e),eq();return}if("s"===t){(0,i.consumeGameKey)(e),eh(e=>!e);return}if("h"===t){(0,i.consumeGameKey)(e),eI();return}if("r"===t){(0,i.consumeGameKey)(e),eW({category:F});return}eT.includes(t)&&((0,i.consumeGameKey)(e),ez(t))},[F,ez,eI,c,eT,eh,eW,eq]);(0,n.useEffect)(()=>(window.addEventListener("keydown",eJ),()=>window.removeEventListener("keydown",eJ)),[eJ]);let eY=(0,n.useMemo)(()=>{let e=Array.isArray(K[F])?K[F]:[],t={};eT.forEach(e=>{t[e]=0}),e.forEach(e=>{"string"==typeof e&&e.toLowerCase().split("").forEach(e=>{void 0!==t[e]&&(t[e]+=1)})});let a=Math.max(1,...Object.values(t)),r={};return Object.keys(t).forEach(e=>{r[e]=a>0?t[e]/a:0}),r},[F,K,eT]),e$=ev&&"object"==typeof ev?ev[F]:null,eV=(null==e$?void 0:e$.plays)||0,eZ=(null==e$?void 0:e$.wins)||0,eX=eV?Math.round(eZ/eV*100):0,eQ=Y.word?A(Y):"",e0=R(Y).length,e2=Y.maxWrong||(null==(e=k[Y.difficulty])?void 0:e.maxWrong)||6,e1=M(Y),e3=P(Y),e5=eD(eU()+0),e4=ew?eD(ew):"—",e6=e1?Y.score+eE:Y.score,e9="custom"===F,e8=Y.word?"New game":"Start",e7="playing"===Y.status;return(0,r.jsxs)("div",{className:"h-full w-full flex flex-col bg-[var(--kali-bg)] text-[var(--kali-text)]",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 p-2 border-b border-[color:var(--kali-border)] bg-[var(--kali-surface)]",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs uppercase tracking-wide text-[var(--kali-text-muted)]",children:"Category"}),(0,r.jsx)("select",{className:"rounded bg-[var(--kali-overlay)] px-2 py-1 text-sm text-[var(--kali-text)] border border-[color:var(--kali-border)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)]",value:F,onChange:e=>{let t=e.target.value;J(t),eW({category:t})},"aria-label":"Category",children:_.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs uppercase tracking-wide text-[var(--kali-text-muted)]",children:"Difficulty"}),(0,r.jsx)("select",{className:"rounded bg-[var(--kali-overlay)] px-2 py-1 text-sm text-[var(--kali-text)] border border-[color:var(--kali-border)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)]",value:z,onChange:e=>{let t=e.target.value;I(t),Q("Difficulty set to ".concat(t,".")),eW({category:F,difficulty:t})},"aria-label":"Difficulty",children:Object.values(k).map(e=>(0,r.jsx)("option",{value:e.id,children:e.label},e.id))})]}),(0,r.jsx)("button",{className:"rounded bg-[var(--kali-overlay)] px-3 py-1 text-sm hover:bg-[var(--kali-control-overlay)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)] disabled:opacity-50",onClick:()=>eW({category:F}),type:"button","aria-label":e8,disabled:!_.length,children:e8}),(0,r.jsxs)("button",{className:"rounded bg-[var(--kali-overlay)] px-3 py-1 text-sm hover:bg-[var(--kali-control-overlay)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)] disabled:opacity-50",onClick:eI,type:"button",disabled:!Y.word||V||e1||e3||Y.hintsRemaining<=0,"aria-label":"Use hint",title:"Hint (H). Costs ".concat(Y.hintCost," points."),children:["Hint (",Y.hintsRemaining,")"]}),(0,r.jsx)("button",{className:"rounded bg-[var(--kali-overlay)] px-3 py-1 text-sm hover:bg-[var(--kali-control-overlay)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)]",onClick:()=>es(e=>!e),type:"button","aria-expanded":el,"aria-controls":"hangman-options",children:el?"Hide options":"Options"})]}),(0,r.jsxs)("div",{className:"px-2 pb-2 text-xs text-[var(--kali-text-muted)]",children:[(0,r.jsxs)("span",{className:"mr-3",children:["Score: ",(0,r.jsx)("span",{className:"text-[var(--kali-text)]",children:e6})]}),(0,r.jsxs)("span",{className:"mr-3","data-testid":"hangman-timer",children:["Time: ",(0,r.jsx)("span",{className:"text-[var(--kali-text)]",children:e5})]}),(0,r.jsxs)("span",{className:"mr-3",children:["Wrong: ",(0,r.jsxs)("span",{className:"text-[var(--kali-text)]",children:[Y.wrong,"/",e2]})]})]}),el&&(0,r.jsxs)("div",{id:"hangman-options",className:"mx-2 mt-2 rounded border border-[color:var(--kali-border)] bg-[var(--kali-surface)] px-3 py-3 text-xs text-[var(--kali-text-muted)]",children:[(0,r.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-[var(--kali-text-subtle)]",children:"Controls"}),(0,r.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,r.jsx)("button",{className:"rounded bg-[var(--kali-overlay)] px-3 py-1 text-xs hover:bg-[var(--kali-control-overlay)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)] disabled:opacity-50",onClick:eq,type:"button","aria-pressed":V,"aria-label":V?"Resume":"Pause",disabled:!Y.word||e1||e3,children:V?"Resume":"Pause"}),(0,r.jsx)("button",{className:"rounded bg-[var(--kali-overlay)] px-3 py-1 text-xs hover:bg-[var(--kali-control-overlay)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)]",onClick:()=>eh(e=>!e),type:"button","aria-pressed":eg,"aria-label":eg?"Sound on":"Sound off",title:"Toggle sound (S)",children:eg?"Sound: On":"Sound: Off"}),(0,r.jsx)("button",{className:"rounded bg-[var(--kali-overlay)] px-3 py-1 text-xs hover:bg-[var(--kali-control-overlay)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)]",onClick:()=>ef(e=>!e),type:"button","aria-pressed":em,"aria-label":em?"Exclude common letters on":"Exclude common letters off",title:"Exclude common letters from the keyboard",children:em?"Exclude common: On":"Exclude common: Off"}),(0,r.jsx)("button",{className:"rounded bg-[var(--kali-overlay)] px-3 py-1 text-xs hover:bg-[var(--kali-control-overlay)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)] disabled:opacity-50",onClick:eB,type:"button",disabled:!Y.word||e9,"aria-label":"Copy challenge link",children:"Copy link"}),(0,r.jsx)("button",{className:"rounded bg-[var(--kali-overlay)] px-3 py-1 text-xs hover:bg-[var(--kali-control-overlay)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)] disabled:opacity-50",onClick:eK,type:"button",disabled:!Y.word,"aria-label":"Copy game image",children:"Copy image"}),(0,r.jsx)("button",{className:"rounded bg-[var(--kali-overlay)] px-3 py-1 text-xs hover:bg-[var(--kali-control-overlay)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)]",onClick:()=>eo(e=>!e),type:"button","aria-expanded":en,"aria-controls":"hangman-help",children:"Shortcuts"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-[var(--kali-text-subtle)]",children:"Stats"}),(0,r.jsxs)("div",{className:"mt-2 grid gap-1 text-[var(--kali-text)]",children:[(0,r.jsxs)("span",{children:["High score: ",ep]}),(0,r.jsxs)("span",{children:["Hints left: ",Y.hintsRemaining]}),(0,r.jsxs)("span",{children:["Remaining letters: ",e0]}),(0,r.jsxs)("span",{children:["Win rate: ",eX,"% (",eZ,"/",eV,")"]}),(0,r.jsxs)("span",{children:["Best time: ",e4]})]}),eE>0&&(0,r.jsxs)("div",{className:"mt-2 text-[var(--kali-text)]",children:["Time bonus: +",eE]})]})]}),(0,r.jsxs)("div",{className:"mt-3 rounded border border-[color:var(--kali-border)] bg-[var(--kali-overlay)] p-3",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-[var(--kali-text-subtle)]",children:"Custom word list"}),(0,r.jsx)("div",{className:"text-xs text-[var(--kali-text-muted)]",children:"Paste words or short phrases (letters, spaces, hyphens). One per line."})]}),(0,r.jsx)("div",{className:"text-xs text-[var(--kali-text-muted)]",children:q.length?"".concat(q.length," saved"):"No custom list yet"})]}),(0,r.jsx)("textarea",{className:"mt-2 h-24 w-full rounded border border-[color:var(--kali-border)] bg-[var(--kali-bg)] p-2 text-xs text-[var(--kali-text)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)]",placeholder:"e.g. red moon\\nblue-sky\\nstar wars",value:ei,onChange:e=>ec(e.target.value),"aria-label":"Custom word list"}),(0,r.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,r.jsx)("button",{type:"button",className:"rounded bg-[var(--kali-overlay)] px-3 py-1 text-xs hover:bg-[var(--kali-control-overlay)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)]",onClick:e_,children:"Import list"}),(0,r.jsx)("button",{type:"button",className:"rounded bg-[var(--kali-overlay)] px-3 py-1 text-xs hover:bg-[var(--kali-control-overlay)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)]",onClick:eF,disabled:!q.length,children:"Clear list"}),(0,r.jsx)("button",{type:"button",className:"rounded bg-[var(--kali-overlay)] px-3 py-1 text-xs hover:bg-[var(--kali-control-overlay)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)]",onClick:()=>eW({category:"custom"}),disabled:!q.length,children:"Play custom"}),ed&&(0,r.jsx)("span",{className:"text-xs text-[var(--kali-text)]",children:ed})]})]}),en&&(0,r.jsxs)("div",{id:"hangman-help",className:"mt-3 rounded border border-[color:var(--kali-border)] bg-[var(--kali-overlay)] px-3 py-2 text-xs text-[var(--kali-text)]",children:[(0,r.jsx)("div",{className:"font-semibold text-[var(--kali-text)]",children:"Keyboard shortcuts"}),(0,r.jsxs)("div",{className:"mt-1 grid gap-1 sm:grid-cols-2",children:[(0,r.jsx)("span",{children:"A-Z: Guess"}),(0,r.jsx)("span",{children:"H: Hint"}),(0,r.jsx)("span",{children:"R: New game"}),(0,r.jsx)("span",{children:"P: Pause/Resume"}),(0,r.jsx)("span",{children:"S: Sound toggle"})]})]})]}),ee&&(0,r.jsx)("div",{className:"px-2 pb-2 text-sm text-[var(--color-danger)]",role:"alert",children:ee}),(0,r.jsx)("div",{className:"sr-only","aria-live":"polite",role:"status",children:X}),X&&(0,r.jsx)("div",{className:"px-2 pb-2 text-sm text-[var(--kali-text)]","aria-live":"polite",role:"status",children:X}),Y.word?(0,r.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,r.jsx)("div",{className:"flex justify-center px-2",children:(0,r.jsx)("div",{ref:h,className:"w-full max-w-[560px] aspect-[21/13] rounded border border-[color:var(--kali-border)] bg-[var(--kali-bg)]",children:(0,r.jsx)("canvas",{ref:u,className:"h-full w-full rounded",role:"img","aria-label":"Hangman game board"})})}),(0,r.jsx)("div",{className:"mt-3 px-2 flex-1 overflow-auto",children:(0,r.jsxs)("div",{className:"mx-auto max-w-[560px]",children:[(0,r.jsxs)("div",{className:"rounded border border-[color:var(--kali-border)] bg-[var(--kali-surface)] px-3 py-2 text-center",children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-[var(--kali-text-muted)]",children:"Phrase"}),(0,r.jsx)("div",{className:"mt-1 font-mono text-lg tracking-[0.2em] text-[var(--kali-text)]","aria-live":"polite","data-testid":"hangman-phrase",children:eQ||"—"})]}),(0,r.jsx)("div",{className:"mt-3 grid grid-cols-7 gap-1 sm:grid-cols-9",children:eT.map(e=>{var t;let a=Y.guessed.includes(e),n=a&&Y.word.includes(e),o=null!=(t=eY[e])?t:0;return(0,r.jsx)("button",{type:"button",onClick:()=>ez(e),disabled:!Y.word||V||e1||e3||a,"aria-label":"Guess ".concat(e.toUpperCase()).concat(a?" (used)":""),className:"rounded px-2 py-2 text-sm font-mono border border-[color:var(--kali-border)] hover:border-[color:var(--kali-control)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)] disabled:opacity-60",style:{backgroundColor:a?n?"rgba(34,197,94,0.55)":"rgba(239,68,68,0.55)":"rgba(56,189,248,".concat(.12+.35*o,")")},children:e.toUpperCase()},e)})}),(e1||e3)&&(0,r.jsxs)("div",{className:"mt-4 text-center",children:[(0,r.jsx)("div",{className:"text-lg font-mono ".concat(e1?"text-[var(--color-success)]":"text-[var(--color-danger)]"),children:e1?"You won!":"You lost"}),(0,r.jsxs)("div",{className:"mt-1 text-sm text-[var(--kali-text)]",children:["Phrase:"," ",(0,r.jsx)("span",{className:"font-mono text-[var(--kali-text)]",children:Y.word.toUpperCase()})]}),(0,r.jsxs)("div",{className:"mt-1 text-sm text-[var(--kali-text-muted)]",children:["Time: ",e5]}),e1&&(0,r.jsxs)("div",{className:"mt-1 text-sm text-[var(--kali-text-muted)]",children:["Time bonus: +",eE," \xb7 Total score: ",e6]}),(0,r.jsxs)("div",{className:"mt-3 flex items-center justify-center gap-2",children:[(0,r.jsx)("button",{type:"button",className:"rounded bg-[var(--kali-overlay)] px-3 py-1 text-sm hover:bg-[var(--kali-control-overlay)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)]",onClick:()=>eW({category:F}),children:"Play again"}),(0,r.jsx)("button",{type:"button",className:"rounded bg-[var(--kali-overlay)] px-3 py-1 text-sm hover:bg-[var(--kali-control-overlay)] focus:outline-none focus:ring focus:ring-[color:var(--kali-control)]",onClick:eK,children:"Share image"})]})]}),e7&&Y.hintsRemaining>0&&(0,r.jsxs)("div",{className:"mt-3 text-xs text-[var(--kali-text-muted)]",children:["Need help? Hints reveal a random letter and cost ",Y.hintCost," points."]})]})})]}):(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center text-[var(--kali-text)]",children:(0,r.jsxs)("div",{className:"max-w-md text-center px-4",children:[(0,r.jsx)("div",{className:"text-lg font-mono",children:"Hangman"}),(0,r.jsx)("div",{className:"mt-2 text-sm text-[var(--kali-text-muted)]",children:"Pick a category, then click Start. Type letters or tap the keyboard."})]})})]})}}}]);