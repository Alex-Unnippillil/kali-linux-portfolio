"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6069],{66069:(e,r,t)=>{t.r(r),t.d(r,{default:()=>i,displayResourceMonitor:()=>s});var l=t(37876),n=t(14232);let a=()=>{let e=(0,n.useRef)(null),r=(0,n.useRef)(null),a=(0,n.useRef)(null),i=(0,n.useRef)(null),s=(0,n.useRef)(null),c=(0,n.useRef)({cpu:[],mem:[],fps:[],net:[]}),u=(0,n.useRef)({cpu:[],mem:[],fps:[],net:[]}),f=(0,n.useRef)(),m=(0,n.useRef)(0),[d,p]=(0,n.useState)(!1),[h,b]=(0,n.useState)(!1),[g,v]=(0,n.useState)(0),[x,k]=(0,n.useState)(()=>({cpu:"#0f94d2",mem:"#45ff9a",fps:"#38bdf8",net:"#f59e0b",label:"#f8fafc"})),y=(0,n.useRef)([]),w=(0,n.useRef)([]),R=(0,n.useRef)(null);(0,n.useEffect)(()=>()=>cancelAnimationFrame(f.current),[]),(0,n.useEffect)(()=>{if("function"==typeof Worker)return s.current=new Worker(t.tu(new URL(t.p+t.u(7169),t.b))),s.current.onmessage=e=>{let{speed:r}=e.data||{};F("net",r),j()},s.current.postMessage({type:"start"}),()=>{var e;return null==(e=s.current)?void 0:e.terminate()}},[j]),(0,n.useEffect)(()=>{s.current&&s.current.postMessage({type:d?"stop":"start"})},[d]),(0,n.useEffect)(()=>{let e,r=performance.now(),t=performance.now(),l=n=>{let a=n-r;r=n;let o=1e3/a;if(d||v(o),!d&&n-t>=1e3){let e=Math.min(100,Math.max(0,(a-1e3/60)/(1e3/60)*100)),r=0;if(performance&&performance.memory){let{usedJSHeapSize:e,totalJSHeapSize:t}=performance.memory;r=e/t*100}F("cpu",e),F("mem",r),F("fps",o),j(),t=n}e=requestAnimationFrame(l)};return e=requestAnimationFrame(l),()=>cancelAnimationFrame(e)},[d,j]),(0,n.useEffect)(()=>{let e,r=()=>{if(h&&!d){var t;let e=null==(t=R.current)?void 0:t.getBoundingClientRect();y.current.forEach((r,t)=>{r.x+=r.vx,r.y+=r.vy,e&&((r.x<0||r.x>e.width-20)&&(r.vx*=-1),(r.y<0||r.y>e.height-20)&&(r.vy*=-1));let l=w.current[t];l&&(l.style.transform="translate(".concat(r.x,"px, ").concat(r.y,"px)"))})}e=requestAnimationFrame(r)};return e=requestAnimationFrame(r),()=>cancelAnimationFrame(e)},[h,d]),(0,n.useEffect)(()=>{if(h){var e;let r=null==(e=R.current)?void 0:e.getBoundingClientRect(),t=(null==r?void 0:r.width)||300,l=(null==r?void 0:r.height)||200;y.current=Array.from({length:40},()=>({x:Math.random()*t,y:Math.random()*l,vx:(Math.random()-.5)*4,vy:(Math.random()-.5)*4}))}else y.current=[],w.current=[]},[h]);let F=(e,r)=>{let t=c.current[e];t.push(r),t.length>60&&t.shift()},E=(0,n.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.current;o(e.current,t.cpu,x.cpu,x.label,"CPU %",100),o(r.current,t.mem,x.mem,x.label,"Memory %",100),o(a.current,t.fps,x.fps,x.label,"FPS",120),o(i.current,t.net,x.net,x.label,"Mbps",100)},[x]),N=(0,n.useCallback)(()=>{let e={...u.current},r={...c.current},t=performance.now(),l=n=>{let a=Math.min(1,(n-t)/300),o={};["cpu","mem","fps","net"].forEach(t=>{let l=e[t],n=r[t];o[t]=n.map((e,r)=>{var t,n;let o=null!=(n=null!=(t=l[r])?t:l[l.length-1])?n:0;return o+(e-o)*a})}),E(o),a<1?f.current=requestAnimationFrame(l):u.current=r};cancelAnimationFrame(f.current),f.current=requestAnimationFrame(l)},[E]),j=(0,n.useCallback)(()=>{let e=performance.now();e-m.current>=1e3&&(m.current=e,N())},[N]);return(0,n.useEffect)(()=>{let e=getComputedStyle(document.documentElement);k(r=>{var t,l,n,a,o;return{cpu:(null==(t=e.getPropertyValue("--color-accent"))?void 0:t.trim())||r.cpu,mem:(null==(l=e.getPropertyValue("--kali-terminal-green"))?void 0:l.trim())||r.mem,fps:(null==(n=e.getPropertyValue("--color-info"))?void 0:n.trim())||r.fps,net:(null==(a=e.getPropertyValue("--color-warning"))?void 0:a.trim())||r.net,label:(null==(o=e.getPropertyValue("--kali-terminal-text"))?void 0:o.trim())||r.label}})},[]),(0,n.useEffect)(()=>{j()},[j]),(0,l.jsxs)("div",{ref:R,className:"relative h-full w-full flex flex-col bg-[color:var(--kali-panel)] text-white font-ubuntu overflow-hidden",children:[(0,l.jsxs)("div",{className:"p-2 flex gap-2 items-center",children:[(0,l.jsx)("button",{onClick:()=>p(e=>!e),className:"px-3 py-1.5 rounded border border-[color:var(--kali-panel-border)] bg-kali-control text-kali-inverse font-semibold transition-colors hover:bg-kali-control/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-kali-control focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--kali-bg)]",children:d?"Resume":"Pause"}),(0,l.jsx)("button",{onClick:()=>b(e=>!e),className:"px-3 py-1.5 rounded border border-[color:var(--kali-panel-border)] bg-kali-control text-kali-inverse font-semibold transition-colors hover:bg-kali-control/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-kali-control focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--kali-bg)]",children:h?"Stop Stress":"Stress Test"}),(0,l.jsxs)("span",{className:"ml-auto text-sm",children:["FPS: ",g.toFixed(1)]})]}),(0,l.jsxs)("div",{className:"flex flex-1 items-center justify-evenly gap-4 p-4",children:[(0,l.jsx)("canvas",{ref:e,width:300,height:100,role:"img","aria-label":"CPU usage chart",className:"rounded border border-[color:var(--kali-panel-border)] bg-[color:var(--kali-panel-highlight)]"}),(0,l.jsx)("canvas",{ref:r,width:300,height:100,role:"img","aria-label":"Memory usage chart",className:"rounded border border-[color:var(--kali-panel-border)] bg-[color:var(--kali-panel-highlight)]"}),(0,l.jsx)("canvas",{ref:a,width:300,height:100,role:"img","aria-label":"FPS chart",className:"rounded border border-[color:var(--kali-panel-border)] bg-[color:var(--kali-panel-highlight)]"}),(0,l.jsx)("canvas",{ref:i,width:300,height:100,role:"img","aria-label":"Network speed chart",className:"rounded border border-[color:var(--kali-panel-border)] bg-[color:var(--kali-panel-highlight)]"})]}),y.current.map((e,r)=>(0,l.jsx)("div",{ref:e=>{w.current[r]=e},className:"absolute h-6 w-8 rounded-sm border border-[color:color-mix(in_srgb,var(--kali-control)_45%,transparent)] bg-[color:color-mix(in_srgb,var(--kali-control)_24%,transparent)] shadow-[0_0_10px_rgba(15,148,210,0.35)] pointer-events-none"},r))]})};function o(e,r,t,l,n,a){if(!e)return;let o=e.getContext("2d");if(!o)return;let i=e.width,s=e.height;o.clearRect(0,0,i,s),o.strokeStyle=t,o.lineWidth=2,o.beginPath(),r.forEach((e,t)=>{let l=t/(r.length-1||1)*i,n=s-e/a*s;0===t?o.moveTo(l,n):o.lineTo(l,n)}),o.stroke();let c=r[r.length-1]||0;o.fillStyle=l,o.font="12px sans-serif",o.fillText("".concat(n,": ").concat(c.toFixed(1)),4,12)}let i=a,s=(e,r)=>(0,l.jsx)(a,{addFolder:e,openApp:r})}}]);