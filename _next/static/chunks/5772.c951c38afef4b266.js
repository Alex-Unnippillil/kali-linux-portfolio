"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5772],{50603:(e,t,a)=>{a.d(t,{BREAKOUT_COLS:()=>r,BREAKOUT_PRESETS:()=>c,BREAKOUT_ROWS:()=>l,BREAKOUT_STORAGE_PREFIX:()=>n,DEFAULT_LAYOUT:()=>s,normalizeLayout:()=>o});let l=5,r=10,n="breakout-level:",s=Array.from({length:5},(e,t)=>Array.from({length:r},()=>+(t<3)));function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,n=Array.from({length:t},()=>Array(a).fill(0));if(!Array.isArray(e))return n;for(let l=0;l<t;l+=1){let t=Array.isArray(e[l])?e[l]:[];for(let e=0;e<a;e+=1){var s;let a=Number(null!=(s=t[e])?s:0);n[l][e]=1===a||2===a||3===a?a:0}}return n}let c=[{id:"classic",name:"Classic Wall",layout:s},{id:"powerups",name:"Power Ups",layout:o([[1,1,1,1,1,1,1,1,1,1],[1,0,2,0,1,1,0,3,0,1],[1,1,1,1,0,0,1,1,1,1],[0,3,0,1,2,2,1,0,3,0],[0,0,0,0,0,0,0,0,0,0]])},{id:"zigzag",name:"Zigzag",layout:o([[1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1],[1,0,2,0,1,0,3,0,1,0],[0,1,0,1,0,1,0,1,0,1],[0,0,0,0,0,0,0,0,0,0]])},{id:"hollow",name:"Hollow Box",layout:o([[1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,1],[1,0,2,0,3,3,0,2,0,1],[1,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1]])},{id:"targets",name:"Targets",layout:o([[0,0,1,0,0,0,0,1,0,0],[0,1,0,1,0,0,1,0,1,0],[1,0,2,0,1,1,0,3,0,1],[0,1,0,1,0,0,1,0,1,0],[0,0,1,0,0,0,0,1,0,0]])},{id:"bridge",name:"Bridge",layout:o([[1,1,1,0,0,0,1,1,1,1],[1,0,0,0,2,2,0,0,0,1],[1,0,3,0,1,1,0,3,0,1],[1,0,0,0,2,2,0,0,0,1],[1,1,1,0,0,0,1,1,1,1]])},{id:"diamond",name:"Diamond",layout:o([[0,0,0,1,1,1,0,0,0,0],[0,0,1,2,1,1,3,0,0,0],[0,1,1,1,0,1,1,1,0,0],[0,0,1,3,1,1,2,0,0,0],[0,0,0,1,1,1,0,0,0,0]])},{id:"split",name:"Split Lanes",layout:o([[1,1,1,0,0,0,1,1,1,1],[1,2,1,0,0,0,1,3,1,1],[1,1,1,0,0,0,1,1,1,1],[0,0,0,0,2,2,0,0,0,0],[0,0,0,0,3,3,0,0,0,0]])},{id:"checker",name:"Checkerboard",layout:o([[1,0,1,0,1,0,1,0,1,0],[0,2,0,2,0,2,0,3,0,3],[1,0,1,0,1,0,1,0,1,0],[0,3,0,2,0,3,0,2,0,3],[1,0,1,0,1,0,1,0,1,0]])}]},65772:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var l=a(37876),r=a(14232),n=a(50603);let s=[{type:0,label:"Eraser",key:"1"},{type:1,label:"Normal brick",key:"2"},{type:2,label:"Multi-ball brick",key:"3"},{type:3,label:"Magnet brick",key:"4"}];function o(){let{onLoad:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,a]=(0,r.useState)(()=>(0,n.normalizeLayout)(n.DEFAULT_LAYOUT)),[o,c]=(0,r.useState)(1),[i,d]=(0,r.useState)("level1"),[u,p]=(0,r.useState)([]),[b,g]=(0,r.useState)(""),[y,m]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),v=(0,r.useRef)(!1),w=(0,r.useCallback)(()=>{try{p((()=>{let e=[];for(let t=0;t<localStorage.length;t+=1){let a=localStorage.key(t);a&&a.startsWith(n.BREAKOUT_STORAGE_PREFIX)&&e.push(a.slice(n.BREAKOUT_STORAGE_PREFIX.length))}return e.sort()})())}catch(e){p([])}},[]);(0,r.useEffect)(()=>{w()},[w]),(0,r.useEffect)(()=>{let e=()=>{v.current=!1};return window.addEventListener("pointerup",e),window.addEventListener("pointercancel",e),()=>{window.removeEventListener("pointerup",e),window.removeEventListener("pointercancel",e)}},[]),(0,r.useEffect)(()=>{let e=e=>{if(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)return;let t=s.find(t=>t.key===e.key);t&&(e.preventDefault(),c(t.type))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let k=(0,r.useCallback)((e,t,l)=>{a(a=>{let r=a.map(e=>e.slice());return r[e][t]=l,r})},[]),f=(0,r.useCallback)((e,t)=>{k(e,t,o)},[o,k]),E=(0,r.useCallback)((e,t)=>{v.current=!0,f(e,t)},[f]),N=(0,r.useCallback)((e,t)=>{v.current&&f(e,t)},[f]),S=(0,r.useCallback)((e,t,a)=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),f(t,a))},[f]),C=(0,r.useCallback)(()=>{try{localStorage.setItem("".concat(n.BREAKOUT_STORAGE_PREFIX).concat(i),JSON.stringify(t))}catch(e){}w(),g(i)},[t,i,w]),O=(0,r.useCallback)(e=>{if(e)try{let t=localStorage.getItem("".concat(n.BREAKOUT_STORAGE_PREFIX).concat(e));if(!t)return;let l=JSON.parse(t);a((0,n.normalizeLayout)(l)),d(e)}catch(e){}},[]),A=(0,r.useCallback)(e=>{if(e&&window.confirm('Delete "'.concat(e,'"?'))){try{localStorage.removeItem("".concat(n.BREAKOUT_STORAGE_PREFIX).concat(e))}catch(e){}w(),b===e&&g("")}},[w,b]),R=(0,r.useCallback)(()=>{a(Array.from({length:n.BREAKOUT_ROWS},()=>Array(n.BREAKOUT_COLS).fill(0)))},[]),j=(0,r.useCallback)(()=>{null==e||e(t,i)},[t,i,e]),T=(0,r.useCallback)(()=>{let e=JSON.stringify(t,null,2);h(e),navigator.clipboard&&navigator.clipboard.writeText(e).catch(()=>{})},[t]),L=(0,r.useCallback)(()=>{try{let e=btoa(JSON.stringify(t)),a="".concat(window.location.origin).concat(window.location.pathname,"?level=").concat(e);h(a),navigator.clipboard&&navigator.clipboard.writeText(a).catch(()=>{})}catch(e){}},[t]),_=(0,r.useCallback)(()=>{if(y.trim())try{let e=y.trim();e.includes("level=")&&(e=new URL(e,window.location.origin).searchParams.get("level")||e);let t=e.startsWith("[")?JSON.parse(e):JSON.parse(atob(e)),l=(0,n.normalizeLayout)(t);a(l)}catch(e){}},[y]),U=(0,r.useMemo)(()=>u.map(e=>(0,l.jsx)("option",{value:e,children:e},e)),[u]);return(0,l.jsxs)("div",{className:"text-white space-y-3",children:[(0,l.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Brush (1-4)"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>(0,l.jsxs)("button",{type:"button","aria-label":"".concat(e.label," (").concat(e.key,")"),onClick:()=>c(e.type),className:"flex items-center gap-2 rounded px-2 py-1 text-xs ".concat(o===e.type?"ring-2 ring-amber-400":"ring-1 ring-slate-600"),children:[(0,l.jsx)("span",{className:"inline-block h-3 w-3 rounded ".concat(0===e.type?"bg-slate-900":1===e.type?"bg-blue-500":2===e.type?"bg-emerald-400":"bg-rose-500")}),e.label]},e.type))}),(0,l.jsx)("div",{className:"text-xs text-slate-400",children:"Legend: blue = normal, green = multi-ball, red = magnet."}),(0,l.jsx)("div",{className:"grid gap-1 select-none",style:{gridTemplateColumns:"repeat(".concat(n.BREAKOUT_COLS,", 20px)")},role:"grid","aria-label":"Breakout level editor grid",children:t.map((e,t)=>e.map((e,a)=>{var r;return(0,l.jsx)("button",{type:"button",onPointerDown:()=>E(t,a),onPointerEnter:()=>N(t,a),onKeyDown:e=>S(e,t,a),className:(r=o===e,"".concat(0===e?"bg-slate-900":1===e?"bg-blue-500":2===e?"bg-emerald-400":"bg-rose-500"," ").concat(r?"ring-2 ring-amber-400":"ring-1 ring-slate-700/80")),style:{width:20,height:12},"aria-label":"Cell ".concat(t+1,"-").concat(a+1)},"".concat(t,"-").concat(a))}))}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Level name"}),(0,l.jsx)("input",{className:"w-full rounded border border-slate-700 bg-slate-900 px-2 py-1 text-sm text-white",value:i,onChange:e=>d(e.target.value),"aria-label":"Level name"})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,l.jsx)("button",{type:"button",onClick:C,className:"px-2 py-1 rounded bg-slate-700 hover:bg-slate-600",children:"Save"}),(0,l.jsx)("button",{type:"button",onClick:R,className:"px-2 py-1 rounded bg-slate-700 hover:bg-slate-600",children:"Clear"}),(0,l.jsx)("button",{type:"button",onClick:j,className:"px-2 py-1 rounded bg-emerald-600 hover:bg-emerald-500",children:"Play"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Saved layouts"}),(0,l.jsxs)("select",{className:"w-full rounded border border-slate-700 bg-slate-900 px-2 py-1 text-sm text-white",value:b,onChange:e=>{g(e.target.value),O(e.target.value)},"aria-label":"Saved layouts",children:[(0,l.jsx)("option",{value:"",children:"Select a saved layout"}),U]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,l.jsx)("button",{type:"button",onClick:()=>O(b),className:"px-2 py-1 rounded bg-slate-700 hover:bg-slate-600",children:"Load"}),(0,l.jsx)("button",{type:"button",onClick:()=>A(b),className:"px-2 py-1 rounded bg-rose-600 hover:bg-rose-500",children:"Delete"})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Import JSON or URL"}),(0,l.jsx)("textarea",{className:"w-full rounded border border-slate-700 bg-slate-900 px-2 py-1 text-xs text-white",rows:3,value:y,onChange:e=>m(e.target.value),placeholder:"Paste JSON or share URL","aria-label":"Import layout"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,l.jsx)("button",{type:"button",onClick:_,className:"px-2 py-1 rounded bg-slate-700 hover:bg-slate-600",children:"Import"}),(0,l.jsx)("button",{type:"button",onClick:T,className:"px-2 py-1 rounded bg-slate-700 hover:bg-slate-600",children:"Export JSON"}),(0,l.jsx)("button",{type:"button",onClick:L,className:"px-2 py-1 rounded bg-slate-700 hover:bg-slate-600",children:"Copy share URL"})]}),x?(0,l.jsx)("input",{className:"w-full rounded border border-slate-700 bg-slate-900 px-2 py-1 text-xs text-white",readOnly:!0,value:x,"aria-label":"Exported layout"}):null]})]})}}}]);