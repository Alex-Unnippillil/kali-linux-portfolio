(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1048,4424],{33840:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var l=r(14232);function n(e,t){let[r,n]=(0,l.useState)(()=>{try{let r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(e){return t}});return(0,l.useEffect)(()=>{try{window.localStorage.setItem(e,JSON.stringify(r))}catch(e){}},[e,r]),[r,n]}},51048:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var l=r(37876),n=r(14232),a=r(70994),c=r(33840);let s=()=>{let e=Array(8).fill(null).map(()=>Array(8).fill(null));for(let t=0;t<3;t++)for(let r=0;r<8;r++)(t+r)%2==1&&(e[t][r]={color:"black",king:!1});for(let t=5;t<8;t++)for(let r=0;r<8;r++)(t+r)%2==1&&(e[t][r]={color:"red",king:!1});return e},o={red:[[-1,-1],[-1,1]],black:[[1,-1],[1,1]]},u=(e,t)=>e>=0&&e<8&&t>=0&&t<8,i=e=>e.map(e=>e.map(e=>e?{...e}:null)),f=function(e,t,r){let l=!(arguments.length>3)||void 0===arguments[3]||arguments[3],n=e[t][r];if(!n)return[];let a=[...o[n.color]];n.king&&a.push(...o["red"===n.color?"black":"red"]);let c=[],s=[];for(let[l,o]of a){let a=t+l,i=r+o;if(!u(a,i))continue;let f=e[a][i];if(f){if(f.color!==n.color){let n=t+2*l,c=r+2*o;u(n,c)&&!e[n][c]&&s.push({from:[t,r],to:[n,c],captured:[a,i]})}}else c.push({from:[t,r],to:[a,i]})}return l&&s.length?s:[...s,...c]},d=function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],l=[];for(let a=0;a<8;a++)for(let c=0;c<8;c++){var n;if((null==(n=e[a][c])?void 0:n.color)===t){let t=f(e,a,c,r);t.length&&(l=l.concat(t))}}let a=l.some(e=>e.captured);return r&&a?l.filter(e=>e.captured):l},h=function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return d(e,t,r).length>0},g=(e,t)=>{let r=i(e),l=r[t.from[0]][t.from[1]];r[t.from[0]][t.from[1]]=null,r[t.to[0]][t.to[1]]=l;let n=!1;if(t.captured){let[e,l]=t.captured;r[e][l]=null,n=!0}let a=!1;return l.king||("red"!==l.color||0!==t.to[0])&&("black"!==l.color||7!==t.to[0])||(l.king=!0,a=!0),{board:r,capture:n,king:a}},m=e=>{let t=0;for(;e;)e&=e-1n,t++;return t},p=new Map,x=function(e,t,r,l){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1/0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,c=e.map(e=>e.map(e=>e?"".concat(e.color[0]).concat(e.king?"k":"m"):".").join("")).join("")+"".concat(t).concat(r);if(p.has(c))return p.get(c);if(0===r||!h(e,t,l)){let t={score:(e=>{let{red:t,black:r,kings:l}=(e=>{let t=0n,r=0n,l=0n;for(let n=0;n<8;n++)for(let a=0;a<8;a++){let c=e[n][a];if(!c)continue;let s=1n<<BigInt((7-n)*8+a);"red"===c.color?t|=s:r|=s,c.king&&(l|=s)}return{red:t,black:r,kings:l}})(e),n=t&l,a=r&l,c=m(t)-m(n),s=m(r)-m(a),o=d(e,"red").length-d(e,"black").length;return c-s+1.5*(m(n)-m(a))+.1*o})(e)};return p.set(c,t),t}let s=d(e,t,l),o=null;if("red"===t){let t=-1/0;for(let c of s){let{board:s}=g(e,c),{score:u}=x(s,"black",r-1,l,n,a);if(u>t&&(t=u,o=c),a<=(n=Math.max(n,t)))break}let u={score:t,move:o};return p.set(c,u),u}let u=1/0;for(let t of s){let{board:c}=g(e,t),{score:s}=x(c,"red",r-1,l,n,a);if(s<u&&(u=s,o=t),(a=Math.min(a,u))<=n)break}let i={score:u,move:o};return p.set(c,i),i},b=()=>{let e=(0,n.useRef)(null),[t,r]=(0,n.useState)(()=>s()),a=(0,n.useRef)(t);(0,n.useEffect)(()=>{a.current=t},[t]);let[o,u]=(0,n.useState)("red"),m=(0,n.useRef)(o);(0,n.useEffect)(()=>{m.current=o},[o]);let[b,y]=(0,n.useState)(null),k=(0,n.useRef)(b);(0,n.useEffect)(()=>{k.current=b},[b]);let[v,j]=(0,n.useState)([]),S=(0,n.useRef)(v);(0,n.useEffect)(()=>{S.current=v},[v]);let[w,N]=(0,n.useState)([]),C=(0,n.useRef)(w);(0,n.useEffect)(()=>{C.current=w},[w]);let[R,E]=(0,n.useState)([]),M=(0,n.useRef)(R);(0,n.useEffect)(()=>{M.current=R},[R]);let[A,I]=(0,n.useState)(!1),[O,q]=(0,n.useState)(!0),[T,B]=(0,n.useState)("hard"),[J,P]=(0,n.useState)({player:0,ai:0}),[W,_]=(0,n.useState)(null),[F,H]=(0,c.default)("checkersRequireCapture",!0),Y=d(t,o,F).filter(e=>e.captured).length,D=Math.max(0,40-w.length),K={red:Math.max(0,12-t.reduce((e,t)=>e+t.filter(e=>e&&"red"===e.color).length,0)),black:Math.max(0,12-t.reduce((e,t)=>e+t.filter(e=>e&&"black"===e.color).length,0))};(0,n.useEffect)(()=>{let e=localStorage.getItem("checkersWins");if(e)try{P(JSON.parse(e))}catch(e){}},[]),(0,n.useEffect)(()=>{localStorage.setItem("checkersWins",JSON.stringify(J))},[J]);let U=(0,n.useCallback)(()=>{if(O)try{let e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator();t.type="square",t.frequency.value=500,t.connect(e.destination),t.start(),t.stop(e.currentTime+.1)}catch(e){}},[O]),X=(0,n.useCallback)(e=>{for(let t=0;t<8;t++)for(let r=0;r<8;r++)e.fillStyle=(t+r)%2==0?"#eee":"#555",e.fillRect(50*r,50*t,50,50);let t=k.current;if(t)for(let r of(e.strokeStyle="yellow",e.lineWidth=3,e.strokeRect(50*t[1]+2,50*t[0]+2,46,46),S.current))e.strokeStyle="lime",e.strokeRect(50*r.to[1]+6,50*r.to[0]+6,38,38);if(M.current.length)for(let t of(e.strokeStyle="cyan",M.current))e.strokeRect(50*t.from[1]+10,50*t.from[0]+10,30,30),e.strokeRect(50*t.to[1]+10,50*t.to[0]+10,30,30);a.current.forEach((t,r)=>{t.forEach((t,l)=>{t&&(e.beginPath(),e.fillStyle="red"===t.color?"#e74c3c":"#111",e.arc(50*l+25,50*r+25,20,0,2*Math.PI),e.fill(),t.king&&(e.fillStyle="gold",e.font="20px sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillText("K",50*l+25,50*r+25)))})}),W?(e.fillStyle="rgba(0,0,0,0.6)",e.fillRect(0,0,400,400),e.fillStyle="white",e.font="32px sans-serif",e.textAlign="center",e.fillText("".concat(W," wins"),200,200)):A&&(e.fillStyle="rgba(0,0,0,0.6)",e.fillRect(0,0,400,400),e.fillStyle="white",e.font="32px sans-serif",e.textAlign="center",e.fillText("Paused",200,200))},[A,W]);(0,n.useEffect)(()=>{let t,r=e.current.getContext("2d"),l=()=>{X(r),t=requestAnimationFrame(l)};return l(),()=>cancelAnimationFrame(t)},[X]);let z=(0,n.useCallback)(e=>{N(e=>[...e,{board:i(a.current),turn:m.current}]);let{board:t,capture:l}=g(a.current,e);r(t),a.current=t,E([]),U();let n="red"===m.current?"black":"red";if(l){let r=f(t,e.to[0],e.to[1]).filter(e=>e.captured);if(r.length){y([e.to[0],e.to[1]]),j(r);return}}u(n),y(null),j([]),h(t,n,F)||(_(m.current),"red"===m.current?P(e=>({...e,player:e.player+1})):P(e=>({...e,ai:e.ai+1})))},[U,F]),G=(0,n.useCallback)(()=>{let e;if("easy"===T){let t=d(a.current,"black",F);e=t[Math.floor(Math.random()*t.length)]}else"medium"===T?(p.clear(),{move:e}=x(a.current,"black",2,F)):(p.clear(),{move:e}=x(a.current,"black",3,F));e?z(e):(_("red"),P(e=>({...e,player:e.player+1})))},[z,T,F]);return(0,n.useEffect)(()=>{if("black"===o&&!W&&!A){let e=setTimeout(G,400);return()=>clearTimeout(e)}},[o,W,A,G]),(0,l.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center bg-ub-cool-grey text-white p-4",children:[(0,l.jsxs)("div",{className:"mb-4 w-full max-w-lg rounded border border-gray-700 bg-gray-900/50 p-3 text-sm",children:[(0,l.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-300",children:"Match briefing"}),(0,l.jsx)("p",{className:"mt-2",children:"It's ".concat("red"===o?"Red's":"Black's"," move.")}),(0,l.jsx)("p",{className:"mt-2 text-gray-300",children:"Tap the Hint button to highlight a recommended capture sequence."}),F&&(0,l.jsx)("p",{className:"mt-2 text-gray-300",children:"Forced capture is active."}),(0,l.jsxs)("div",{className:"mt-3 flex flex-wrap gap-4 text-gray-300",children:[(0,l.jsxs)("span",{children:["Captures available: ",Y]}),(0,l.jsxs)("span",{children:["Moves to draw: ",D]}),(0,l.jsxs)("span",{children:["Captured pieces: R ",K.red," | B ",K.black]})]})]}),(0,l.jsxs)("div",{className:"w-56 mb-4",children:[(0,l.jsx)("input",{type:"range",min:"0",max:"2","aria-label":"Difficulty",value:["easy","medium","hard"].indexOf(T),onChange:e=>B(["easy","medium","hard"][parseInt(e.target.value,10)]),className:"w-full"}),(0,l.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,l.jsx)("span",{children:"Easy"}),(0,l.jsx)("span",{children:"Medium"}),(0,l.jsx)("span",{children:"Hard"})]})]}),(0,l.jsx)("canvas",{ref:e,width:400,height:400,onClick:t=>{if(A||W||"red"!==o)return;let r=e.current.getBoundingClientRect(),l=t.clientX-r.left,n=Math.floor((t.clientY-r.top)/50),c=Math.floor(l/50);E([]);let s=k.current,u=a.current[n][c];if(s){let e=S.current.find(e=>e.to[0]===n&&e.to[1]===c);if(e)return void z(e)}if(u&&"red"===u.color){let e=d(a.current,"red",!1),t=f(a.current,n,c,!1),r=F&&e.some(e=>e.captured)?t.filter(e=>e.captured):t;y([n,c]),j(r)}else y(null),j([])},role:"img","aria-label":"Checkers board",className:"mb-2"}),(0,l.jsxs)("label",{className:"mb-2 text-sm",children:[(0,l.jsx)("input",{type:"checkbox","aria-label":"Require capture",checked:F,onChange:e=>H(e.target.checked),className:"mr-1"}),"Require capture"]}),(0,l.jsxs)("div",{className:"space-x-2 mb-2",children:[(0,l.jsx)("button",{className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded",onClick:()=>{let e=s();r(e),a.current=e,u("red"),y(null),j([]),_(null),N([]),C.current=[],E([])},children:"Reset"}),(0,l.jsx)("button",{className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded",onClick:()=>{if(!C.current.length)return;let{board:e,turn:t}=C.current[C.current.length-1];N(C.current.slice(0,-1)),a.current=e,r(e),u(t),y(null),j([]),_(null),E([])},children:"Undo"}),(0,l.jsx)("button",{className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded",onClick:()=>I(e=>!e),children:A?"Resume":"Pause"}),(0,l.jsx)("button",{className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded",onClick:()=>q(e=>!e),children:O?"Sound On":"Sound Off"}),(0,l.jsx)("button",{className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded",onClick:()=>{"red"!==m.current||W||E(d(a.current,"red",F))},children:"Hint"})]}),(0,l.jsxs)("div",{className:"text-sm",children:["Wins: You ",J.player," - AI ",J.ai]})]})};function y(){return(0,l.jsx)(a.default,{gameId:"checkers",children:(0,l.jsx)(b,{})})}},54424:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var l=r(51048);r(56814);let n=l.default},56814:()=>{}}]);