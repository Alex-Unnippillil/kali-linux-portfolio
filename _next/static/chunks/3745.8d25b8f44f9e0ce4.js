"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3745],{23745:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i,displaySerialTerminal:()=>c});var r=a(37876),l=a(14232),s=a(75758);let n=()=>{let e="undefined"!=typeof navigator&&"serial"in navigator,[t,a]=(0,l.useState)(null),[n,i]=(0,l.useState)(""),[c,o]=(0,l.useState)(""),d=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(!e)return;let r=e=>{e.target===t&&(o("Device disconnected."),a(null))},l=navigator;return l.serial.addEventListener("disconnect",r),()=>{l.serial.removeEventListener("disconnect",r)}},[e,t]);let u=async e=>{var t;let a=new TextDecoderStream,r=null==(t=e.readable)?void 0:t.pipeTo(a.writable),l=a.readable.getReader();d.current=l;try{for(;;){let{value:e,done:t}=await l.read();if(t)break;e&&i(t=>t+e)}}catch(e){}finally{l.releaseLock(),await (null==r?void 0:r.catch(()=>{}))}},p=async()=>{if(e){o("");try{let e=await navigator.serial.requestPort();await e.open({baudRate:9600}),a(e),u(e)}catch(e){"NotAllowedError"===e.name?o("Permission to access serial port was denied."):"NotFoundError"===e.name?o("No port selected."):o(e.message||"Failed to open serial port.")}}},m=async()=>{try{var e;await (null==(e=d.current)?void 0:e.cancel()),await (null==t?void 0:t.close())}catch(e){}finally{a(null)}};return(0,r.jsxs)("div",{className:"relative h-full w-full bg-black p-4 text-green-400 font-mono",children:[(0,r.jsx)("div",{className:"mb-4 flex gap-2",children:t?(0,r.jsx)("button",{onClick:m,className:"rounded bg-red-700 px-2 py-1 text-white",children:"Disconnect"}):(0,r.jsx)("button",{onClick:p,disabled:!e,className:"rounded bg-gray-700 px-2 py-1 text-white disabled:opacity-50",children:"Connect"})}),!e&&(0,r.jsx)("p",{className:"mb-2 text-sm text-yellow-400",children:"Web Serial API not supported in this browser."}),c&&(0,r.jsx)(s.default,{className:"mb-2 mt-0",children:c}),(0,r.jsx)("pre",{className:"h-[calc(100%-4rem)] overflow-auto whitespace-pre-wrap break-words",children:n||"No data"})]})},i=n,c=()=>(0,r.jsx)(n,{})},75758:(e,t,a)=>{a.d(t,{default:()=>l});var r=a(37876);a(14232);let l=e=>{let{id:t,className:a="",role:l="status",ariaLive:s,children:n}=e;return(0,r.jsx)("p",{id:t,role:l,"aria-live":null!=s?s:"alert"===l?"assertive":"polite",className:"text-red-600 text-sm mt-2 ".concat(a).trim(),children:n})}}}]);