(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5855],{6842:e=>{e.exports={container:"youtube_container__NxJNQ",header:"youtube_header__rXjic",headerTop:"youtube_headerTop__43_OO",brand:"youtube_brand__SBQOw",avatar:"youtube_avatar__5jEc1",avatarPlaceholder:"youtube_avatarPlaceholder___3OXa",title:"youtube_title__x4EoA",kicker:"youtube_kicker__01MNi",subtle:"youtube_subtle__ArZrl",actions:"youtube_actions__iu1Oh",button:"youtube_button__mBfm_",ghostButton:"youtube_ghostButton__CEEoQ",smallButton:"youtube_smallButton__eWVFO",filterRow:"youtube_filterRow___WLB_",searchGroup:"youtube_searchGroup__HZAwI",input:"youtube_input__IpZxv",miniStat:"youtube_miniStat__8S92T",hint:"youtube_hint__T_EmT",code:"youtube_code__fdtlQ",banner:"youtube_banner__GqDQe",error:"youtube_error__XmBJX",layout:"youtube_layout__KWgF9",sidebar:"youtube_sidebar__DPU7a",panel:"youtube_panel__PDtkc",panelHeader:"youtube_panelHeader__cTcik",sectionTitle:"youtube_sectionTitle__Mabl7",heading:"youtube_heading__QXahg",subHeading:"youtube_subHeading__BgaHT",pill:"youtube_pill__BomZf",playlistGroups:"youtube_playlistGroups__eiYy6",playlistGroup:"youtube_playlistGroup__KmAqy",groupHeader:"youtube_groupHeader__P5Vs0",groupTitle:"youtube_groupTitle__OOi9Y",groupCount:"youtube_groupCount__7XRqj",playlistList:"youtube_playlistList__p9qmK",playlistButton:"youtube_playlistButton__WPQAN",playlistButtonActive:"youtube_playlistButtonActive__zvwER",playlistThumb:"youtube_playlistThumb__hkm1t",thumbPlaceholder:"youtube_thumbPlaceholder__dP50x",playlistMeta:"youtube_playlistMeta__pduE8",playlistTitle:"youtube_playlistTitle__z_CjK",videoName:"youtube_videoName__TjnEh",videoTitle:"youtube_videoTitle__gzEUg",metaText:"youtube_metaText__LIfpD",placeholderCard:"youtube_placeholderCard__I00Xn",placeholderText:"youtube_placeholderText__4Zv3c",contentArea:"youtube_contentArea__66_N6",contentGrid:"youtube_contentGrid__Hi6ua",playerPanel:"youtube_playerPanel__w_V_O",playerShell:"youtube_playerShell__blfYv",embedContainer:"youtube_embedContainer__DkHM_",embedFrame:"youtube_embedFrame__uEKJO",playerPlaceholder:"youtube_playerPlaceholder__nBcz0",videoDetails:"youtube_videoDetails__WgzRD",videoList:"youtube_videoList__EJYO1",videoButton:"youtube_videoButton__Gg_0D",videoButtonActive:"youtube_videoButtonActive__gtGr4",videoThumb:"youtube_videoThumb__zrezc",videoMeta:"youtube_videoMeta__iA3ei",fullWidth:"youtube_fullWidth__4EiSQ",loading:"youtube_loading__1cV_Q",descriptionText:"youtube_descriptionText__UflpS",descriptionToggle:"youtube_descriptionToggle__wP_Dn"}},35855:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>T,filterDirectoryBySearch:()=>w});var i=t(37876),a=t(14232),n=t(68327),s=t(74273);let o=/^UC[a-zA-Z0-9_-]{10,128}$/;function r(e){let l=e.trim();if(!l)return null;if(o.test(l))return l;try{let e=new URL(l).pathname.split("/").filter(Boolean),t=e.findIndex(e=>"channel"===e),i=t>=0?e[t+1]:null;if(i&&o.test(i))return i}catch(e){}let t=l.match(/UC[a-zA-Z0-9_-]{10,128}/);return(null==t?void 0:t[0])&&o.test(t[0])?t[0]:null}function u(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t="string"==typeof e?Number.parseInt(e,10):Number(e);return Number.isFinite(t)?t:l}async function c(e,l,t,i){let a=new URL("".concat("https://www.googleapis.com/youtube/v3","/").concat(e));a.searchParams.set("key",t),Object.entries(l).forEach(e=>{let[l,t]=e;null!=t&&"".concat(t).length&&a.searchParams.set(l,"".concat(t))});let n=await fetch(a.toString(),{signal:i}),s=await n.json();if(!n.ok){var o;throw Error((null==(o=s.error)?void 0:o.message)||"YouTube API request failed: ".concat(e))}return s}async function d(e,l,t){var i,a,n,s,o,r,u,d,p,m,h,b;let v=null==(i=(await c("channels",{part:"snippet",id:e,maxResults:"1"},l,t)).items)?void 0:i[0];if(!(null==v?void 0:v.id))return null;let y=(null==(s=v.snippet)||null==(n=s.thumbnails)||null==(a=n.high)?void 0:a.url)||(null==(u=v.snippet)||null==(r=u.thumbnails)||null==(o=r.medium)?void 0:o.url)||(null==(m=v.snippet)||null==(p=m.thumbnails)||null==(d=p.default)?void 0:d.url)||"";return{id:v.id,title:(null==(b=v.snippet)||null==(h=b.title)?void 0:h.trim())||"YouTube channel",thumbnail:y}}async function p(e,l,t){var i;return(null!=(i=(await c("channelSections",{part:"snippet,contentDetails",channelId:e,maxResults:"50"},l,t)).items)?i:[]).map(e=>{var l,t,i,a,n;let s=(null!=(a=null==(l=e.contentDetails)?void 0:l.playlists)?a:[]).filter(Boolean);return{id:null!=(n=e.id)?n:"",title:(null==(i=e.snippet)||null==(t=i.title)?void 0:t.trim())||"Untitled section",playlistIds:s}}).filter(e=>!!e.id&&e.playlistIds.length>0)}async function m(e,l,t){let i=Array.from(new Set(e.map(e=>e.trim()).filter(Boolean)));if(!i.length)return[];let a=function(e,l){let t=[];for(let l=0;l<e.length;l+=50)t.push(e.slice(l,l+50));return t}(i,50),n=[];for(let e of a){var s,o,r,d,p,m,h,b,v,y,_,f,x,g,w,N,j,T,k,C,S,P,E,I,A,B;for(let i of null!=(s=(await c("playlists",{part:"snippet,contentDetails,status",id:e.join(","),maxResults:"50"},l,t)).items)?s:[]){let e=null!=(E=i.id)?E:"";if(!e)continue;let l=(null==(d=i.snippet)||null==(r=d.thumbnails)||null==(o=r.maxres)?void 0:o.url)||(null==(h=i.snippet)||null==(m=h.thumbnails)||null==(p=m.standard)?void 0:p.url)||(null==(y=i.snippet)||null==(v=y.thumbnails)||null==(b=v.high)?void 0:b.url)||(null==(x=i.snippet)||null==(f=x.thumbnails)||null==(_=f.medium)?void 0:_.url)||(null==(N=i.snippet)||null==(w=N.thumbnails)||null==(g=w.default)?void 0:g.url)||"";n.push({id:e,title:(null==(T=i.snippet)||null==(j=T.title)?void 0:j.trim())||"Untitled playlist",description:null!=(I=null==(k=i.snippet)?void 0:k.description)?I:"",thumbnail:l,itemCount:u(null==(C=i.contentDetails)?void 0:C.itemCount,0),publishedAt:null!=(A=null==(S=i.snippet)?void 0:S.publishedAt)?A:new Date().toISOString(),privacyStatus:null!=(B=null==(P=i.status)?void 0:P.privacyStatus)?B:"public"})}}let L=new Map(n.map(e=>[e.id,e]));return i.map(e=>L.get(e)).filter(Boolean)}async function h(e,l,t){let i,a=[],n=0;do{var s,o,r,d,p,m,h,b,v,y,_,f,x,g,w,N,j,T,k,C,S,P,E,I,A,B;if((n+=1)>200)break;let L=await c("playlists",{part:"snippet,contentDetails,status",channelId:e,maxResults:"50",pageToken:i},l,t);for(let e of null!=(s=L.items)?s:[]){let l=null!=(E=e.id)?E:"";if(!l)continue;let t=(null==(d=e.snippet)||null==(r=d.thumbnails)||null==(o=r.maxres)?void 0:o.url)||(null==(h=e.snippet)||null==(m=h.thumbnails)||null==(p=m.standard)?void 0:p.url)||(null==(y=e.snippet)||null==(v=y.thumbnails)||null==(b=v.high)?void 0:b.url)||(null==(x=e.snippet)||null==(f=x.thumbnails)||null==(_=f.medium)?void 0:_.url)||(null==(N=e.snippet)||null==(w=N.thumbnails)||null==(g=w.default)?void 0:g.url)||"";a.push({id:l,title:(null==(T=e.snippet)||null==(j=T.title)?void 0:j.trim())||"Untitled playlist",description:null!=(I=null==(k=e.snippet)?void 0:k.description)?I:"",thumbnail:t,itemCount:u(null==(C=e.contentDetails)?void 0:C.itemCount,0),publishedAt:null!=(A=null==(S=e.snippet)?void 0:S.publishedAt)?A:new Date().toISOString(),privacyStatus:null!=(B=null==(P=e.status)?void 0:P.privacyStatus)?B:"public"})}i=L.nextPageToken}while(i);return a.filter(e=>"public"===e.privacyStatus||"unlisted"===e.privacyStatus||void 0===e.privacyStatus).sort((e,l)=>{let t=Date.parse(e.publishedAt),i=Date.parse(l.publishedAt);return Number.isFinite(t)&&Number.isFinite(i)&&t!==i?i-t:e.title.localeCompare(l.title)})}async function b(e,l,t){let[i,a]=await Promise.all([p(e,l,t).catch(()=>[]),h(e,l,t)]),n=new Map(a.map(e=>[e.id,e])),s=Array.from(new Set(i.flatMap(e=>e.playlistIds).filter(e=>!n.has(e))));if(s.length)for(let e of(await m(s,l,t)))n.has(e.id)||(n.set(e.id,e),a.push(e));let o=i.map(e=>{let l=e.playlistIds.map(e=>n.get(e)).filter(e=>!!e).sort((e,l)=>e.title.localeCompare(l.title));return l.length?{sectionId:e.id,sectionTitle:e.title,playlists:l}:null}).filter(Boolean),r=Array.from(n.values()).sort((e,l)=>e.title.localeCompare(l.title)),u=[...o];return n.size&&!u.find(e=>"all"===e.sectionId)&&u.push({sectionId:"all",sectionTitle:"Playlists",playlists:r}),{playlists:r,sections:u.sort((e,l)=>e.sectionTitle.localeCompare(l.sectionTitle))}}async function v(e,l,t){var i,a;let n=await c("playlistItems",{part:"snippet",playlistId:e,maxResults:"".concat(Math.min(null!=(i=null==t?void 0:t.maxResults)?i:50,50)),pageToken:null==t?void 0:t.pageToken},l,null==t?void 0:t.signal);return{items:(null!=(a=n.items)?a:[]).map(e=>{var l,t,i,a,n,s,o,r,c,d,p,m,h,b,v,y,_,f,x,g,w,N,j,T,k;let C=null!=(j=null==(t=e.snippet)||null==(l=t.resourceId)?void 0:l.videoId)?j:"";if(!C)return null;let S=(null==(n=e.snippet)||null==(a=n.thumbnails)||null==(i=a.maxres)?void 0:i.url)||(null==(r=e.snippet)||null==(o=r.thumbnails)||null==(s=o.standard)?void 0:s.url)||(null==(p=e.snippet)||null==(d=p.thumbnails)||null==(c=d.high)?void 0:c.url)||(null==(b=e.snippet)||null==(h=b.thumbnails)||null==(m=h.medium)?void 0:m.url)||(null==(_=e.snippet)||null==(y=_.thumbnails)||null==(v=y.default)?void 0:v.url)||"";return{videoId:C,title:(null==(x=e.snippet)||null==(f=x.title)?void 0:f.trim())||"Untitled video",description:null!=(T=null==(g=e.snippet)?void 0:g.description)?T:"",thumbnail:S,publishedAt:null!=(k=null==(w=e.snippet)?void 0:w.publishedAt)?k:new Date().toISOString(),position:u(null==(N=e.snippet)?void 0:N.position,0)}}).filter(Boolean),nextPageToken:n.nextPageToken}}var y=t(6842),_=t.n(y),f=t(99742);let x=f.env.NEXT_PUBLIC_YOUTUBE_API_KEY,g="all-videos";function w(e,l,t){let i=l.trim().toLowerCase();if(!i)return e;let a=e=>{var l,a,n;return!!"".concat(e.title," ").concat(null!=(a=e.description)?a:"").toLowerCase().includes(i)||(null!=(n=null==(l=t[e.id])?void 0:l.items)?n:[]).some(e=>{var l;return"".concat(e.title," ").concat(null!=(l=e.description)?l:"").toLowerCase().includes(i)})};return e.map(e=>({...e,playlists:e.playlists.filter(a)})).filter(e=>e.playlists.length>0)}function N(e){if(!e)return"Unknown";let l=new Date(e);return Number.isNaN(l.getTime())?"Unknown":new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"}).format(l)}function j(e){return[...e].sort((e,l)=>{var t,i;let a=new Date(null!=(t=e.publishedAt)?t:"").getTime(),n=new Date(null!=(i=l.publishedAt)?i:"").getTime(),s=Number.isNaN(a)?0:a,o=Number.isNaN(n)?0:n;return s===o?0:o-s})}function T(e){var l,t,o,u;let{channelId:c}=e,{allowNetwork:p,setAllowNetwork:m}=(0,s.useSettings)(),h=(0,a.useMemo)(()=>{var e;let l=f.env.NEXT_PUBLIC_YOUTUBE_CHANNEL_ID;return null!=(e=r(null!=c?c:""))?e:l?r(l):null},[c]),y=null!=h?h:"UCxPIJ3hw6AOwomUWh5B7SfQ",T=!!x,[k,C]=(0,a.useState)(null),[S,P]=(0,a.useState)([]),[E,I]=(0,a.useState)(()=>new Map),[A,B]=(0,a.useState)({}),[L,D]=(0,a.useState)(null),[O,U]=(0,a.useState)(null),[R,Y]=(0,a.useState)(!1),[M,H]=(0,a.useState)(""),[F,G]=(0,a.useState)(!1),[z,W]=(0,a.useState)(null),[Q,X]=(0,a.useState)(!1),q=(0,a.useRef)(null),K=(0,a.useRef)(null),Z=(0,a.useCallback)(async()=>{var e,l,t,i,a,n,s;let o=p||!1;if(!p&&(m(!0),W("Network requests were disabled. Enabling network to load YouTube playlists…"),!o))return void G(!1);if(!y){W("Missing or invalid YouTube channel id. Set NEXT_PUBLIC_YOUTUBE_CHANNEL_ID or pass channelId prop."),G(!1);return}G(!0),W(null),X(!1),null==(e=q.current)||e.abort();let r=new AbortController;q.current=r;try{let[e,n]=await (async()=>{try{let e=await fetch("/api/youtube/directory?channelId=".concat(encodeURIComponent(y)),{signal:r.signal});if(!e.ok){let l=await e.json().catch(()=>({}));throw Error((null==l?void 0:l.error)||"YouTube directory request failed (".concat(e.status," ").concat(e.statusText,")"))}let l=await e.json();return[l.summary,l.directory]}catch(e){if(!T)throw e;return Promise.all([d(y,null!=x?x:"",r.signal),b(y,null!=x?x:"",r.signal)])}})();C(e);let s=new Map(n.playlists.map(e=>[e.id,e])),o=n.playlists.reduce((e,l)=>{var t;return e+(null!=(t=l.itemCount)?t:0)},0),u=n.playlists.reduce((e,l)=>{var t;let i=new Date(null!=(t=l.publishedAt)?t:"");return Number.isNaN(i.getTime())?e:e?i>e?i:e:i},null),c=null==(l=n.playlists.find(e=>e.thumbnail))?void 0:l.thumbnail,p={id:g,title:"All videos",description:"Combined feed of every playlist video.",thumbnail:null!=c?c:"",itemCount:o,publishedAt:null!=(a=null==u?void 0:u.toISOString())?a:"",privacyStatus:"public"};s.set(g,p),I(s);let m=(n.sections.length?n.sections:n.playlists.length?[{sectionId:"all",sectionTitle:"Playlists",playlists:n.playlists}]:[]).map(e=>"all"===e.sectionId?{...e,playlists:[...e.playlists,p]}:e);P(m),W(null);let h=null==(i=m[0])||null==(t=i.playlists[0])?void 0:t.id;D(e=>{var l,t;return null!=(t=null!=(l=null!=e?e:g)?l:h)?t:null})}catch(e){if("AbortError"===e.name)return;console.error("YouTube directory load failed",e),(null==(n=e.message)?void 0:n.toLowerCase().includes("api key"))&&X(!0),W((null==(s=e.message)?void 0:s.includes("Failed to fetch"))?"Unable to reach the YouTube API. Check your network connection and API key.":e.message||"Failed to load YouTube playlists.");return}finally{G(!1),q.current=null}},[p,T,y,m]);(0,a.useEffect)(()=>(Z(),()=>{var e,l;null==(e=q.current)||e.abort(),null==(l=K.current)||l.abort()}),[Z]);let J=(0,a.useCallback)(async(e,l)=>{var t,i,a;if(!e)return;B(l=>{var t,i,a;return{...l,[e]:{items:null!=(a=null==(t=l[e])?void 0:t.items)?a:[],nextPageToken:null==(i=l[e])?void 0:i.nextPageToken,loading:!0,error:void 0}}}),null==(t=K.current)||t.abort();let n=new AbortController;K.current=n;try{let t=A[e],a="append"===l?null==t?void 0:t.nextPageToken:void 0,s=async e=>await (async()=>{try{let l=new URLSearchParams({playlistId:e,maxResults:"50"});a&&l.set("pageToken",a);let t=await fetch("/api/youtube/playlist-items?".concat(l.toString()),{signal:n.signal});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error((null==e?void 0:e.error)||"YouTube playlist request failed (".concat(t.status," ").concat(t.statusText,")"))}return await t.json()}catch(l){if(!T)throw l;return v(e,null!=x?x:"",{pageToken:a,maxResults:50,signal:n.signal})}})();if(e===g){let t=Array.from(E.keys()).filter(e=>e!==g);if(!t.length)throw Error("No playlists available to build the combined feed.");let a=await Promise.allSettled(t.map(e=>s(e))),n=a.filter(e=>"fulfilled"===e.status).flatMap(e=>e.value.items);if(!n.length){let e=a.find(e=>"rejected"===e.status);throw Error(e&&"reason"in e&&(null==(i=e.reason)?void 0:i.message)||"Failed to load any playlist videos.")}let o=j(n);B(l=>({...l,[e]:{items:o,nextPageToken:void 0,loading:!1,error:void 0}})),U(e=>{var t;let i=null==(t=o[0])?void 0:t.videoId;return i?e&&"replace"!==l||null!=e?e:i:e});return}let o=await s(e);B(t=>{var i,a;let n=null!=(a=null==(i=t[e])?void 0:i.items)?a:[],s="append"===l?[...n,...o.items]:o.items;return{...t,[e]:{items:s,nextPageToken:o.nextPageToken,loading:!1,error:void 0}}}),U(e=>{var t;let i=null==(t=o.items[0])?void 0:t.videoId;return i?e&&"replace"!==l||null!=e?e:i:e})}catch(l){if("AbortError"===l.name)return void B(l=>{var t,i,a;return{...l,[e]:{items:null!=(a=null==(t=l[e])?void 0:t.items)?a:[],nextPageToken:null==(i=l[e])?void 0:i.nextPageToken,loading:!1,error:void 0}}});console.error("YouTube playlist items load failed",l),(null==(a=l.message)?void 0:a.toLowerCase().includes("api key"))&&X(!0),B(t=>{var i,a,n;return{...t,[e]:{items:null!=(n=null==(i=t[e])?void 0:i.items)?n:[],nextPageToken:null==(a=t[e])?void 0:a.nextPageToken,loading:!1,error:l.message||"Failed to load playlist videos."}}})}finally{K.current=null}},[T,E,A]);(0,a.useEffect)(()=>{var e;if(!L)return;let l=A[L];null!=l&&null!=(e=l.items)&&e.length||null!=l&&l.loading||J(L,"replace")},[L,A,J]);let V=(0,a.useMemo)(()=>w(S,M,A),[S,M,A]);(0,a.useEffect)(()=>{var e,l;if(!V.length){D(null),U(null);return}if(L&&V.some(e=>e.playlists.some(e=>e.id===L)))return;let t=null==(e=V[0])?void 0:e.playlists[0];D(null!=(l=null==t?void 0:t.id)?l:null),U(null)},[V,L]),(0,a.useEffect)(()=>{Y(!1)},[O]);let $=L&&null!=(l=E.get(L))?l:null,ee=(0,a.useMemo)(()=>{var e,l;return L?j(null!=(l=null==(e=A[L])?void 0:e.items)?l:[]):[]},[A,L]),el=(0,a.useMemo)(()=>{var e;return O&&null!=(e=ee.find(e=>e.videoId===O))?e:null},[ee,O]),et=L?A[L]:void 0,ei=V.reduce((e,l)=>e+l.playlists.length,0),ea=!!M.trim().length;return(0,i.jsxs)("div",{className:_().container,children:[(0,i.jsxs)("header",{className:_().header,children:[(0,i.jsxs)("div",{className:_().headerTop,children:[(0,i.jsxs)("div",{className:_().brand,children:[(null==k?void 0:k.thumbnail)?(0,i.jsx)("img",{src:k.thumbnail,alt:"",className:_().avatar}):(0,i.jsx)("div",{className:_().avatarPlaceholder,"aria-hidden":!0}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:_().kicker,children:"YouTube hub"}),(0,i.jsx)("h1",{className:_().title,children:"Channel playlists"}),(0,i.jsx)("p",{className:_().subtle,children:(null==k?void 0:k.title)?"Curated playlists from ".concat(k.title):"Browse a clean, distraction-free set of playlists."})]})]}),(0,i.jsxs)("div",{className:_().actions,children:[y&&(0,i.jsx)("a",{href:"https://www.youtube.com/channel/".concat(y),target:"_blank",rel:"noopener noreferrer",className:"".concat(_().button," ").concat(_().ghostButton),children:"Open channel"}),(0,i.jsx)("button",{type:"button",onClick:()=>void Z(),className:_().button,disabled:F,children:F?"Refreshing…":"Refresh"})]})]}),(0,i.jsxs)("div",{className:_().filterRow,children:[(0,i.jsxs)("div",{className:_().searchGroup,children:[(0,i.jsx)("label",{className:"sr-only",htmlFor:"youtube-playlist-filter",children:"Filter playlists"}),(0,i.jsx)("input",{id:"youtube-playlist-filter",type:"search","aria-label":"Search playlists or videos",value:M,onChange:e=>H(e.target.value),placeholder:"Search playlists or videos",className:_().input})]}),(0,i.jsx)("div",{className:_().miniStat,children:F?"Loading directory…":"".concat(ei," playlists • ").concat(V.length," categories")})]}),Q&&(0,i.jsxs)("p",{className:_().hint,role:"status",children:["Configure ",(0,i.jsx)("code",{className:_().code,children:"YOUTUBE_API_KEY"})," on the server or"," ",(0,i.jsx)("code",{className:_().code,children:"NEXT_PUBLIC_YOUTUBE_API_KEY"})," for client fallback."]}),!p&&(0,i.jsxs)("div",{className:_().banner,role:"status",children:[(0,i.jsx)("span",{children:"Network requests are disabled. Enable them to load playlists."}),(0,i.jsx)("button",{type:"button",onClick:()=>m(!0),className:"".concat(_().button," ").concat(_().smallButton),children:"Enable network"})]}),z&&(0,i.jsx)("p",{className:_().error,role:"alert",children:z})]}),(0,i.jsxs)("main",{className:_().layout,children:[(0,i.jsx)("aside",{className:_().sidebar,children:(0,i.jsxs)("div",{className:_().panel,children:[(0,i.jsxs)("div",{className:_().panelHeader,children:[(0,i.jsx)("h2",{className:_().sectionTitle,children:"Playlists"}),(0,i.jsx)("span",{className:_().pill,children:ei})]}),F&&!V.length?(0,i.jsx)("div",{className:_().placeholderCard,children:"Loading playlists…"}):V.length?(0,i.jsxs)("div",{className:_().playlistGroups,children:[(0,i.jsx)("h2",{className:_().sectionTitle,children:"Categories"}),V.map(e=>(0,i.jsxs)("div",{className:_().playlistGroup,children:[(0,i.jsxs)("div",{className:_().groupHeader,children:[(0,i.jsx)("h3",{className:_().groupTitle,children:e.sectionTitle}),(0,i.jsx)("span",{className:_().groupCount,children:e.playlists.length})]}),(0,i.jsx)("ul",{className:_().playlistList,"aria-label":"".concat(e.sectionTitle," playlists"),children:e.playlists.map(e=>{let l=e.id===L;return(0,i.jsx)("li",{children:(0,i.jsxs)("button",{type:"button",onClick:()=>{D(e.id),U(null)},className:"".concat(_().playlistButton," ").concat(l?_().playlistButtonActive:""),"aria-label":"Open playlist ".concat(e.title),children:[e.thumbnail?(0,i.jsx)("img",{src:e.thumbnail,alt:"",className:_().playlistThumb}):(0,i.jsx)("div",{className:_().thumbPlaceholder,children:"No preview"}),(0,i.jsxs)("div",{className:_().playlistMeta,children:[(0,i.jsx)("p",{className:_().playlistTitle,children:e.title}),(0,i.jsxs)("p",{className:_().metaText,children:[e.itemCount," videos","public"!==e.privacyStatus?" • ".concat(e.privacyStatus):""]})]})]})},e.id)})})]},e.sectionId))]}):ea?(0,i.jsxs)("div",{className:_().placeholderCard,children:[(0,i.jsx)("p",{style:{margin:0},children:"No playlists match your search."}),(0,i.jsx)("button",{type:"button",onClick:()=>H(""),className:"".concat(_().button," ").concat(_().smallButton),style:{marginTop:"10px"},children:"Clear search"})]}):(0,i.jsx)("div",{className:_().placeholderCard,children:Q?"Configure a YouTube API key to load playlists.":y?"No public playlists found for this channel.":"Enter a valid channel id to load playlists."})]})}),(0,i.jsxs)("section",{className:_().contentArea,children:[(0,i.jsx)("div",{className:_().panel,children:(0,i.jsxs)("div",{className:_().panelHeader,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:_().kicker,children:"Playlist"}),(0,i.jsx)("h3",{className:_().heading,children:null!=(t=null==$?void 0:$.title)?t:"Select a playlist"}),(null==$?void 0:$.publishedAt)&&(0,i.jsxs)("p",{className:_().metaText,children:["Published ",N($.publishedAt)," • ",$.itemCount," videos"]})]}),$&&(0,i.jsx)("a",{href:(o=$.id,"https://www.youtube.com/playlist?list=".concat(o)),target:"_blank",rel:"noopener noreferrer",className:"".concat(_().button," ").concat(_().ghostButton),children:"Open playlist"})]})}),(0,i.jsxs)("div",{className:_().contentGrid,children:[(0,i.jsxs)("div",{className:"".concat(_().panel," ").concat(_().playerPanel),children:[(0,i.jsxs)("div",{className:_().panelHeader,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:_().kicker,children:"Watch"}),(0,i.jsx)("h3",{className:_().subHeading,children:el?"Now playing":"Choose a video"})]}),el&&(0,i.jsx)("a",{href:(u=el.videoId,"https://www.youtube.com/watch?v=".concat(u)),target:"_blank",rel:"noopener noreferrer",className:"".concat(_().button," ").concat(_().ghostButton),children:"Open video"})]}),(0,i.jsx)("div",{className:_().playerShell,children:el?(0,i.jsx)(n.default,{title:"YouTube player for ".concat(el.title),src:"https://www.youtube-nocookie.com/embed/".concat(el.videoId),className:_().embedFrame,containerClassName:_().embedContainer,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",fallbackLabel:"Open on YouTube",openInNewTabLabel:"Open on YouTube",loadingLabel:"Loading YouTube player…"},el.videoId):(0,i.jsx)("div",{className:_().playerPlaceholder,children:"Select a video from the list."})}),el&&(0,i.jsxs)("div",{className:_().videoDetails,children:[(0,i.jsx)("div",{className:_().panelHeader,children:(0,i.jsx)("h3",{className:_().videoTitle,children:el.title})}),(0,i.jsxs)("p",{className:_().metaText,style:{marginBottom:4},children:["Published ",N(el.publishedAt)]}),el.description&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:_().descriptionText,children:R?el.description:el.description.slice(0,150)+(el.description.length>150?"...":"")}),el.description.length>150&&(0,i.jsx)("button",{type:"button",className:_().descriptionToggle,onClick:()=>Y(!R),children:R?"Show less":"Show more"})]})]})]}),(0,i.jsxs)("div",{className:_().panel,children:[(0,i.jsxs)("div",{className:_().panelHeader,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:_().kicker,children:"Playlist videos"}),(0,i.jsx)("h3",{className:_().subHeading,children:"Queue"})]}),(null==et?void 0:et.loading)&&(0,i.jsx)("span",{className:_().loading,children:"Loading…"})]}),L?(null==et?void 0:et.error)?(0,i.jsxs)("div",{className:_().placeholderCard,children:[(0,i.jsx)("p",{className:_().error,children:et.error}),(0,i.jsx)("button",{type:"button",onClick:()=>void J(L,"replace"),className:"".concat(_().button," ").concat(_().smallButton),children:"Retry"})]}):ee.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("ul",{className:_().videoList,"aria-label":"Playlist videos",children:ee.map(e=>{let l=e.videoId===O;return(0,i.jsx)("li",{children:(0,i.jsxs)("button",{type:"button",onClick:()=>U(e.videoId),className:"".concat(_().videoButton," ").concat(l?_().videoButtonActive:""),"aria-label":"Watch ".concat(e.title),children:[e.thumbnail?(0,i.jsx)("img",{src:e.thumbnail,alt:"",className:_().videoThumb}):(0,i.jsx)("div",{className:_().thumbPlaceholder,children:"No preview"}),(0,i.jsxs)("div",{className:_().videoMeta,children:[(0,i.jsx)("p",{className:_().videoName,children:e.title}),(0,i.jsx)("p",{className:_().metaText,children:N(e.publishedAt)})]})]})},e.videoId)})}),(null==et?void 0:et.nextPageToken)&&(0,i.jsx)("button",{type:"button",onClick:()=>void J(L,"append"),className:"".concat(_().button," ").concat(_().ghostButton," ").concat(_().fullWidth),disabled:et.loading,children:et.loading?"Loading…":"Load more"})]}):(0,i.jsx)("p",{className:_().placeholderText,children:(null==et?void 0:et.loading)?"Loading videos…":"No videos found."}):(0,i.jsx)("p",{className:_().placeholderText,children:"Select a playlist to see videos."})]})]})]})]})]})}},68327:(e,l,t)=>{"use strict";t.d(l,{default:()=>u});var i=t(37876),a=t(77328),n=t.n(a),s=t(14232),o=t(69417);let r=(0,s.forwardRef)((e,l)=>{let{src:t,title:a,allow:r,sandbox:u="allow-same-origin allow-scripts allow-forms allow-popups",className:c,containerClassName:d,prefetch:p=!1,allowedOrigins:m=o.EMBED_FRAME_ALLOWED_ORIGINS,fallbackLabel:h="Open in new tab",openInNewTabLabel:b="Open in new tab",loadingLabel:v="Loading embed…",onLoad:y,onError:_,onBlocked:f,timeoutMs:x=8e3}=e,[g,w]=(0,s.useState)("loading"),[N,j]=(0,s.useState)(null),T=(0,s.useRef)(null),k=(0,s.useRef)(null),C=(0,s.useMemo)(()=>((e,l)=>{try{let t=new URL(e);if(l.includes("*"))return"http:"===t.protocol||"https:"===t.protocol;return l.some(e=>((e,l)=>{if(!l)return!1;let t=l.toLowerCase(),i=e.toLowerCase();if(t.includes("*")){let e=t.replace(/^https?:\/\//,"").replace(/^\*\./,"");return i.endsWith(e)}return i===t})(t.origin,e))}catch(e){return!1}})(t,m),[t,m]);return(0,s.useImperativeHandle)(l,()=>T.current,[]),(0,s.useEffect)(()=>(w("loading"),j(null),C)?(k.current=window.setTimeout(()=>{w(e=>"ready"===e?e:"blocked"),j("The embed did not load. It may be blocked by your browser."),null==f||f("The embed did not load. It may be blocked by your browser.")},x),()=>{k.current&&window.clearTimeout(k.current)}):(w("blocked"),j("This embed is blocked by the sandbox policy."),null==f||f("This embed is blocked by the sandbox policy."),()=>{}),[C,f,x,t]),(0,i.jsxs)("div",{className:null!=d?d:"relative h-full w-full overflow-hidden rounded-lg border border-[color:var(--kali-panel-border)] bg-[var(--kali-panel)]",children:[p&&(0,i.jsx)(n(),{children:(0,i.jsx)("link",{rel:"prefetch",href:t})}),(0,i.jsx)("iframe",{ref:T,title:a,src:C?t:"about:blank",className:null!=c?c:"h-full w-full border-0",allow:r,sandbox:u,onLoad:e=>{k.current&&window.clearTimeout(k.current),w("ready"),null==y||y(e)},onError:e=>{k.current&&window.clearTimeout(k.current),w("blocked"),j("The embed was blocked from loading."),null==f||f("The embed was blocked from loading."),null==_||_(e)},loading:"lazy"}),"ready"!==g&&(0,i.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center bg-[color:var(--kali-overlay)]/70",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-3 text-center text-sm text-[color:var(--kali-text)]",children:["loading"===g&&(0,i.jsxs)("div",{className:"flex flex-col items-center gap-2","aria-live":"polite",role:"status",children:[(0,i.jsx)("span",{className:"h-5 w-5 animate-spin rounded-full border border-[color:var(--color-primary)] border-t-transparent"}),(0,i.jsx)("span",{children:v})]}),"blocked"===g&&(0,i.jsxs)("div",{className:"flex flex-col items-center gap-2",role:"alert",children:[(0,i.jsx)("span",{children:N}),(0,i.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"pointer-events-auto rounded-md border border-[color:var(--kali-border)] bg-[var(--kali-overlay)] px-3 py-1 text-xs font-semibold text-[color:var(--color-text)] transition hover:border-[color:var(--color-primary)] hover:text-[color:var(--kali-text)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[color:var(--color-primary)]",children:h})]})]})}),(0,i.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"pointer-events-auto absolute right-3 top-3 z-10 inline-flex items-center gap-1 rounded-full border border-[color:var(--kali-panel-border)] bg-[color-mix(in_srgb,var(--kali-panel)_82%,transparent)] px-3 py-1 text-[11px] font-semibold uppercase tracking-wide text-[color:color-mix(in_srgb,var(--kali-text)_78%,var(--kali-bg))] shadow-[0_12px_30px_-16px_var(--kali-blue-glow)] transition hover:border-[color:var(--color-primary)] hover:text-[color:var(--kali-text)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[color:var(--color-primary)]",children:b})]})});r.displayName="EmbedFrame";let u=r},69417:e=>{"use strict";e.exports={EMBED_FRAME_ALLOWED_ORIGINS:["https://vercel.live","https://stackblitz.com","https://www.youtube-nocookie.com","https://open.spotify.com","https://todoist.com","https://embed.todoist.com","https://www.kali.org","https://www.offsec.com","https://www.exploit-db.com","https://forums.kali.org","https://developer.mozilla.org","https://en.wikipedia.org","https://www.google.com","https://*.google.com","https://example.com","https://platform.twitter.com","https://embed.x.com","https://syndication.twitter.com","https://cdn.syndication.twimg.com","https://*.twitter.com","https://*.x.com","https://twitter.com","https://x.com"]}},77328:(e,l,t)=>{e.exports=t(97918)}}]);