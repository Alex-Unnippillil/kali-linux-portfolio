"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3291],{31730:(e,t,a)=>{a.d(t,{hasIndexedDB:()=>l,isBrowser:()=>s});let s="undefined"!=typeof document,l=s&&"undefined"!=typeof indexedDB},53291:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(37876),l=a(14232),i=a(43617);let r=e=>{let{canvasRef:t,onPayloadChange:a,size:r,margin:o,ecc:n,logo:c}=e,[d,x]=(0,l.useState)("text"),[u,h]=(0,l.useState)(""),[p,g]=(0,l.useState)(""),[m,b]=(0,l.useState)({ssid:"",password:"",encryption:"WPA"}),[f,v]=(0,l.useState)("");return(0,l.useEffect)(()=>{let e="";if("text"===d&&(e=u),"url"===d&&(e=p),"wifi"===d){let{ssid:t,password:a,encryption:s}=m;e="WIFI:T:".concat("nopass"===s?"":s,";S:").concat(t,";P:").concat(a,";;")}v(e),null==a||a(e)},[d,u,p,m,a]),(0,l.useEffect)(()=>{let e=t.current;if(e){if(!f){let t=e.getContext("2d");t&&t.clearRect(0,0,e.width,e.height);return}i.toCanvas(e,f,{margin:o,width:r,errorCorrectionLevel:n}).then(()=>{if(c){let t=e.getContext("2d");if(t){let a=new Image;a.src=c,a.onload=()=>{let s=.2*r,l=(e.width-s)/2,i=(e.height-s)/2;t.drawImage(a,l,i,s,s)}}}}).catch(()=>{let t=e.getContext("2d");t&&t.clearRect(0,0,e.width,e.height)})}},[f,t,r,o,n,c]),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{htmlFor:"preset-type",className:"block text-sm",children:["Type",(0,s.jsxs)("select",{id:"preset-type",value:d,onChange:e=>x(e.target.value),className:"ml-2 rounded p-1 text-black",children:[(0,s.jsx)("option",{value:"text",children:"Text"}),(0,s.jsx)("option",{value:"url",children:"URL"}),(0,s.jsx)("option",{value:"wifi",children:"WiFi"})]})]}),"text"===d&&(0,s.jsxs)("label",{htmlFor:"preset-text",className:"block text-sm",children:["Text",(0,s.jsx)("input",{id:"preset-text",type:"text",value:u,onChange:e=>h(e.target.value),className:"w-full mt-1 rounded p-1 text-black"})]}),"url"===d&&(0,s.jsxs)("label",{htmlFor:"preset-url",className:"block text-sm",children:["URL",(0,s.jsx)("input",{id:"preset-url",type:"url",value:p,onChange:e=>g(e.target.value),className:"w-full mt-1 rounded p-1 text-black"})]}),"wifi"===d&&(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("label",{className:"block",children:["SSID",(0,s.jsx)("input",{type:"text",value:m.ssid,onChange:e=>b({...m,ssid:e.target.value}),className:"w-full mt-1 rounded p-1 text-black"})]}),(0,s.jsxs)("label",{className:"block",children:["Password",(0,s.jsx)("input",{type:"text",value:m.password,onChange:e=>b({...m,password:e.target.value}),className:"w-full mt-1 rounded p-1 text-black"})]}),(0,s.jsxs)("label",{className:"block",children:["Encryption",(0,s.jsxs)("select",{value:m.encryption,onChange:e=>b({...m,encryption:e.target.value}),className:"w-full mt-1 rounded p-1 text-black",children:[(0,s.jsx)("option",{value:"WPA",children:"WPA/WPA2"}),(0,s.jsx)("option",{value:"WEP",children:"WEP"}),(0,s.jsx)("option",{value:"nopass",children:"None"})]})]})]})]})})};var o=a(21746),n=a.n(o);let c=e=>{let{onResult:t}=e,[a,i]=(0,l.useState)(""),[r,o]=(0,l.useState)(""),c=(0,l.useCallback)(async e=>{e.preventDefault();let a=e.dataTransfer.files[0];if(!a||!a.type.startsWith("image/"))return void o("");let s=URL.createObjectURL(a);i(s),o("");try{if("BarcodeDetector"in window){let e=new Image;e.src=s,await e.decode();let a=new window.BarcodeDetector({formats:["qr_code"]}),l=await a.detect(e);l[0]&&t(l[0].rawValue)}else{let e=new Image;e.src=s,await e.decode();let a=document.createElement("canvas");a.width=e.width,a.height=e.height;let l=a.getContext("2d");if(!l)throw Error("Canvas context unavailable");l.drawImage(e,0,0);let i=l.getImageData(0,0,a.width,a.height),r=n()(i.data,a.width,a.height);r?t(r.data):o("No QR code found")}}catch(e){o("No QR code found")}},[t]);return(0,s.jsxs)("div",{onDragOver:e=>e.preventDefault(),onDrop:c,className:"w-full h-full relative flex items-center justify-center border-2 border-dashed border-gray-500 text-gray-400",children:[a?(0,s.jsx)("img",{src:a,alt:"Dropped",className:"max-w-full max-h-full"}):(0,s.jsx)("p",{children:"Drop image"}),(0,s.jsx)("svg",{className:"w-6 h-6 absolute top-0 left-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{d:"M3 9V3h6"})}),(0,s.jsx)("svg",{className:"w-6 h-6 absolute top-0 right-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{d:"M21 9V3h-6"})}),(0,s.jsx)("svg",{className:"w-6 h-6 absolute bottom-0 left-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{d:"M3 15v6h6"})}),(0,s.jsx)("svg",{className:"w-6 h-6 absolute bottom-0 right-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{d:"M21 15v6h-6"})}),r&&(0,s.jsx)("p",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 text-xs text-red-500",children:r})]})};var d=a(65578);function x(){let e=(0,l.useRef)(null),[t,a]=(0,l.useState)(""),[o,n]=(0,l.useState)("generate"),[x,u]=(0,l.useState)(256),[h,p]=(0,l.useState)(1),[g,m]=(0,l.useState)("M"),[b,f]=(0,l.useState)(null),[v,k]=(0,l.useState)(""),[j,w]=(0,l.useState)(""),[y,N]=(0,l.useState)(""),[C,S]=(0,l.useState)(0);(0,l.useEffect)(()=>{w((0,d.loadLastGeneration)()),N((0,d.loadLastScan)())},[]),(0,l.useEffect)(()=>{t&&((0,d.saveLastGeneration)(t),w(t))},[t]),(0,l.useEffect)(()=>{v&&((0,d.saveLastScan)(v),N(v))},[v]);let L=(0,l.useCallback)(e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(!a)return;let s=new FileReader;s.onload=()=>f(s.result),s.readAsDataURL(a)},[]),R=(0,l.useCallback)(()=>{if(!t||!e.current)return;let a=e.current.toDataURL("image/png"),s=document.createElement("a");s.href=a,s.download="qr-".concat(x,".png"),s.click()},[t,x]),D=(0,l.useCallback)(async()=>{if(!t)return;let e=await i.toString(t,{margin:h,width:x,type:"svg",errorCorrectionLevel:g});if(b){let t=.2*x,a=(x-t)/2,s='<image href="'.concat(b,'" x="').concat(a,'" y="').concat(a,'" width="').concat(t,'" height="').concat(t,'"/>');e=e.replace("</svg>","".concat(s,"</svg>"))}let a=new Blob([e],{type:"image/svg+xml"}),s=URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download="qr-".concat(x,".svg"),l.click(),URL.revokeObjectURL(s)},[t,x,h,g,b]),_=(0,l.useCallback)(()=>{a(""),u(256),p(1),m("M"),f(null),S(e=>e+1)},[]),B=(0,l.useCallback)(async()=>{if(t)try{var e;await (null==(e=navigator.clipboard)?void 0:e.writeText(t))}catch(e){}},[t]),I=(0,l.useCallback)(async()=>{if(t)try{let e=navigator;"function"==typeof e.share?await e.share({title:"QR Code",text:t}):e.clipboard&&await e.clipboard.writeText(t)}catch(e){}},[t]);return(0,s.jsxs)("div",{className:"flex h-full flex-col gap-6 overflow-auto bg-[color:var(--kali-bg)] p-4 text-kali-text",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>n("generate"),className:"rounded border px-3 py-1 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-kali-focus focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--kali-bg)] ".concat("generate"===o?"border-transparent bg-kali-primary text-kali-inverse shadow-[0_0_0_1px_rgba(15,148,210,0.35)] hover:bg-kali-primary/90":"border-kali-border/60 bg-[var(--kali-panel)] text-kali-text/80 hover:border-kali-border hover:bg-[color:color-mix(in_srgb,var(--kali-panel)_88%,var(--kali-blue)_12%)] hover:text-kali-text"),"aria-pressed":"generate"===o,children:"Generate"}),(0,s.jsx)("button",{type:"button",onClick:()=>n("scan"),className:"rounded border px-3 py-1 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-kali-focus focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--kali-bg)] ".concat("scan"===o?"border-transparent bg-kali-primary text-kali-inverse shadow-[0_0_0_1px_rgba(15,148,210,0.35)] hover:bg-kali-primary/90":"border-kali-border/60 bg-[var(--kali-panel)] text-kali-text/80 hover:border-kali-border hover:bg-[color:color-mix(in_srgb,var(--kali-panel)_88%,var(--kali-blue)_12%)] hover:text-kali-text"),"aria-pressed":"scan"===o,children:"Scan"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-6 lg:grid lg:grid-cols-[minmax(0,320px)_minmax(0,1fr)] lg:items-start",children:[(0,s.jsx)("section",{className:"flex flex-col gap-4 rounded-lg border border-kali-border/60 bg-[var(--kali-panel)] p-4 shadow-inner",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)("div",{className:"aspect-square w-full max-w-xs rounded bg-white p-2",children:"generate"===o?(0,s.jsx)("canvas",{ref:e,"aria-label":"Generated QR code preview",className:"h-full w-full"}):(0,s.jsx)(c,{onResult:k})}),(0,s.jsx)("div",{className:"w-full space-y-2 text-left",children:"generate"===o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm font-semibold",children:"Preview & actions"}),(0,s.jsx)("p",{className:"text-xs text-kali-text/70",children:"Download or share this code, then open your phone camera to scan it."}),(0,s.jsx)("p",{className:"text-xs text-kali-text/70",children:"Download or share this code, then open your phone camera"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)("button",{type:"button",onClick:R,className:"flex items-center gap-2 rounded bg-kali-primary px-3 py-1 text-sm font-medium text-kali-inverse transition-colors hover:bg-kali-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-kali-focus focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--kali-bg)] disabled:cursor-not-allowed disabled:bg-kali-primary/40 disabled:text-kali-inverse/70","aria-label":"Download PNG",disabled:!t,children:[(0,s.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("path",{d:"M12 3v12"}),(0,s.jsx)("path",{d:"M8 11l4 4 4-4"}),(0,s.jsx)("path",{d:"M4 19h16"})]}),(0,s.jsx)("span",{children:"Download PNG"})]}),(0,s.jsxs)("button",{type:"button",onClick:D,className:"flex items-center gap-2 rounded bg-kali-primary px-3 py-1 text-sm font-medium text-kali-inverse transition-colors hover:bg-kali-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-kali-focus focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--kali-bg)] disabled:cursor-not-allowed disabled:bg-kali-primary/40 disabled:text-kali-inverse/70","aria-label":"Download SVG",disabled:!t,children:[(0,s.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("path",{d:"M12 3v12"}),(0,s.jsx)("path",{d:"M8 11l4 4 4-4"}),(0,s.jsx)("path",{d:"M4 19h16"})]}),(0,s.jsx)("span",{children:"Download SVG"})]}),(0,s.jsxs)("button",{type:"button",onClick:I,className:"flex items-center gap-2 rounded border border-kali-border/60 bg-[var(--kali-panel)] px-3 py-1 text-sm font-medium text-kali-text transition-colors hover:border-kali-border hover:bg-[color:color-mix(in_srgb,var(--kali-panel)_88%,var(--kali-blue)_12%)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-kali-focus focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--kali-bg)] disabled:cursor-not-allowed disabled:border-transparent disabled:bg-[color:color-mix(in_srgb,var(--kali-panel)_82%,transparent)] disabled:text-kali-text/50","aria-label":"Share QR code",disabled:!t,children:[(0,s.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,s.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,s.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),(0,s.jsx)("span",{children:"Share"})]})]})]}):(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm font-semibold",children:"Scanning tips"}),(0,s.jsx)("p",{className:"text-xs text-kali-text/70",children:"Allow camera access and keep the QR code centered in the live preview to decode it instantly."})]})})]})}),"generate"===o&&(0,s.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"w-full space-y-6 rounded-lg border border-kali-border/60 bg-[var(--kali-panel)] p-4 shadow",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Payload"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-kali-text/70",children:"Use the presets to structure text, URLs, or Wi-Fi credentials before generating the QR code."})]}),(0,s.jsx)(r,{canvasRef:e,onPayloadChange:a,size:x,margin:h,ecc:g,logo:b},C)]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-semibold",children:"Rendering options"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-kali-text/70",children:"Adjust the output size, margin, and error correction level to match your use case."})]}),(0,s.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("label",{htmlFor:"qr-size",className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"font-medium",children:"Size"}),(0,s.jsxs)("select",{id:"qr-size",value:x,onChange:e=>u(parseInt(e.target.value,10)),className:"rounded p-1 text-black",children:[(0,s.jsx)("option",{value:128,children:"128 px"}),(0,s.jsx)("option",{value:256,children:"256 px"}),(0,s.jsx)("option",{value:512,children:"512 px"})]})]}),(0,s.jsxs)("label",{htmlFor:"qr-margin",className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"font-medium",children:"Margin"}),(0,s.jsxs)("select",{id:"qr-margin",value:h,onChange:e=>p(parseInt(e.target.value,10)),className:"rounded p-1 text-black",children:[(0,s.jsx)("option",{value:0,children:"0 modules"}),(0,s.jsx)("option",{value:1,children:"1 module"}),(0,s.jsx)("option",{value:2,children:"2 modules"}),(0,s.jsx)("option",{value:4,children:"4 modules"})]})]}),(0,s.jsxs)("label",{htmlFor:"qr-ecc",className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"font-medium",children:"Error correction"}),(0,s.jsxs)("select",{id:"qr-ecc",value:g,onChange:e=>m(e.target.value),className:"rounded p-1 text-black",children:[(0,s.jsx)("option",{value:"L",children:"L (7%)"}),(0,s.jsx)("option",{value:"M",children:"M (15%)"}),(0,s.jsx)("option",{value:"Q",children:"Q (25%)"}),(0,s.jsx)("option",{value:"H",children:"H (30%)"})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-semibold",children:"Branding"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-kali-text/70",children:"Add a center logo (about 20% of the canvas) to personalize your QR code."})]}),(0,s.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("label",{htmlFor:"qr-logo",className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"font-medium",children:"Logo"}),(0,s.jsx)("input",{id:"qr-logo",type:"file",accept:"image/*",onChange:L,"aria-label":"Upload logo image",className:"rounded bg-white p-1 text-black"})]}),b&&(0,s.jsx)("button",{type:"button",onClick:()=>f(null),className:"w-fit rounded bg-kali-muted px-3 py-1 text-sm text-kali-text transition-colors hover:bg-kali-muted/80 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-kali-focus focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--kali-bg)]",children:"Clear logo"})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:_,className:"rounded bg-kali-muted px-3 py-1 text-sm text-kali-text transition-colors hover:bg-kali-muted/80 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-kali-focus focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--kali-bg)]",children:"Reset"}),(0,s.jsx)("button",{type:"button",onClick:B,className:"rounded bg-kali-primary px-3 py-1 text-sm font-medium text-kali-inverse transition-colors hover:bg-kali-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-kali-focus focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--kali-bg)] disabled:cursor-not-allowed disabled:bg-kali-primary/40 disabled:text-kali-inverse/70",disabled:!t,children:"Copy payload"})]}),(0,s.jsx)("p",{className:"flex-1 text-xs text-kali-text/70 md:text-right",children:t?(0,s.jsxs)("span",{className:"break-all",children:["Current payload: ",t]}):"Enter content to generate a QR code preview."})]})]})]}),y&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-xs text-kali-text/70",children:"Last scan"}),(0,s.jsx)("p",{className:"break-all text-sm",children:y}),(0,s.jsx)("button",{type:"button",onClick:()=>{var e;return null==(e=navigator.clipboard)?void 0:e.writeText(y)},className:"rounded bg-kali-primary px-2 py-1 text-sm font-medium text-kali-inverse transition-colors hover:bg-kali-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-kali-focus focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--kali-bg)]",children:"Copy"})]}),j&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-xs text-kali-text/70",children:"Last generation"}),(0,s.jsx)("p",{className:"break-all text-sm",children:j}),(0,s.jsx)("button",{type:"button",onClick:()=>{var e;return null==(e=navigator.clipboard)?void 0:e.writeText(j)},className:"rounded bg-kali-primary px-2 py-1 text-sm font-medium text-kali-inverse transition-colors hover:bg-kali-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-kali-focus focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--kali-bg)]",children:"Copy"})]})]})}},65578:(e,t,a)=>{a.d(t,{clearScans:()=>x,loadLastGeneration:()=>p,loadLastScan:()=>u,loadScans:()=>c,saveLastGeneration:()=>g,saveLastScan:()=>h,saveScans:()=>d});var s=a(31730);let l="qrScans",i="qrLastScan",r="qrLastGeneration",o="qr-scans.json",n=s.isBrowser&&"storage"in navigator&&!!navigator.storage.getDirectory,c=async()=>{if(!s.isBrowser)return[];if(n)try{let e=await navigator.storage.getDirectory(),t=await e.getFileHandle(o),a=await t.getFile();return JSON.parse(await a.text())}catch(e){return[]}try{return JSON.parse(localStorage.getItem(l)||"[]")}catch(e){return[]}},d=async e=>{if(s.isBrowser){if(n){let t=await navigator.storage.getDirectory(),a=await t.getFileHandle(o,{create:!0}),s=await a.createWritable();await s.write(JSON.stringify(e)),await s.close();return}localStorage.setItem(l,JSON.stringify(e))}},x=async()=>{if(s.isBrowser){if(n){try{let e=await navigator.storage.getDirectory();await e.removeEntry(o)}catch(e){}return}localStorage.removeItem(l)}},u=()=>s.isBrowser&&localStorage.getItem(i)||"",h=e=>{s.isBrowser&&localStorage.setItem(i,e)},p=()=>s.isBrowser&&localStorage.getItem(r)||"",g=e=>{s.isBrowser&&localStorage.setItem(r,e)}}}]);