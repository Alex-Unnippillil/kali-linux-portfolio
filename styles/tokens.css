/* Design tokens */

:root {
  color-scheme: dark light;
  tab-size: 2;
  font-variant-ligatures: contextual discretionary-ligatures;
  --font-sans: 'Inter', 'Segoe UI', system-ui, -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Helvetica Neue', sans-serif;
  --font-mono: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  --font-multiplier: 1;
  --line-height-body: 1.5;
  --line-height-display: 1.25;
  --hit-area: 44px;
  --motion-fast: 150ms;
  --motion-medium: 200ms;
  --motion-slow: 220ms;
  --focus-ring: hsl(200 100% 60%);
  --shadow-color: hsl(210 25% 15% / 0.6);
  --space-hairline: 2px;
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 24px;
  --space-6: 32px;
  --space-7: 48px;
  --space-8: 64px;
  --radius-1: 4px;
  --radius-2: 8px;
  --radius-round: 999px;
  --shadow-1: 0 1px 2px -1px var(--shadow-color), 0 1px 6px -1px color-mix(in oklch, var(--shadow-color) 70%, transparent);
  --shadow-2: 0 6px 18px -8px var(--shadow-color), 0 4px 12px -6px color-mix(in oklch, var(--shadow-color) 80%, transparent);
  --shadow-3: 0 12px 32px -12px color-mix(in oklch, var(--shadow-color) 92%, transparent),
    inset 0 0 0 1px color-mix(in oklch, var(--shadow-color) 45%, transparent);
  --shadow-4: 0 20px 48px -16px color-mix(in oklch, var(--shadow-color) 95%, transparent),
    0 0 0 1px color-mix(in oklch, var(--shadow-color) 35%, transparent);
  --window-titlebar-height: 40px;
  --window-control-size: 28px;
  --window-horizontal-padding: 12px;
  --z-window-base: 100;
  --z-window-max: 900;
  --z-overlay: 1000;
  --z-toast: 1100;
}

:root,
:root[data-theme='dark'],
html[data-theme='dark'] {
  --bg: hsl(215 60% 10%);
  --surface: hsl(215 55% 12%);
  --surface-2: hsl(215 50% 15%);
  --surface-3: hsl(215 45% 20%);
  --text: hsl(210 40% 95%);
  --text-muted: hsl(215 24% 70%);
  --primary: hsl(200 100% 55%);
  --primary-contrast: hsl(210 100% 12%);
  --accent: hsl(160 80% 55%);
  --success: hsl(150 75% 45%);
  --warning: hsl(38 90% 60%);
  --danger: hsl(350 85% 60%);
  --info: hsl(195 80% 60%);
  --border: hsl(210 50% 30% / 0.55);
  --focus-ring: hsl(200 100% 60%);
  --shadow-color: hsl(215 50% 10% / 0.75);
  --primary-glow: color-mix(in oklch, var(--primary) 45%, transparent);
  --overlay-strong: color-mix(in oklch, var(--bg) 75%, transparent);
  --overlay-soft: color-mix(in oklch, var(--surface) 65%, transparent);
}

@supports (color: oklch(0% 0 0)) {
  :root,
  :root[data-theme='dark'],
  html[data-theme='dark'] {
    --bg: oklch(18% 0.03 240);
    --surface: oklch(22% 0.035 240);
    --surface-2: oklch(26% 0.04 240);
    --surface-3: oklch(32% 0.05 240);
    --text: oklch(94% 0.02 235);
    --text-muted: oklch(70% 0.02 240);
    --primary: oklch(65% 0.16 218);
    --primary-contrast: oklch(30% 0.04 235);
    --accent: oklch(70% 0.14 180);
    --success: oklch(68% 0.15 160);
    --warning: oklch(74% 0.12 78);
    --danger: oklch(65% 0.19 25);
    --info: oklch(70% 0.14 210);
    --border: oklch(32% 0.03 240 / 0.55);
    --focus-ring: oklch(72% 0.15 210);
    --shadow-color: oklch(24% 0.03 240 / 0.8);
  }
}

:root[data-theme='light'],
html[data-theme='light'] {
  color-scheme: light dark;
  --bg: hsl(215 45% 96%);
  --surface: hsl(215 35% 92%);
  --surface-2: hsl(215 30% 88%);
  --surface-3: hsl(215 25% 82%);
  --text: hsl(215 40% 14%);
  --text-muted: hsl(215 20% 40%);
  --primary: hsl(200 90% 45%);
  --primary-contrast: hsl(210 100% 98%);
  --accent: hsl(165 70% 42%);
  --success: hsl(142 65% 36%);
  --warning: hsl(36 90% 54%);
  --danger: hsl(4 74% 58%);
  --info: hsl(198 80% 46%);
  --border: hsl(215 35% 65% / 0.6);
  --focus-ring: hsl(200 85% 40%);
  --shadow-color: hsl(215 30% 40% / 0.4);
  --primary-glow: color-mix(in oklch, var(--primary) 35%, transparent);
  --overlay-strong: color-mix(in oklch, var(--bg) 88%, transparent);
  --overlay-soft: color-mix(in oklch, var(--surface) 75%, transparent);
}

@supports (color: oklch(0% 0 0)) {
  :root[data-theme='light'],
  html[data-theme='light'] {
    --bg: oklch(97% 0.02 240);
    --surface: oklch(94% 0.02 240);
    --surface-2: oklch(90% 0.02 240);
    --surface-3: oklch(86% 0.025 240);
    --text: oklch(30% 0.04 240);
    --text-muted: oklch(52% 0.03 240);
    --primary: oklch(62% 0.16 218);
    --primary-contrast: oklch(96% 0.01 240);
    --accent: oklch(60% 0.14 175);
    --success: oklch(58% 0.15 155);
    --warning: oklch(70% 0.12 80);
    --danger: oklch(60% 0.18 25);
    --info: oklch(62% 0.15 208);
    --border: oklch(78% 0.02 240 / 0.6);
    --focus-ring: oklch(63% 0.14 210);
    --shadow-color: oklch(68% 0.03 240 / 0.35);
  }
}

:root[data-theme='high-contrast'],
html[data-theme='high-contrast'],
.high-contrast {
  color-scheme: dark;
  --bg: hsl(0 0% 0%);
  --surface: hsl(0 0% 0%);
  --surface-2: hsl(0 0% 10%);
  --surface-3: hsl(0 0% 16%);
  --text: hsl(0 0% 100%);
  --text-muted: hsl(0 0% 80%);
  --primary: hsl(60 100% 50%);
  --primary-contrast: hsl(0 0% 0%);
  --accent: hsl(180 100% 50%);
  --success: hsl(120 100% 50%);
  --warning: hsl(39 100% 60%);
  --danger: hsl(0 100% 60%);
  --info: hsl(200 100% 60%);
  --border: hsl(0 0% 100% / 0.6);
  --focus-ring: hsl(60 100% 50%);
  --shadow-color: hsl(0 0% 0% / 0.8);
  --overlay-strong: hsl(0 0% 0% / 0.6);
  --overlay-soft: hsl(0 0% 0% / 0.4);
}

@supports (color: oklch(0% 0 0)) {
  :root[data-theme='high-contrast'],
  html[data-theme='high-contrast'],
  .high-contrast {
    --primary: oklch(89% 0.09 100);
    --accent: oklch(88% 0.1 200);
    --success: oklch(84% 0.09 145);
    --warning: oklch(90% 0.12 85);
    --danger: oklch(78% 0.16 25);
    --info: oklch(85% 0.12 220);
  }
}

/* Typography scale */
:root {
  --font-step--1: clamp(0.8125rem, 0.74rem + 0.18vw, 0.9rem);
  --font-step-0: clamp(1rem, 0.96rem + 0.2vw, 1.1rem);
  --font-step-1: clamp(1.25rem, 1.12rem + 0.4vw, 1.5rem);
  --font-step-2: clamp(1.563rem, 1.38rem + 0.6vw, 1.9rem);
  --font-step-3: clamp(1.953rem, 1.7rem + 0.8vw, 2.4rem);
  --font-step-4: clamp(2.441rem, 2.1rem + 1vw, 3.05rem);
}

/* Aliases for legacy tokens */
:root {
  --color-bg: var(--bg);
  --color-surface: var(--surface);
  --color-surface-muted: var(--surface-2);
  --color-surface-raised: var(--surface-3);
  --color-text: var(--text);
  --color-muted: var(--text-muted);
  --color-primary: var(--primary);
  --color-secondary: var(--surface-2);
  --color-accent: var(--accent);
  --color-error: var(--danger);
  --color-warning: var(--warning);
  --color-success: var(--success);
  --color-info: var(--info);
  --color-border: var(--border);
  --color-focus-ring: var(--focus-ring);
  --color-selection: color-mix(in oklch, var(--primary) 55%, transparent);
  --color-control-accent: var(--primary);
  --color-terminal: var(--success);
  --color-inverse: color-mix(in oklch, var(--text) 10%, black 90%);
  --kali-bg: color-mix(in oklch, var(--bg) 92%, transparent);
  --kali-blue: var(--primary);
  --kali-blue-dark: color-mix(in oklch, var(--primary) 60%, black 40%);
  --kali-blue-glow: color-mix(in oklch, var(--primary) 35%, transparent);
  --kali-bg-solid: var(--surface);
  --kali-panel: var(--surface-2);
  --kali-panel-border: var(--border);
  --kali-panel-highlight: color-mix(in oklch, var(--surface-2) 85%, var(--text) 15%);
  --kali-terminal: color-mix(in oklch, var(--surface-2) 80%, var(--accent) 20%);
  --kali-terminal-green: var(--success);
  --kali-terminal-text: var(--text);
  --kali-border: var(--border);
  --game-color-secondary: var(--accent);
  --game-color-success: var(--success);
  --game-color-warning: var(--warning);
  --game-color-danger: var(--danger);
  --color-severity-low: color-mix(in oklch, var(--success) 85%, var(--accent) 15%);
  --color-severity-medium: var(--warning);
  --color-severity-high: color-mix(in oklch, var(--danger) 90%, var(--warning) 10%);
  --color-severity-critical: color-mix(in oklch, var(--danger) 95%, black 5%);
  --color-window-border: color-mix(in oklch, var(--border) 70%, transparent);
  --color-window-accent: var(--primary);
  --radius-sm: var(--radius-1);
  --radius-md: var(--radius-1);
  --radius-lg: var(--radius-2);
  --radius-6: calc(var(--radius-2) * 1.5);
  --space-mobile-1: 8px;
  --space-mobile-2: 12px;
  --space-mobile-3: 16px;
  --space-mobile-4: 20px;
  --space-mobile-5: 24px;
  --space-mobile-6: 32px;
  --color-ub-grey: var(--surface);
  --color-ub-warm-grey: color-mix(in oklch, var(--surface) 85%, var(--accent) 15%);
  --color-ub-cool-grey: var(--surface-2);
  --color-ub-orange: var(--primary);
  --color-ub-lite-abrgn: color-mix(in oklch, var(--surface) 65%, var(--primary) 35%);
  --color-ub-med-abrgn: color-mix(in oklch, var(--surface-2) 75%, var(--primary) 25%);
  --color-ub-drk-abrgn: color-mix(in oklch, var(--surface-3) 85%, var(--primary) 15%);
  --color-ub-window-title: color-mix(in oklch, var(--surface-2) 70%, var(--primary) 30%);
  --color-ub-gedit-dark: color-mix(in oklch, var(--surface-2) 85%, var(--accent) 15%);
  --color-ub-gedit-light: color-mix(in oklch, var(--surface-3) 70%, var(--accent) 30%);
  --color-ub-gedit-darker: color-mix(in oklch, var(--surface) 90%, black 10%);
  --color-ubt-grey: var(--text);
  --color-ubt-warm-grey: color-mix(in oklch, var(--text-muted) 75%, var(--text) 25%);
  --color-ubt-cool-grey: var(--surface-3);
  --color-ubt-blue: var(--info);
  --color-ubt-green: var(--success);
  --color-ubt-gedit-orange: var(--warning);
  --color-ubt-gedit-blue: var(--info);
  --color-ubt-gedit-dark: color-mix(in oklch, var(--surface-2) 80%, var(--info) 20%);
  --color-ub-border-orange: color-mix(in oklch, var(--primary) 80%, transparent);
  --color-ub-dark-grey: var(--surface-3);
}

/* Dyslexia-friendly fonts */
.dyslexia {
  --font-sans: 'OpenDyslexic', 'Comic Sans MS', Arial, sans-serif;
}

/* Larger hit areas */
.large-hit-area {
  --hit-area: 48px;
}

/* Reduced motion */
.reduced-motion {
  --motion-fast: 0ms;
  --motion-medium: 0ms;
  --motion-slow: 0ms;
}

@media (prefers-reduced-motion: reduce) {
  :root {
    --motion-fast: 0ms;
    --motion-medium: 0ms;
    --motion-slow: 0ms;
  }
}

/* Optional high contrast via media query */
@media (prefers-contrast: more) {
  :root {
    --border: color-mix(in oklch, var(--text) 55%, transparent);
    --focus-ring: color-mix(in oklch, var(--primary) 75%, var(--text) 25%);
  }
}
