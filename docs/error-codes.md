# Error code catalog

This catalog documents every user-facing error code generated by the desktop shell. Each entry summarizes what the visitor sees, the remediation we surface in English and Spanish, and the triage steps for the support team.

Error codes are defined in [`types/errorCodes.ts`](../types/errorCodes.ts) and consumed by the runtime error boundaries and the Input Hub bug-report workflow. The `/input-hub` form automatically expands the template when it receives an `errorCode` query parameter.

| Code | Scope | Severity | Primary message (EN) |
| ---- | ----- | -------- | -------------------- |
| APP-0001 | Global shell | Critical | Critical application error |
| APP-0002 | App router | Major | App window failed to load |
| APP-0003 | Legacy pages | Major | Classic page crashed unexpectedly |
| APP-9999 | Unknown | Minor | Unknown error |

## APP-0001 — Global application crash

- **Scope:** Global shell bootstrap
- **Severity:** Critical
- **User messaging:**
  - **English:** “The desktop shell encountered an unrecoverable problem while loading core services. Select ‘Try again’ to reload the shell. If the error continues, clear your browser data or submit a bug report with this code.”
  - **Español:** “El escritorio encontró un problema irrecuperable mientras cargaba los servicios principales. Selecciona ‘Intentar de nuevo’ para recargar la interfaz. Si el error continúa, borra los datos del navegador o envía un informe con este código.”
- **Support checklist:**
  1. Check analytics, service worker, and logging dashboards for correlated deploy or network failures.
  2. Confirm the `/app/global-error` boundary reported telemetry with the request URL and locale.
  3. If reproducible, run the app locally with `yarn dev` to validate that core services initialize.

## APP-0002 — App route runtime failure

- **Scope:** App Router (`app/` directory)
- **Severity:** Major
- **User messaging:**
  - **English:** “A specific application route threw an exception while rendering. Use ‘Try again’ to reload the app. If the issue persists, capture the steps leading to the crash and report the code below.”
  - **Español:** “Una ruta de aplicación generó una excepción durante el renderizado. Usa ‘Intentar de nuevo’ para recargar la aplicación. Si el problema continúa, anota los pasos que llevan al fallo e informa el código siguiente.”
- **Support checklist:**
  1. Review the payload forwarded by `lib/client-error-reporter.ts` for the `segment` and stack trace.
  2. Verify that required demo data, feature flags, and environment variables are available in the current deployment.
  3. Attempt to reproduce in an isolated browser profile to rule out corrupted local storage.

## APP-0003 — Legacy page crash

- **Scope:** Classic Pages Router (`pages/` directory)
- **Severity:** Major
- **User messaging:**
  - **English:** “A legacy page rendered through the classic router stopped responding due to an unexpected error. Refresh the page to reload the experience. If it fails repeatedly, open the page in a new tab and include the code when filing a bug.”
  - **Español:** “Una página heredada que usa el enrutador clásico dejó de responder por un error inesperado. Actualiza la página para recargar la experiencia. Si falla repetidamente, ábrela en una pestaña nueva e incluye el código al enviar el informe.”
- **Support checklist:**
  1. Inspect CDN and asset logs to ensure static bundles used by the Pages router are available.
  2. Cross-check recent changes to shared providers (`_app.jsx`, context wrappers) that might impact legacy pages.
  3. Replay the bug report template from `/input-hub` to capture reproduction steps.

## APP-9999 — Unknown error bucket

- **Scope:** Fallback when a crash is not mapped
- **Severity:** Minor
- **User messaging:**
  - **English:** “An unexpected condition occurred and was not mapped to a known error code. Retry the last action. If the problem continues, share a bug report with this code and the steps you followed.”
  - **Español:** “Ocurrió una condición inesperada que no está asociada a un código de error conocido. Vuelve a intentar la última acción. Si el problema continúa, comparte un informe con este código y los pasos que seguiste.”
- **Support checklist:**
  1. Capture complete reproduction steps and browser details from the Input Hub submission.
  2. Categorize the incident and, if a pattern emerges, add a dedicated error code in `types/errorCodes.ts`.
  3. Confirm that the reporter’s locale matches a supported translation path.

### Reporting workflow refresher

1. When an error boundary fires, it displays the localized headline, remediation tip, and the error code.
2. The “Report this issue” action deep-links to `/input-hub?preset=bug&errorCode=CODE`, which pre-populates the support template.
3. The Input Hub sends telemetry through EmailJS and queues messages offline when the visitor is disconnected.
4. Support teams can reconcile submissions with server logs by matching the `code`, `severity`, and `locale` fields in the payload forwarded by `lib/client-error-reporter.ts`.
