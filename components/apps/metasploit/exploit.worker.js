onmessage = () => {
  const steps = [
    { stage: 'discovery', message: 'Initializing exploit...' },
    { stage: 'discovery', message: 'Checking target...' },
    { stage: 'exploitation', message: 'Sending payload...' },
    { stage: 'exploitation', message: 'Gaining access...' },
    { stage: 'post', message: 'Session established.' }
  ];
  const loot = { host: '10.0.0.3', data: 'ssh-creds.txt' };
  let i = 0;
  const sendStep = () => {
    if (i < steps.length) {
      postMessage({ step: steps[i] });
      if (i === 2) {
        postMessage({ loot });
      }
      i += 1;
      setTimeout(sendStep, 1000);
    } else {
      postMessage({ done: true });
    }
  };
  sendStep();
};
